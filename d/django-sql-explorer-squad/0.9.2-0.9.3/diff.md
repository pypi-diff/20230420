# Comparing `tmp/django_sql_explorer_squad-0.9.2-py3-none-any.whl.zip` & `tmp/django_sql_explorer_squad-0.9.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,37 +1,37 @@
-Zip file size: 66060 bytes, number of entries: 53
+Zip file size: 66385 bytes, number of entries: 53
 -rw-r--r--  2.0 unx      581 b- defN 23-Apr-03 11:51 explorer/__init__.py
 -rw-r--r--  2.0 unx     1632 b- defN 23-Apr-03 11:51 explorer/actions.py
--rw-r--r--  2.0 unx      377 b- defN 23-Apr-03 11:51 explorer/admin.py
+-rw-r--r--  2.0 unx      375 b- defN 23-Apr-20 07:23 explorer/admin.py
 -rw-r--r--  2.0 unx     2180 b- defN 23-Apr-07 15:58 explorer/app_settings.py
 -rw-r--r--  2.0 unx     2054 b- defN 23-Apr-03 11:51 explorer/counter.py
--rw-r--r--  2.0 unx     1729 b- defN 23-Apr-03 11:51 explorer/forms.py
--rw-r--r--  2.0 unx     8797 b- defN 23-Apr-12 13:11 explorer/models.py
+-rw-r--r--  2.0 unx     2039 b- defN 23-Apr-20 07:24 explorer/forms.py
+-rw-r--r--  2.0 unx     9199 b- defN 23-Apr-20 09:07 explorer/models.py
 -rw-r--r--  2.0 unx     2233 b- defN 23-Apr-03 11:51 explorer/tasks.py
 -rw-r--r--  2.0 unx     1265 b- defN 23-Apr-03 11:51 explorer/urls.py
--rw-r--r--  2.0 unx     8149 b- defN 23-Apr-11 09:08 explorer/utils.py
--rw-r--r--  2.0 unx    14720 b- defN 23-Apr-03 11:51 explorer/views.py
+-rw-r--r--  2.0 unx     8155 b- defN 23-Apr-19 10:31 explorer/utils.py
+-rw-r--r--  2.0 unx    15149 b- defN 23-Apr-20 07:10 explorer/views.py
 -rw-r--r--  2.0 unx      622 b- defN 23-Apr-07 14:34 explorer/__pycache__/__init__.cpython-39.pyc
 -rw-r--r--  2.0 unx    12809 b- defN 23-Apr-07 14:34 explorer/__pycache__/models.cpython-39.pyc
 -rw-r--r--  2.0 unx     9715 b- defN 23-Apr-07 14:34 explorer/__pycache__/utils.cpython-39.pyc
 -rw-r--r--  2.0 unx     1909 b- defN 23-Apr-03 11:51 explorer/migrations/0001_initial.py
 -rw-r--r--  2.0 unx      511 b- defN 23-Apr-03 11:51 explorer/migrations/0002_auto_20150501_1515.py
 -rw-r--r--  2.0 unx      457 b- defN 23-Apr-03 11:51 explorer/migrations/0003_query_snapshot.py
 -rw-r--r--  2.0 unx      410 b- defN 23-Apr-03 11:51 explorer/migrations/0004_querylog_duration.py
 -rw-r--r--  2.0 unx     1229 b- defN 23-Apr-03 11:51 explorer/migrations/0005_querychangelog.py
 -rw-r--r--  2.0 unx      454 b- defN 23-Apr-03 11:51 explorer/migrations/0006_auto_20230207_0103.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Apr-03 11:51 explorer/migrations/__init__.py
 -rw-r--r--  2.0 unx     1390 b- defN 23-Apr-03 11:51 explorer/static/explorer/explorer.css
--rw-r--r--  2.0 unx     8328 b- defN 23-Apr-03 11:51 explorer/static/explorer/explorer.js
+-rw-r--r--  2.0 unx     7596 b- defN 23-Apr-19 12:41 explorer/static/explorer/explorer.js
 -rw-r--r--  2.0 unx     1560 b- defN 23-Apr-03 11:51 explorer/static/explorer/query-list.js
 -rw-r--r--  2.0 unx     3883 b- defN 23-Apr-03 11:51 explorer/templates/explorer/base.html
 -rw-r--r--  2.0 unx      510 b- defN 23-Apr-03 11:51 explorer/templates/explorer/params.html
 -rw-r--r--  2.0 unx     3879 b- defN 23-Apr-12 11:36 explorer/templates/explorer/play.html
 -rw-r--r--  2.0 unx     6855 b- defN 23-Apr-03 11:51 explorer/templates/explorer/preview_pane.html
--rw-r--r--  2.0 unx     6706 b- defN 23-Apr-11 07:16 explorer/templates/explorer/query.html
+-rw-r--r--  2.0 unx     6739 b- defN 23-Apr-19 12:40 explorer/templates/explorer/query.html
 -rw-r--r--  2.0 unx      369 b- defN 23-Apr-03 11:51 explorer/templates/explorer/query_confirm_delete.html
 -rw-r--r--  2.0 unx     4526 b- defN 23-Apr-12 11:38 explorer/templates/explorer/query_list.html
 -rw-r--r--  2.0 unx     2018 b- defN 23-Apr-11 07:16 explorer/templates/explorer/querychangelog_list.html
 -rw-r--r--  2.0 unx     1969 b- defN 23-Apr-11 07:15 explorer/templates/explorer/querylog_list.html
 -rw-r--r--  2.0 unx     1819 b- defN 23-Apr-03 11:51 explorer/templates/explorer/schema.html
 -rw-r--r--  2.0 unx        0 b- defN 23-Apr-03 11:51 explorer/tests/__init__.py
 -rw-r--r--  2.0 unx      435 b- defN 23-Apr-03 11:51 explorer/tests/factories.py
@@ -42,14 +42,14 @@
 -rw-r--r--  2.0 unx     1985 b- defN 23-Apr-03 11:51 explorer/tests/test_tasks.py
 -rw-r--r--  2.0 unx     4827 b- defN 23-Apr-03 11:51 explorer/tests/test_utils.py
 -rw-r--r--  2.0 unx    19387 b- defN 23-Apr-03 11:51 explorer/tests/test_views.py
 -rw-r--r--  2.0 unx      222 b- defN 23-Apr-03 11:51 explorer/tests/urls.py
 -rw-r--r--  2.0 unx      928 b- defN 23-Apr-03 11:51 explorer/tests/utils.py
 -rw-r--r--  2.0 unx      163 b- defN 23-Apr-07 14:35 explorer/tests/__pycache__/__init__.cpython-39.pyc
 -rw-r--r--  2.0 unx      414 b- defN 23-Apr-07 14:35 explorer/tests/__pycache__/urls.cpython-39.pyc
--rw-r--r--  2.0 unx      244 b- defN 23-Apr-13 15:19 django_sql_explorer_squad-0.9.2.dist-info/AUTHORS
--rw-r--r--  2.0 unx     1090 b- defN 23-Apr-13 15:19 django_sql_explorer_squad-0.9.2.dist-info/LICENSE
--rw-r--r--  2.0 unx    16014 b- defN 23-Apr-13 15:19 django_sql_explorer_squad-0.9.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-13 15:19 django_sql_explorer_squad-0.9.2.dist-info/WHEEL
--rw-r--r--  2.0 unx        9 b- defN 23-Apr-13 15:19 django_sql_explorer_squad-0.9.2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     4789 b- defN 23-Apr-13 15:19 django_sql_explorer_squad-0.9.2.dist-info/RECORD
-53 files, 177149 bytes uncompressed, 58322 bytes compressed:  67.1%
+-rw-r--r--  2.0 unx      244 b- defN 23-Apr-20 09:56 django_sql_explorer_squad-0.9.3.dist-info/AUTHORS
+-rw-r--r--  2.0 unx     1090 b- defN 23-Apr-20 09:56 django_sql_explorer_squad-0.9.3.dist-info/LICENSE
+-rw-r--r--  2.0 unx    16014 b- defN 23-Apr-20 09:56 django_sql_explorer_squad-0.9.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-20 09:56 django_sql_explorer_squad-0.9.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx        9 b- defN 23-Apr-20 09:56 django_sql_explorer_squad-0.9.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     4789 b- defN 23-Apr-20 09:56 django_sql_explorer_squad-0.9.3.dist-info/RECORD
+53 files, 177595 bytes uncompressed, 58647 bytes compressed:  67.0%
```

## zipnote {}

```diff
@@ -135,26 +135,26 @@
 
 Filename: explorer/tests/__pycache__/__init__.cpython-39.pyc
 Comment: 
 
 Filename: explorer/tests/__pycache__/urls.cpython-39.pyc
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.2.dist-info/AUTHORS
+Filename: django_sql_explorer_squad-0.9.3.dist-info/AUTHORS
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.2.dist-info/LICENSE
+Filename: django_sql_explorer_squad-0.9.3.dist-info/LICENSE
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.2.dist-info/METADATA
+Filename: django_sql_explorer_squad-0.9.3.dist-info/METADATA
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.2.dist-info/WHEEL
+Filename: django_sql_explorer_squad-0.9.3.dist-info/WHEEL
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.2.dist-info/top_level.txt
+Filename: django_sql_explorer_squad-0.9.3.dist-info/top_level.txt
 Comment: 
 
-Filename: django_sql_explorer_squad-0.9.2.dist-info/RECORD
+Filename: django_sql_explorer_squad-0.9.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## explorer/admin.py

```diff
@@ -1,13 +1,15 @@
+
 from django.contrib import admin
 from explorer.models import Query
 from explorer.actions import generate_report_action
 
 
 class QueryAdmin(admin.ModelAdmin):
     list_display = ('title', 'description', 'created_by_user',)
     list_filter = ('title',)
     raw_id_fields = ('created_by_user',)
-    
+
     actions = [generate_report_action()]
 
+
 admin.site.register(Query, QueryAdmin)
```

## explorer/forms.py

```diff
@@ -1,37 +1,48 @@
 from django.forms import ModelForm, Field, ValidationError, BooleanField
 from django.forms.widgets import CheckboxInput
 from explorer.models import Query, MSG_FAILED_BLACKLIST
 from django.db import DatabaseError
+import logging
+import re
+def _(x): return x
 
-_ = lambda x: x
+
+logger = logging.getLogger(__name__)
 
 
 class SqlField(Field):
 
     def validate(self, value):
         """
         Ensure that the SQL passes the blacklist and executes. Execution check is skipped if params are present.
 
         :param value: The SQL for this Query model.
         """
-
+        super().validate(value)
         query = Query(sql=value)
 
         passes_blacklist, failing_words = query.passes_blacklist()
 
-        error = MSG_FAILED_BLACKLIST % ', '.join(failing_words) if not passes_blacklist else None
+        error = MSG_FAILED_BLACKLIST % ', '.join(
+            failing_words) if not passes_blacklist else None
 
         if not error and not query.available_params():
             try:
                 query.execute_query_only()
             except DatabaseError as e:
-                error = str(e)
+
+                logger.info("error executing query: %s", e)
+                if (re.search("permission denied for table", str(e))):
+                    error = None
+                else:
+                    error = e
 
         if error:
+            
             raise ValidationError(
                 _(error),
                 code="InvalidSql"
             )
 
 
 class QueryForm(ModelForm):
@@ -50,8 +61,8 @@
 
     @property
     def created_by_user_id(self):
         return self.instance.created_by_user.id if self.instance.created_by_user else ''
 
     class Meta:
         model = Query
-        fields = ['title', 'sql', 'description', 'created_by_user', 'snapshot']
+        fields = ['title', 'sql', 'description', 'created_by_user', 'snapshot']
```

## explorer/models.py

```diff
@@ -1,15 +1,19 @@
 from explorer.utils import passes_blacklist, swap_params, extract_params, shared_dict_update, get_connection, get_s3_connection, get_connection_pii
 from future.utils import python_2_unicode_compatible
 from django.db import models, DatabaseError
 from time import time
 from django.core.urlresolvers import reverse
 from django.conf import settings
+from django.contrib import messages
+from django.contrib.messages import constants as messages_constants
 from . import app_settings
 import logging
+import re
+import json
 import six
 
 MSG_FAILED_BLACKLIST = "Query failed the SQL blacklist: %s"
 
 
 logger = logging.getLogger(__name__)
 
@@ -48,15 +52,15 @@
         return passes_blacklist(self.final_sql())
 
     def final_sql(self):
         return swap_params(self.sql, self.available_params())
 
     def execute_query_only(self, is_connection_type_pii=None):
 
-        return QueryResult(self.final_sql(), is_connection_type_pii)
+        return QueryResult(self.final_sql(),self.title,is_connection_type_pii)
 
     def execute_with_logging(self, executing_user):
         ql = self.log(executing_user)
         ret = self.execute()
         ql.duration = ret.duration
         ql.save()
         return ret, ql
@@ -140,26 +144,28 @@
 
     class Meta:
         ordering = ['-run_at']
 
 
 class QueryResult(object):
 
-    def __init__(self, sql, is_connection_type_pii=None):
+    def __init__(self, sql, title,is_connection_type_pii=None):
 
         self.sql = sql
+        self.title=title
         if (is_connection_type_pii):
             self.is_connection_type_pii = is_connection_type_pii
         else:
             self.is_connection_type_pii = False
 
         cursor, duration = self.execute_query()
 
         self._description = cursor.description or []
         self._data = [list(r) for r in cursor.fetchall()]
+
         self.duration = duration
 
         cursor.close()
 
         self._headers = self._get_headers()
         self._summary = {}
 
@@ -222,15 +228,20 @@
         cursor = conn.cursor()
         start_time = time()
 
         try:
             cursor.execute(self.sql)
         except DatabaseError as e:
             cursor.close()
-            raise e
+            if (re.search("permission denied for table", str(e)) and self.title != "Playground"):
+
+                raise DatabaseError(
+                    "Query saved but unable to execute it because "+str(e))
+            else:
+                raise e
 
         return cursor, ((time() - start_time) * 1000)
 
 
 class ColumnHeader(object):
 
     def __init__(self, title):
```

## explorer/utils.py

```diff
@@ -279,7 +279,9 @@
     threshold_value = datetime.timedelta(
         minutes=REPLICATION_LAG_THRESHOLD_VALUE_IN_MINUTES)
 
     if not replication_lag or replication_lag <= threshold_value:
         return False, None
 
     return True, human(replication_lag, 4)
+
+
```

## explorer/views.py

```diff
@@ -1,9 +1,10 @@
 from explorer.tasks import execute_query
 import six
+import logging
 
 from django.http.response import HttpResponseRedirect
 from django.shortcuts import render_to_response, get_object_or_404
 from django.template import RequestContext
 from django.views.generic.base import View
 from django.views.generic import ListView
 from django.views.generic.edit import CreateView, DeleteView
@@ -11,14 +12,15 @@
 from django.utils.decorators import method_decorator
 from django.core.urlresolvers import reverse_lazy
 from django.forms.models import model_to_dict
 from django.http import HttpResponse
 from django.db import DatabaseError
 from django.db.models import Count
 from django.forms import ValidationError
+from django.utils.translation import gettext_lazy as _
 
 from explorer.models import Query, QueryLog, QueryChangeLog, MSG_FAILED_BLACKLIST
 from explorer import app_settings
 from explorer.forms import QueryForm
 from explorer.utils import url_get_rows,\
     url_get_query_id,\
     url_get_log_id,\
@@ -40,14 +42,16 @@
     from counter import Counter
 
 
 import re
 import json
 from functools import wraps
 
+logger = logging.getLogger(__name__)
+
 
 def view_permission(f):
     @wraps(f)
     def wrap(request, *args, **kwargs):
         if not app_settings.EXPLORER_PERMISSION_VIEW(request.user)\
                 and not user_can_see_query(request, kwargs)\
                 and not (app_settings.EXPLORER_TOKEN_AUTH_ENABLED()
@@ -149,23 +153,25 @@
     @method_decorator(view_permission_list)
     def dispatch(self, *args, **kwargs):
         return super(ListQueryView, self).dispatch(*args, **kwargs)
 
     def get_context_data(self, **kwargs):
         context = super(ListQueryView, self).get_context_data(**kwargs)
         context['object_list'] = self._build_queries_and_headers()
-        context['recent_queries'] = self.get_queryset().order_by('-last_run_date')[:app_settings.EXPLORER_RECENT_QUERY_COUNT]
+        context['recent_queries'] = self.get_queryset().order_by(
+            '-last_run_date')[:app_settings.EXPLORER_RECENT_QUERY_COUNT]
         context['tasks_enabled'] = app_settings.ENABLE_TASKS
         return context
 
     def get_queryset(self):
         if app_settings.EXPLORER_PERMISSION_VIEW(self.request.user):
             qs = Query.objects.prefetch_related('created_by_user').all()
         else:
-            qs = Query.objects.prefetch_related('created_by_user').filter(pk__in=allowed_query_pks(self.request.user.id))
+            qs = Query.objects.prefetch_related('created_by_user').filter(
+                pk__in=allowed_query_pks(self.request.user.id))
         return qs.annotate(run_count=Count('querylog'))
 
     def _build_queries_and_headers(self):
         """
         Build a list of query information and headers (pseudo-folders) for consumption by the template.
 
         Strategy: Look for queries with titles of the form "something - else" (eg. with a ' - ' in the middle)
@@ -284,67 +290,88 @@
         return self.render(request)
 
     def post(self, request):
         sql = request.POST.get('sql')
         show_results = request.POST.get('show', True)
         query = Query(sql=sql, title="Playground")
         passes_blacklist, failing_words = query.passes_blacklist()
-        error = MSG_FAILED_BLACKLIST % ', '.join(failing_words) if not passes_blacklist else None
+        error = MSG_FAILED_BLACKLIST % ', '.join(
+            failing_words) if not passes_blacklist else None
         run_query = not bool(error) if show_results else False
         return self.render_with_sql(request, query, run_query=run_query, error=error)
 
     def render(self, request):
         return self.render_template('explorer/play.html', RequestContext(request, {'title': 'Playground'}))
 
     def render_with_sql(self, request, query, run_query=True, error=None):
-        return self.render_template('explorer/play.html', query_viewmodel(request, query, title="Playground"
-                                                                          , run_query=run_query, error=error))
+        return self.render_template('explorer/play.html', query_viewmodel(request, query, title="Playground", run_query=run_query, error=error))
 
 
 class QueryView(ExplorerContextMixin, View):
 
     @method_decorator(view_permission)
     def dispatch(self, *args, **kwargs):
         return super(QueryView, self).dispatch(*args, **kwargs)
 
     def get(self, request, query_id):
         query, form = QueryView.get_instance_and_form(request, query_id)
         query.save()  # updates the modified date
-        show = url_get_show(request)  # if a query is timing out, it can be useful to nav to /query/id/?show=0
+        # if a query is timing out, it can be useful to nav to /query/id/?show=0
+        show = url_get_show(request)
         vm = query_viewmodel(request, query, form=form, run_query=show)
         return self.render_template('explorer/query.html', vm)
 
     def post(self, request, query_id):
         if not app_settings.EXPLORER_PERMISSION_CHANGE(request.user):
             return HttpResponseRedirect(
                 reverse_lazy('query_detail', kwargs={'query_id': query_id})
             )
-
+        show = url_get_show(request)
         query, form = QueryView.get_instance_and_form(request, query_id)
-        old_sql = query.sql;
+
+        old_sql = query.sql
         form_isvalid = form.is_valid()
         if form_isvalid:
             new_sql = request.POST.get('sql')
             if not compare_sql(old_sql, new_sql):
                 change_log = QueryChangeLog(
                     old_sql=old_sql,
                     new_sql=new_sql,
                     query=query,
                     run_by_user=request.user,
                 )
                 change_log.save()
         success = form_isvalid and form.save()
-        vm = query_viewmodel(request, query, form=form, message="Query saved." if success else None)
+
+        try:
+            vm = query_viewmodel(
+                request,
+                query,
+                form=form,
+                run_query=show,
+                message=_("Query saved.") if success else "Query not saved"
+            )
+        except ValidationError as ve:
+
+            vm = query_viewmodel(
+                request,
+                query,
+                form=form,
+                run_query=False,
+                
+                error=ve.message
+            )
         return self.render_template('explorer/query.html', vm)
 
     @staticmethod
     def get_instance_and_form(request, query_id):
         query = get_object_or_404(Query, pk=query_id)
         query.params = url_get_params(request)
-        form = QueryForm(request.POST if len(request.POST) else None, instance=query)
+        form = QueryForm(request.POST if len(
+            request.POST) else None, instance=query)
         return query, form
 
 
 def query_viewmodel(request, query, title=None, form=None, message=None, run_query=True, error=None):
     rows = url_get_rows(request)
     res = None
     ql = None
@@ -354,30 +381,30 @@
         try:
             res, ql = query.execute_with_logging(request.user)
             lag_exists, replication_lag = check_replication_lag()
         except DatabaseError as e:
             error = str(e)
     has_valid_results = not error and res and run_query
     ret = RequestContext(request, {
-            'tasks_enabled': app_settings.ENABLE_TASKS,
-            'params': query.available_params(),
-            'title': title,
-            'shared': query.shared,
-            'query': query,
-            'form': form,
-            'message': message,
-            'error': error,
-            'rows': rows,
-            'data': res.data[:rows] if has_valid_results else None,
-            'headers': res.headers if has_valid_results else None,
-            'total_rows': len(res.data) if has_valid_results else None,
-            'duration': res.duration if has_valid_results else None,
-            'has_stats': len([h for h in res.headers if h.summary]) if has_valid_results else False,
-            'dataUrl': reverse_lazy('query_csv', kwargs={'query_id': query.id}) if query.id else '',
-            'bucket': app_settings.S3_BUCKET,
-            'snapshots': query.snapshots if query.snapshot else [],
-            'ql_id': ql.id if ql else None,
-            'lag_exists': lag_exists,
-            'replication_lag': replication_lag,
-            }
-        )
+        'tasks_enabled': app_settings.ENABLE_TASKS,
+        'params': query.available_params(),
+        'title': title,
+        'shared': query.shared,
+        'query': query,
+        'form': form,
+        'message': message,
+        'error': error,
+        'rows': rows,
+        'data': res.data[:rows] if has_valid_results else None,
+        'headers': res.headers if has_valid_results else None,
+        'total_rows': len(res.data) if has_valid_results else None,
+        'duration': res.duration if has_valid_results else None,
+        'has_stats': len([h for h in res.headers if h.summary]) if has_valid_results else False,
+        'dataUrl': reverse_lazy('query_csv', kwargs={'query_id': query.id}) if query.id else '',
+        'bucket': app_settings.S3_BUCKET,
+        'snapshots': query.snapshots if query.snapshot else [],
+        'ql_id': ql.id if ql else None,
+        'lag_exists': lag_exists,
+        'replication_lag': replication_lag,
+    }
+    )
     return ret
```

## explorer/static/explorer/explorer.js

### js-beautify {}

```diff
@@ -1,127 +1,137 @@
-var csrf_token = $.cookie('csrftoken');
+var csrf_token = $.cookie("csrftoken");
 $.ajaxSetup({
     beforeSend: function(xhr) {
         xhr.setRequestHeader("X-CSRFToken", csrf_token);
-    }
+    },
 });
 
 function ExplorerEditor(queryId, dataUrl) {
     this.queryId = queryId;
     this.dataUrl = dataUrl;
-    this.$table = $('#preview');
-    this.$rows = $('#rows');
+    this.$table = $("#preview");
+    this.$rows = $("#rows");
     this.$form = $("form");
     this.$snapshotField = $("#id_snapshot");
     this.$paramFields = this.$form.find(".param");
 
     this.$submit = $("#refresh_play_button, #save_button");
+
     if (!this.$submit.length) {
         this.$submit = $("#refresh_button");
     }
 
-    this.editor = CodeMirror.fromTextArea(document.getElementById('id_sql'), {
+    this.editor = CodeMirror.fromTextArea(document.getElementById("id_sql"), {
         mode: "text/x-sql",
-        lineNumbers: 't',
+        lineNumbers: "t",
         autofocus: true,
         height: 500,
         extraKeys: {
             "Ctrl-Enter": function() {
                 this.doCodeMirrorSubmit();
             }.bind(this),
             "Cmd-Enter": function() {
                 this.doCodeMirrorSubmit();
             }.bind(this),
             "Cmd-/": function() {
                 this.editor.toggleComment();
-            }.bind(this)
-        }
+            }.bind(this),
+        },
     });
     this.editor.on("change", function(cm, change) {
-        document.getElementById('id_sql').classList.add('changed-input');
+        document.getElementById("id_sql").classList.add("changed-input");
     });
     this.bind();
 }
 
 ExplorerEditor.prototype.getParams = function() {
     var o = false;
     if (this.$paramFields.length) {
         o = {};
         this.$paramFields.each(function() {
-            o[$(this).data('param')] = $(this).val();
+            o[$(this).data("param")] = $(this).val();
         });
     }
     return o;
 };
 
 ExplorerEditor.prototype.serializeParams = function(params) {
     var args = [];
     for (var key in params) {
-        args.push(key + '%3A' + params[key]);
+        args.push(key + "%3A" + params[key]);
     }
-    return args.join('%7C');
+    return args.join("%7C");
 };
 
 ExplorerEditor.prototype.doCodeMirrorSubmit = function() {
     // Captures the cmd+enter keystroke and figures out which button to trigger.
     this.$submit.click();
 };
 
 ExplorerEditor.prototype.savePivotState = function(state) {
-    bmark = btoa(JSON.stringify(_(state).pick('aggregatorName', 'rows', 'cols', 'rendererName', 'vals')));
-    $el = $('#pivot-bookmark')
-    $el.attr('href', $el.data('baseurl') + '#' + bmark)
+    bmark = btoa(
+        JSON.stringify(
+            _(state).pick("aggregatorName", "rows", "cols", "rendererName", "vals")
+        )
+    );
+    $el = $("#pivot-bookmark");
+    $el.attr("href", $el.data("baseurl") + "#" + bmark);
 };
 
 ExplorerEditor.prototype.updateQueryString = function(key, value, url) {
     // http://stackoverflow.com/a/11654596/221390
     if (!url) url = window.location.href;
     var re = new RegExp("([?&])" + key + "=.*?(&|#|$)(.*)", "gi");
 
     if (re.test(url)) {
-        if (typeof value !== 'undefined' && value !== null)
-            return url.replace(re, '$1' + key + "=" + value + '$2$3');
+        if (typeof value !== "undefined" && value !== null)
+            return url.replace(re, "$1" + key + "=" + value + "$2$3");
         else {
-            var hash = url.split('#');
-            url = hash[0].replace(re, '$1$3').replace(/(&|\?)$/, '');
-            if (typeof hash[1] !== 'undefined' && hash[1] !== null)
-                url += '#' + hash[1];
+            var hash = url.split("#");
+            url = hash[0].replace(re, "$1$3").replace(/(&|\?)$/, "");
+            if (typeof hash[1] !== "undefined" && hash[1] !== null)
+                url += "#" + hash[1];
             return url;
         }
     } else {
-        if (typeof value !== 'undefined' && value !== null) {
-            var separator = url.indexOf('?') !== -1 ? '&' : '?',
-                hash = url.split('#');
-            url = hash[0] + separator + key + '=' + value;
-            if (typeof hash[1] !== 'undefined' && hash[1] !== null)
-                url += '#' + hash[1];
-            return url;
-        } else
+        if (typeof value !== "undefined" && value !== null) {
+            var separator = url.indexOf("?") !== -1 ? "&" : "?",
+                hash = url.split("#");
+            url = hash[0] + separator + key + "=" + value;
+            if (typeof hash[1] !== "undefined" && hash[1] !== null)
+                url += "#" + hash[1];
             return url;
+        } else return url;
     }
 };
 
 ExplorerEditor.prototype.formatSql = function() {
-    $.post('../format/', {
-        sql: this.editor.getValue()
-    }, function(data) {
-        this.editor.setValue(data.formatted);
-    }.bind(this));
+    $.post(
+        "../format/", {
+            sql: this.editor.getValue()
+        },
+        function(data) {
+            this.editor.setValue(data.formatted);
+        }.bind(this)
+    );
 };
 
 ExplorerEditor.prototype.showRows = function() {
     var rows = this.$rows.val(),
         $form = $("#editor");
-    $form.attr('action', this.updateQueryString("rows", rows, window.location.href));
+    $form.attr(
+        "action",
+        this.updateQueryString("rows", rows, window.location.href)
+    );
     $form.submit();
 };
 
 ExplorerEditor.prototype.bind = function() {
     $("#show_schema_button").click(function() {
-        $("#schema_frame").attr('src', '../schema/');
+        $("#schema_frame").attr("src", "../schema/");
         $("#query_area").addClass("col-md-9");
         var schema$ = $("#schema");
         schema$.addClass("col-md-3");
         schema$.show();
         $(this).hide();
         $("#hide_schema_button").show();
         return false;
@@ -133,139 +143,178 @@
         schema$.removeClass("col-md-3");
         schema$.hide();
         $(this).hide();
         $("#show_schema_button").show();
         return false;
     });
 
-    $("#format_button").click(function(e) {
-        e.preventDefault();
-        this.formatSql();
-    }.bind(this));
-
-    $("#save_button").click(function() {
-        var params = this.getParams(this);
-        if (params) {
-            this.$form.attr('action', '../' + this.queryId + '/?params=' + this.serializeParams(params));
-        }
-        this.$snapshotField.hide();
-        this.$form.append(this.$snapshotField);
-    }.bind(this));
-
-    $("#refresh_button").click(function(e) {
-        e.preventDefault();
-        var params = this.getParams();
-        if (params) {
-            window.location.href = '../' + this.queryId + '/?params=' + this.serializeParams(params);
-        } else {
-            window.location.href = '../' + this.queryId + '/';
-        }
-    }.bind(this));
+    $("#format_button").click(
+        function(e) {
+            e.preventDefault();
+            this.formatSql();
+        }.bind(this)
+    );
 
-    $("#refresh_play_button").click(function() {
-        this.$form.attr('action', '../play/');
-    }.bind(this));
-
-    $("#playground_button").click(function() {
-        this.$form.prepend("<input type=hidden name=show value='' />");
-        this.$form.attr('action', '../play/');
-    }.bind(this));
-
-    $("#download_play_button").click(function() {
-        this.$form.attr('action', '../csv');
-    }.bind(this));
-
-    $(".download_button").click(function(e) {
-        e.preventDefault();
-        var dl_link = 'download';
-        var params = this.getParams(this);
-        if (params) {
-            dl_link = dl_link + '?params=' + this.serializeParams(params);
-        }
-        window.open(dl_link, '_blank');
-    }.bind(this));
+    $("#save_button").click(
+        function() {
+            var params = this.getParams(this);
+            if (params) {
+                this.$form.attr(
+                    "action",
+                    "../" + this.queryId + "/?params=" + this.serializeParams(params)
+                );
+            }
+            this.$snapshotField.hide();
+            this.$form.append(this.$snapshotField);
+        }.bind(this)
+    );
 
-    $("#create_button").click(function() {
-        this.$form.attr('action', '../new/');
-    }.bind(this));
-
-    $(".stats-expand").click(function(e) {
-        e.preventDefault();
-        $(".stats-expand").hide();
-        $(".stats-wrapper").show();
-        this.$table.floatThead('reflow');
-    }.bind(this));
-
-    $(".sort").click(function(e) {
-        var t = $(e.target).data('sort');
-        var dir = $(e.target).data('dir');
-        $('.sort').css('background-image', 'url(http://cdn.datatables.net/1.10.0/images/sort_both.png)')
-        if (dir == 'asc') {
-            $(e.target).data('dir', 'desc');
-            $(e.target).css('background-image', 'url(http://cdn.datatables.net/1.10.0/images/sort_asc.png)')
-        } else {
-            $(e.target).data('dir', 'asc');
-            $(e.target).css('background-image', 'url(http://cdn.datatables.net/1.10.0/images/sort_desc.png)')
-        }
-        var vals = [];
-        var ct = 0;
-        while (ct < this.$table.find('th').length) {
-            vals.push(ct++);
-        }
-        var options = {
-            valueNames: vals
-        };
-        var tableList = new List('preview', options);
-        tableList.sort(t, {
-            order: dir
-        });
-    }.bind(this));
+    $("#refresh_button").click(
+        function(e) {
+            e.preventDefault();
+            var params = this.getParams();
+            if (params) {
+                window.location.href =
+                    "../" + this.queryId + "/?params=" + this.serializeParams(params);
+            } else {
+                window.location.href = "../" + this.queryId + "/";
+            }
+        }.bind(this)
+    );
 
-    $("#preview-tab-label").click(function() {
-        this.$table.floatThead('reflow');
-    }.bind(this));
+    $("#refresh_play_button").click(
+        function() {
+            this.$form.attr("action", "../play/");
+        }.bind(this)
+    );
+
+    $("#playground_button").click(
+        function() {
+            this.$form.prepend("<input type=hidden name=show value='' />");
+            this.$form.attr("action", "../play/");
+        }.bind(this)
+    );
+
+    $("#download_play_button").click(
+        function() {
+            this.$form.attr("action", "../csv");
+        }.bind(this)
+    );
+
+    $(".download_button").click(
+        function(e) {
+            e.preventDefault();
+            var dl_link = "download";
+            var params = this.getParams(this);
+            if (params) {
+                dl_link = dl_link + "?params=" + this.serializeParams(params);
+            }
+            window.open(dl_link, "_blank");
+        }.bind(this)
+    );
+
+    $("#create_button").click(
+        function() {
+            this.$form.attr("action", "../new/");
+        }.bind(this)
+    );
+
+    $(".stats-expand").click(
+        function(e) {
+            e.preventDefault();
+            $(".stats-expand").hide();
+            $(".stats-wrapper").show();
+            this.$table.floatThead("reflow");
+        }.bind(this)
+    );
+
+    $(".sort").click(
+        function(e) {
+            var t = $(e.target).data("sort");
+            var dir = $(e.target).data("dir");
+            $(".sort").css(
+                "background-image",
+                "url(http://cdn.datatables.net/1.10.0/images/sort_both.png)"
+            );
+            if (dir == "asc") {
+                $(e.target).data("dir", "desc");
+                $(e.target).css(
+                    "background-image",
+                    "url(http://cdn.datatables.net/1.10.0/images/sort_asc.png)"
+                );
+            } else {
+                $(e.target).data("dir", "asc");
+                $(e.target).css(
+                    "background-image",
+                    "url(http://cdn.datatables.net/1.10.0/images/sort_desc.png)"
+                );
+            }
+            var vals = [];
+            var ct = 0;
+            while (ct < this.$table.find("th").length) {
+                vals.push(ct++);
+            }
+            var options = {
+                valueNames: vals,
+            };
+            var tableList = new List("preview", options);
+            tableList.sort(t, {
+                order: dir
+            });
+        }.bind(this)
+    );
+
+    $("#preview-tab-label").click(
+        function() {
+            this.$table.floatThead("reflow");
+        }.bind(this)
+    );
 
     var pivotState = window.location.hash;
     var navToPivot = false;
     if (!pivotState) {
         pivotState = {
             onRefresh: this.savePivotState
         };
     } else {
         pivotState = JSON.parse(atob(pivotState.substr(1)));
-        pivotState['onRefresh'] = this.savePivotState;
+        pivotState["onRefresh"] = this.savePivotState;
         navToPivot = true;
     }
 
     $(".pivot-table").pivotUI(this.$table, pivotState);
     if (navToPivot) {
-        $("#pivot-tab-label").tab('show');
+        $("#pivot-tab-label").tab("show");
     }
 
     this.$table.floatThead({
         scrollContainer: function() {
-            return this.$table.closest('.overflow-wrapper');
-        }.bind(this)
+            return this.$table.closest(".overflow-wrapper");
+        }.bind(this),
     });
 
-    this.$rows.change(function() {
-        this.showRows();
-    }.bind(this));
-    this.$rows.keyup(function(event) {
-        if (event.keyCode == 13) {
+    this.$rows.change(
+        function() {
             this.showRows();
-        }
-    }.bind(this));
+        }.bind(this)
+    );
+    this.$rows.keyup(
+        function(event) {
+            if (event.keyCode == 13) {
+                this.showRows();
+            }
+        }.bind(this)
+    );
 };
 
-$(window).on('beforeunload', function() {
+$(window).on("beforeunload", function() {
     // Only do this if changed-input is on the page and we're not on the playground page.
-    if ($('.changed-input').length && !$('.playground-form').length) {
-        return 'You have unsaved changes to your query.';
+    if ($(".changed-input").length && !$(".playground-form").length) {
+        return "You have unsaved changes to your query.";
     }
 });
 
 // Disable unsaved changes warning when submitting the editor form
 $(document).on("submit", "#editor", function(event) {
     // disable warning
-    $(window).off('beforeunload');
+    $(window).off("beforeunload");
 });
```

## explorer/templates/explorer/query.html

```diff
@@ -76,14 +76,15 @@
                     {% endif %}
                 </div>
                 <div class="form-group">
                     <div class="text-center">
                         <div class="btn-group">
                             {% if can_change %}
                                 <input type="submit" value="Save & Run" class="btn btn-default" id="save_button" />
+                                
                                 {% if query %}
                                      <button class="btn btn-default download_button" href="{% url "query_csv" query.id %}">Download CSV</button>
                                      <input type="submit" value="Open in Playground" class="btn btn-default" id="playground_button"/>
 
                                 {%  endif %}
                                 <button type="button" class="btn btn-default" id="show_schema_button">Show Schema</button>
                                 <button type="button" class="btn btn-default" id="hide_schema_button" style="display: none;">Hide Schema</button>
```

## Comparing `django_sql_explorer_squad-0.9.2.dist-info/LICENSE` & `django_sql_explorer_squad-0.9.3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `django_sql_explorer_squad-0.9.2.dist-info/METADATA` & `django_sql_explorer_squad-0.9.3.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: django-sql-explorer-squad
-Version: 0.9.2
+Version: 0.9.3
 Summary: A pluggable app that allows users (admins) to execute SQL, view, and export the results. Inspired by Stack Exchange Data Explorer.
 Home-page: https://github.com/HemendraSharma04/django-sql-explorer
 Author: Hemendra Sharma
 Author-email: hemendrasharma2019@gmail.com
 License: MIT
 Keywords: django sql explorer reports reporting csv database query
 Classifier: Development Status :: 5 - Production/Stable
```

## Comparing `django_sql_explorer_squad-0.9.2.dist-info/RECORD` & `django_sql_explorer_squad-0.9.3.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,36 +1,36 @@
 explorer/__init__.py,sha256=wDYAiDMNYAoq4TtWnpdHeZbrDz7B5c9PvtY6ctPnx_Y,581
 explorer/actions.py,sha256=9HXZJasw4KInj2sJjFA1V2kr-x6TBQv8-LCgfz6AjbY,1632
-explorer/admin.py,sha256=ULqikLVEyy-pucyCtJWUnTedQlnTO4g4rQ21eJESW5w,377
+explorer/admin.py,sha256=kxspF9IE1I-klJjonhNU8rIkR1N9qCU8faItUSUvyys,375
 explorer/app_settings.py,sha256=JfFrwcggrrJnOu6Dn6GvfzIr4Tn4_3kHNI6eeFCqh2c,2180
 explorer/counter.py,sha256=VHqsayUogidDwQ79PcRLox-vk8JfL8obQBlKeX3Bp-w,2054
-explorer/forms.py,sha256=us5XQdRRDiXwI_sgShcbWw6HodHUt9LJYw4AFFJ16Vw,1729
-explorer/models.py,sha256=XuBndj0Ilbf8x4VFYabl4aYmDwb23DpYUMTQpluQiC0,8797
+explorer/forms.py,sha256=vfmoyUxfueFTfk-4qP_aRiVUdCTY9sVka0tcY8x48BQ,2039
+explorer/models.py,sha256=RjcyC8KrFIzpfyJMMPY111Dz9gmhoPn-Hp2h2SA9iyk,9199
 explorer/tasks.py,sha256=E9oASEaa1ujsCr7YDfCr6xfFWxftjtKO73EiColPeBk,2233
 explorer/urls.py,sha256=uOcxG1clyuW7uGeqV1RFWmmkWG2gNXvb8-o_WjrgnAI,1265
-explorer/utils.py,sha256=BucsoTXWYlszxSC7XtfaGVXX9ndB3Tk6wJkDHvk-u9U,8149
-explorer/views.py,sha256=wDp1CCu_rYm1IZDL3o2SBmYm0thU79YVK8rJWAEEmrE,14720
+explorer/utils.py,sha256=dhhb4IEoTd5VPTpBc2u_lKcUClo8agLgtzRzM1fsZAw,8155
+explorer/views.py,sha256=UZt0-VM770BfoT2usxYTGbFz5Pk6v_gt7JZRWQhtD8U,15149
 explorer/__pycache__/__init__.cpython-39.pyc,sha256=0ynhNHdsfftjdQCbQ2XAXl973DZVVz8b2QbKU5iK_kw,622
 explorer/__pycache__/models.cpython-39.pyc,sha256=HVylAkpa-FDJXIMqwXJ-rtjRUku2yDABswG3e9Mswsc,12809
 explorer/__pycache__/utils.cpython-39.pyc,sha256=JIR2nr9zX4yV9VqM1JoDRqlSLLFBEXhj_4QyEvSN4YA,9715
 explorer/migrations/0001_initial.py,sha256=8ZTRFFkznebXTNIN4M3IHWHUwpMW0WS6tLHEfhUWfkw,1909
 explorer/migrations/0002_auto_20150501_1515.py,sha256=naK6Nz9pCzS1jbfbzUzs6lT68-KUW0cFFOLGZz4vGsg,511
 explorer/migrations/0003_query_snapshot.py,sha256=2NULV1bSd2LNXXbfvBsrcu7SrnxFBK18WwUTS_mZflg,457
 explorer/migrations/0004_querylog_duration.py,sha256=AF8XoLIwIHiwrCXWdr4IEfV3w4xEY7yHqNvrjlhAMoY,410
 explorer/migrations/0005_querychangelog.py,sha256=lA4N_CtL-qDdOXdj00GROrYKbHe7QTjRxoYvEKJZVmQ,1229
 explorer/migrations/0006_auto_20230207_0103.py,sha256=Gcq8WeCmT9dqLp7LbwWBOZwH2tq5d8bStTTU-gm5Vkg,454
 explorer/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 explorer/static/explorer/explorer.css,sha256=JWgzUaVz4ju_Oc52JLdD55KqjzMFezna3dKznhLXzF8,1390
-explorer/static/explorer/explorer.js,sha256=gZkWI-m3hg7MNA9CD1zrW509kEbhKyUZsLn2Zgwskes,8328
+explorer/static/explorer/explorer.js,sha256=tKKi19YNcqwih2dGbXj0IIqoTQOaYKmVIFN1bPOKzGI,7596
 explorer/static/explorer/query-list.js,sha256=_ztfB50E0G9tPUV11ptpsJ9FV2TOYH94o3v9VDf8J8k,1560
 explorer/templates/explorer/base.html,sha256=Tof-IvziCZnCKUTVxML8nq41FS5ALFJNp_aCt1EfGTE,3883
 explorer/templates/explorer/params.html,sha256=VeJaeQ7CbJhwinhxuXpghA58BGLe11RKYZP7-SK8vwM,510
 explorer/templates/explorer/play.html,sha256=AHVwQ15zTk-CEwcCS2lOxv8m7E9mCcFrWqED90sgbzA,3879
 explorer/templates/explorer/preview_pane.html,sha256=eTjE-UlFxEK-OrSfv76e-bnHwuO-077MBul6dgiWD7o,6855
-explorer/templates/explorer/query.html,sha256=6ibtD_IdyK5pm3KFhna-6fVLXm7xXnmB_xhW_-mJ12s,6706
+explorer/templates/explorer/query.html,sha256=WhwWQbdQ64G23_AXWxnA3r5hzg-d0L-I4vYJYOEx3b8,6739
 explorer/templates/explorer/query_confirm_delete.html,sha256=65gPiRB4yp8Xk3GybItiAA5qZIkliyXguKF7pf37Ij8,369
 explorer/templates/explorer/query_list.html,sha256=xXdfWi2mSzzGhmkgsvyIiDO8VmddivJHYupdlocYdVE,4526
 explorer/templates/explorer/querychangelog_list.html,sha256=AqPvNL3ulfCtUmCXiTWiUlAv5-_9xefzw7vjcH3d1ww,2018
 explorer/templates/explorer/querylog_list.html,sha256=qx7BFPlGs0e7MK3NVsiBMCYMw_EQoFcNms5UJOMBdvQ,1969
 explorer/templates/explorer/schema.html,sha256=0htnZVQmhJ0yKFR-ZNBkVUTu7J65M5BK-dP9NeLUtFE,1819
 explorer/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 explorer/tests/factories.py,sha256=ZAR-_nQn8k8XyjEA1rW8gfxvY8BPU0RPFSS3oZFi8Uk,435
@@ -41,13 +41,13 @@
 explorer/tests/test_tasks.py,sha256=tBNxL4niU1rZb26P9YBVDfF4OKTo8eiF8LYQK8onxzM,1985
 explorer/tests/test_utils.py,sha256=wzeTMJldshSggG3-IlK7GtW0smt1CDJT1wv-iuhYYvk,4827
 explorer/tests/test_views.py,sha256=J_gapZu2A4AEJzjuuQfT_ey0zRe0vE_MNmIkFcYwo14,19387
 explorer/tests/urls.py,sha256=0rzxCRImd1IivOGwpOtNPI5Tnt-jiKp8hTTzxx4Qf34,222
 explorer/tests/utils.py,sha256=1q4L4sHfxjXEv9LpTQWrJbV6TN_4FtExQDJt80Tdi0g,928
 explorer/tests/__pycache__/__init__.cpython-39.pyc,sha256=BRb--rUtHIHMEWmBgg4x-P3d412oiiO54xY2SQb4qOw,163
 explorer/tests/__pycache__/urls.cpython-39.pyc,sha256=Ii16ejyK-HC1mlYbruChkSVvgZVxL98RQXyVrC8y5XM,414
-django_sql_explorer_squad-0.9.2.dist-info/AUTHORS,sha256=-yOIuXJ7TC0-m-gAy0Gjc3ez1eK0a-o7u9B7WCgqB6Y,244
-django_sql_explorer_squad-0.9.2.dist-info/LICENSE,sha256=hyOjdzZR7ljYNZbISAWLjgNRz6_b3-5EQfz2hOsvg3g,1090
-django_sql_explorer_squad-0.9.2.dist-info/METADATA,sha256=CTsYnyxS_us5k5szBNEs-N9cp9ylGAn5OWxqpTbfiaM,16014
-django_sql_explorer_squad-0.9.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-django_sql_explorer_squad-0.9.2.dist-info/top_level.txt,sha256=HS5-rAbNJAJEVP0OygxhpNOCiXv092OahmzE5wX-k4s,9
-django_sql_explorer_squad-0.9.2.dist-info/RECORD,,
+django_sql_explorer_squad-0.9.3.dist-info/AUTHORS,sha256=-yOIuXJ7TC0-m-gAy0Gjc3ez1eK0a-o7u9B7WCgqB6Y,244
+django_sql_explorer_squad-0.9.3.dist-info/LICENSE,sha256=hyOjdzZR7ljYNZbISAWLjgNRz6_b3-5EQfz2hOsvg3g,1090
+django_sql_explorer_squad-0.9.3.dist-info/METADATA,sha256=inDPrc-SyjuwpFY3AQKIpanYzixfOCVQh6EdBe6HUKA,16014
+django_sql_explorer_squad-0.9.3.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+django_sql_explorer_squad-0.9.3.dist-info/top_level.txt,sha256=HS5-rAbNJAJEVP0OygxhpNOCiXv092OahmzE5wX-k4s,9
+django_sql_explorer_squad-0.9.3.dist-info/RECORD,,
```

