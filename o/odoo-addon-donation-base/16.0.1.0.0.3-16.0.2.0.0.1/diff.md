# Comparing `tmp/odoo_addon_donation_base-16.0.1.0.0.3-py3-none-any.whl.zip` & `tmp/odoo_addon_donation_base-16.0.2.0.0.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,39 +1,40 @@
-Zip file size: 53052 bytes, number of entries: 37
--rw-r--r--  2.0 unx     3524 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/README.rst
--rw-r--r--  2.0 unx      112 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/__init__.py
--rw-r--r--  2.0 unx     1072 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/__manifest__.py
--rw-r--r--  2.0 unx     2222 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/data/donation_mail_template.xml
--rw-r--r--  2.0 unx      660 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/data/donation_tax_seq.xml
--rw-r--r--  2.0 unx     4343 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/demo/donation_demo.xml
--rw-r--r--  2.0 unx    26115 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/i18n/de.po
--rw-r--r--  2.0 unx    22241 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/i18n/donation_base.pot
--rw-r--r--  2.0 unx    22939 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/i18n/es.po
--rw-r--r--  2.0 unx    24573 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/i18n/fr.po
--rw-r--r--  2.0 unx       83 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/models/__init__.py
--rw-r--r--  2.0 unx     3399 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/models/donation_tax_receipt.py
--rw-r--r--  2.0 unx     3341 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/models/product.py
--rw-r--r--  2.0 unx     1870 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/models/res_partner.py
--rw-r--r--  2.0 unx      112 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      257 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      391 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     1014 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/report/report.xml
--rw-r--r--  2.0 unx     1482 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/report/report_donationtax.xml
--rw-r--r--  2.0 unx      993 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/security/ir.model.access.csv
--rw-r--r--  2.0 unx      624 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/security/tax_receipt_security.xml
--rw-r--r--  2.0 unx     9455 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/static/description/icon.png
--rw-r--r--  2.0 unx    13200 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/static/description/index.html
--rw-r--r--  2.0 unx       40 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/tests/__init__.py
--rw-r--r--  2.0 unx     3638 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/tests/test_donation_tax_receipt.py
--rw-r--r--  2.0 unx     6391 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/views/donation_tax_receipt.xml
--rw-r--r--  2.0 unx     2232 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/views/product.xml
--rw-r--r--  2.0 unx     3177 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/views/res_partner.xml
--rw-r--r--  2.0 unx       72 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/wizard/__init__.py
--rw-r--r--  2.0 unx     4044 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/wizard/tax_receipt_annual_create.py
--rw-r--r--  2.0 unx     1544 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/wizard/tax_receipt_annual_create_view.xml
--rw-r--r--  2.0 unx     1220 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/wizard/tax_receipt_print.py
--rw-r--r--  2.0 unx     1439 b- defN 23-Mar-19 04:22 odoo/addons/donation_base/wizard/tax_receipt_print_view.xml
--rw-r--r--  2.0 unx     4071 b- defN 23-Mar-19 04:22 odoo_addon_donation_base-16.0.1.0.0.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-19 04:22 odoo_addon_donation_base-16.0.1.0.0.3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Mar-19 04:22 odoo_addon_donation_base-16.0.1.0.0.3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3877 b- defN 23-Mar-19 04:22 odoo_addon_donation_base-16.0.1.0.0.3.dist-info/RECORD
-37 files, 175864 bytes uncompressed, 46548 bytes compressed:  73.5%
+Zip file size: 53747 bytes, number of entries: 38
+-rw-r--r--  2.0 unx     3524 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/README.rst
+-rw-r--r--  2.0 unx      112 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/__init__.py
+-rw-r--r--  2.0 unx     1072 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/__manifest__.py
+-rw-r--r--  2.0 unx     2222 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/data/donation_mail_template.xml
+-rw-r--r--  2.0 unx      660 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/data/donation_tax_seq.xml
+-rw-r--r--  2.0 unx     4083 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/demo/donation_demo.xml
+-rw-r--r--  2.0 unx    26115 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/i18n/de.po
+-rw-r--r--  2.0 unx    22475 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/i18n/donation_base.pot
+-rw-r--r--  2.0 unx    22939 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/i18n/es.po
+-rw-r--r--  2.0 unx    24573 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/i18n/fr.po
+-rw-r--r--  2.0 unx      792 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/migrations/16.0.2.0.0/pre-migration.py
+-rw-r--r--  2.0 unx       83 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/models/__init__.py
+-rw-r--r--  2.0 unx     3399 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/models/donation_tax_receipt.py
+-rw-r--r--  2.0 unx     3138 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/models/product.py
+-rw-r--r--  2.0 unx     1870 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/models/res_partner.py
+-rw-r--r--  2.0 unx      112 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      257 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      391 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     1014 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/report/report.xml
+-rw-r--r--  2.0 unx     1482 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/report/report_donationtax.xml
+-rw-r--r--  2.0 unx      993 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/security/ir.model.access.csv
+-rw-r--r--  2.0 unx      624 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/security/tax_receipt_security.xml
+-rw-r--r--  2.0 unx     9455 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/static/description/icon.png
+-rw-r--r--  2.0 unx    13200 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/static/description/index.html
+-rw-r--r--  2.0 unx       40 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/tests/__init__.py
+-rw-r--r--  2.0 unx     2943 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/tests/test_donation_tax_receipt.py
+-rw-r--r--  2.0 unx     6391 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/views/donation_tax_receipt.xml
+-rw-r--r--  2.0 unx     1983 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/views/product.xml
+-rw-r--r--  2.0 unx     3177 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/views/res_partner.xml
+-rw-r--r--  2.0 unx       72 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/wizard/__init__.py
+-rw-r--r--  2.0 unx     4044 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/wizard/tax_receipt_annual_create.py
+-rw-r--r--  2.0 unx     1544 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/wizard/tax_receipt_annual_create_view.xml
+-rw-r--r--  2.0 unx     1220 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/wizard/tax_receipt_print.py
+-rw-r--r--  2.0 unx     1439 b- defN 23-Apr-20 19:20 odoo/addons/donation_base/wizard/tax_receipt_print_view.xml
+-rw-r--r--  2.0 unx     4071 b- defN 23-Apr-20 19:20 odoo_addon_donation_base-16.0.2.0.0.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-20 19:20 odoo_addon_donation_base-16.0.2.0.0.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Apr-20 19:20 odoo_addon_donation_base-16.0.2.0.0.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3997 b- defN 23-Apr-20 19:20 odoo_addon_donation_base-16.0.2.0.0.1.dist-info/RECORD
+38 files, 175603 bytes uncompressed, 47039 bytes compressed:  73.2%
```

## zipnote {}

```diff
@@ -24,14 +24,17 @@
 
 Filename: odoo/addons/donation_base/i18n/es.po
 Comment: 
 
 Filename: odoo/addons/donation_base/i18n/fr.po
 Comment: 
 
+Filename: odoo/addons/donation_base/migrations/16.0.2.0.0/pre-migration.py
+Comment: 
+
 Filename: odoo/addons/donation_base/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/donation_base/models/donation_tax_receipt.py
 Comment: 
 
 Filename: odoo/addons/donation_base/models/product.py
@@ -93,20 +96,20 @@
 
 Filename: odoo/addons/donation_base/wizard/tax_receipt_print.py
 Comment: 
 
 Filename: odoo/addons/donation_base/wizard/tax_receipt_print_view.xml
 Comment: 
 
-Filename: odoo_addon_donation_base-16.0.1.0.0.3.dist-info/METADATA
+Filename: odoo_addon_donation_base-16.0.2.0.0.1.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_donation_base-16.0.1.0.0.3.dist-info/WHEEL
+Filename: odoo_addon_donation_base-16.0.2.0.0.1.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_donation_base-16.0.1.0.0.3.dist-info/top_level.txt
+Filename: odoo_addon_donation_base-16.0.2.0.0.1.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_donation_base-16.0.1.0.0.3.dist-info/RECORD
+Filename: odoo_addon_donation_base-16.0.2.0.0.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/donation_base/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # © 2014-2021 Barroux Abbey (http://www.barroux.org)
 # © 2014-2021 Akretion France (Alexis de Lattre <alexis.delattre@akretion.com>)
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "Donation Base",
-    "version": "16.0.1.0.0",
+    "version": "16.0.2.0.0",
     "category": "Accounting",
     "license": "AGPL-3",
     "summary": "Base module for donations",
     "author": "Barroux Abbey, Akretion, Odoo Community Association (OCA)",
     "maintainers": ["alexis-via"],
     "website": "https://github.com/OCA/donation",
     "depends": ["account"],
```

## odoo/addons/donation_base/demo/donation_demo.xml

### odoo/addons/donation_base/demo/donation_demo.xml

```diff
@@ -2,56 +2,50 @@
 <odoo noupdate="1">
   <!-- PRODUCTS -->
   <record id="product_product_donation" model="product.product">
     <field name="name">Donation</field>
     <field name="default_code">DON</field>
     <field name="categ_id" ref="product.product_category_5"/>
     <field name="sale_ok" eval="True"/>
-    <field name="donation" eval="True"/>
     <field name="tax_receipt_ok" eval="True"/>
     <field name="list_price">0</field>
-    <field name="detailed_type">service</field>
+    <field name="detailed_type">donation</field>
     <field name="taxes_id" eval="False"/>
     <field name="description">This donation item is eligible for a tax receipt.</field>
   </record>
   <record id="product_product_donation_notaxreceipt" model="product.product">
     <field name="name">Donation - no tax receipt</field>
     <field name="default_code">DON-NOTAXR</field>
     <field name="categ_id" ref="product.product_category_5"/>
     <field name="sale_ok" eval="True"/>
-    <field name="donation" eval="True"/>
     <field name="tax_receipt_ok" eval="False"/>
     <field name="list_price">0</field>
-    <field name="detailed_type">service</field>
+    <field name="detailed_type">donation</field>
     <field name="taxes_id" eval="False"/>
     <field name="description">This donation item is not eligible for a tax receipt.</field>
   </record>
   <record id="product_product_inkind_donation" model="product.product">
     <field name="name">In-Kind Donation</field>
     <field name="default_code">KIND-DON</field>
     <field name="categ_id" ref="product.product_category_5"/>
     <field name="sale_ok" eval="True"/>
-    <field name="donation" eval="True"/>
     <field name="tax_receipt_ok" eval="True"/>
-    <field name="in_kind_donation" eval="True"/>
     <field name="list_price">0</field>
-    <field name="detailed_type">service</field>
+    <field name="detailed_type">donation_in_kind_consu</field>
     <field name="taxes_id" eval="False"/>
     <field name="description">This donation item is eligible for a tax receipt.</field>
   </record>
   <record id="product_product_inkind_donation_notaxreceipt" model="product.product">
     <field name="name">In-Kind Donation - no tax receipt</field>
     <field name="default_code">KIND-DON-NOTAXR</field>
     <field name="categ_id" ref="product.product_category_5"/>
     <field name="sale_ok" eval="True"/>
-    <field name="donation" eval="True"/>
     <field name="tax_receipt_ok" eval="False"/>
-    <field name="in_kind_donation" eval="True"/>
     <field name="list_price">0</field>
-    <field name="detailed_type">service</field>
+    <field name="detailed_type">donation_in_kind_consu</field>
     <field name="taxes_id" eval="False"/>
     <field name="description">This donation item is not eligible for a tax receipt.</field>
   </record>
   <!-- PARTNERS -->
   <record id="donor1" model="res.partner">
     <field name="name">Rémi Duplat</field>
     <field name="donor_rank" eval="1"/>
```

## odoo/addons/donation_base/i18n/donation_base.pot

```diff
@@ -47,14 +47,23 @@
 "    <br/><br/>\n"
 "    </p>\n"
 "    </div>\n"
 "    "
 msgstr ""
 
 #. module: donation_base
+#: model:ir.model.fields,help:donation_base.field_product_product__detailed_type
+#: model:ir.model.fields,help:donation_base.field_product_template__detailed_type
+msgid ""
+"A storable product is a product for which you manage stock. The Inventory app has to be installed.\n"
+"A consumable product is a product for which stock is not managed.\n"
+"A service is a non-material product you provide."
+msgstr ""
+
+#. module: donation_base
 #: model:ir.model.fields,field_description:donation_base.field_donation_tax_receipt__message_needaction
 msgid "Action Needed"
 msgstr ""
 
 #. module: donation_base
 #: model:ir.model.fields,field_description:donation_base.field_donation_tax_receipt__activity_ids
 msgid "Activities"
@@ -164,14 +173,15 @@
 #: model:ir.model.fields,field_description:donation_base.field_donation_tax_receipt__display_name
 #: model:ir.model.fields,field_description:donation_base.field_donation_tax_receipt_print__display_name
 #: model:ir.model.fields,field_description:donation_base.field_tax_receipt_annual_create__display_name
 msgid "Display Name"
 msgstr ""
 
 #. module: donation_base
+#: model:ir.model.fields.selection,name:donation_base.selection__product_template__detailed_type__donation
 #: model:product.template,name:donation_base.product_product_donation_product_template
 #: model_terms:ir.ui.view,arch_db:donation_base.product_template_search_view
 msgid "Donation"
 msgstr ""
 
 #. module: donation_base
 #: model:product.template,name:donation_base.product_product_donation_notaxreceipt_product_template
@@ -299,43 +309,45 @@
 #. module: donation_base
 #: model:ir.model.fields,help:donation_base.field_donation_tax_receipt__message_has_error
 #: model:ir.model.fields,help:donation_base.field_donation_tax_receipt__message_has_sms_error
 msgid "If checked, some messages have a delivery error."
 msgstr ""
 
 #. module: donation_base
-#: model:ir.model.fields,field_description:donation_base.field_product_product__in_kind_donation
-#: model:ir.model.fields,field_description:donation_base.field_product_template__in_kind_donation
 #: model:product.template,name:donation_base.product_product_inkind_donation_product_template
 msgid "In-Kind Donation"
 msgstr ""
 
 #. module: donation_base
 #: model:product.template,name:donation_base.product_product_inkind_donation_notaxreceipt_product_template
 msgid "In-Kind Donation - no tax receipt"
 msgstr ""
 
 #. module: donation_base
+#: model:ir.model.fields.selection,name:donation_base.selection__product_template__detailed_type__donation_in_kind_consu
+msgid "In-Kind Donation Consummable"
+msgstr ""
+
+#. module: donation_base
+#: model:ir.model.fields.selection,name:donation_base.selection__product_template__detailed_type__donation_in_kind_service
+msgid "In-Kind Donation Service"
+msgstr ""
+
+#. module: donation_base
 #: model:ir.model.fields,field_description:donation_base.field_product_product__tax_receipt_ok
 #: model:ir.model.fields,field_description:donation_base.field_product_template__tax_receipt_ok
 msgid "Is Eligible for a Tax Receipt"
 msgstr ""
 
 #. module: donation_base
 #: model:ir.model.fields,field_description:donation_base.field_donation_tax_receipt__message_is_follower
 msgid "Is Follower"
 msgstr ""
 
 #. module: donation_base
-#: model:ir.model.fields,field_description:donation_base.field_product_product__donation
-#: model:ir.model.fields,field_description:donation_base.field_product_template__donation
-msgid "Is a Donation"
-msgstr ""
-
-#. module: donation_base
 #: model:ir.model.fields,field_description:donation_base.field_donation_tax_receipt____last_update
 #: model:ir.model.fields,field_description:donation_base.field_donation_tax_receipt_print____last_update
 #: model:ir.model.fields,field_description:donation_base.field_tax_receipt_annual_create____last_update
 msgid "Last Modified on"
 msgstr ""
 
 #. module: donation_base
@@ -478,14 +490,20 @@
 
 #. module: donation_base
 #: model:ir.model,name:donation_base.model_product_template
 msgid "Product"
 msgstr ""
 
 #. module: donation_base
+#: model:ir.model.fields,field_description:donation_base.field_product_product__detailed_type
+#: model:ir.model.fields,field_description:donation_base.field_product_template__detailed_type
+msgid "Product Type"
+msgstr ""
+
+#. module: donation_base
 #: model:ir.model,name:donation_base.model_product_product
 msgid "Product Variant"
 msgstr ""
 
 #. module: donation_base
 #: model:ir.model.fields,field_description:donation_base.field_donation_tax_receipt__number
 msgid "Receipt Number"
@@ -557,32 +575,14 @@
 msgid ""
 "The Donor '%(partner)s' already has an annual tax receipt in this timeframe:"
 " %(receipt)s dated %(number)s."
 msgstr ""
 
 #. module: donation_base
 #. odoo-python
-#: code:addons/donation_base/models/product.py:0
-#, python-format
-msgid ""
-"The option 'In-Kind Donation' is active on the product '%s', so you must "
-"also activate the option 'Is a Donation'."
-msgstr ""
-
-#. module: donation_base
-#. odoo-python
-#: code:addons/donation_base/models/product.py:0
-#, python-format
-msgid ""
-"The option 'Is Eligible for a Tax Receipt' is active on the product '%s', so"
-" you must also activate the option 'Is a Donation'."
-msgstr ""
-
-#. module: donation_base
-#. odoo-python
 #: code:addons/donation_base/wizard/tax_receipt_print.py:0
 #, python-format
 msgid "There are no tax receipts to print."
 msgstr ""
 
 #. module: donation_base
 #. odoo-python
```

## odoo/addons/donation_base/models/product.py

```diff
@@ -6,77 +6,84 @@
 from odoo import _, api, fields, models
 from odoo.exceptions import ValidationError
 
 
 class ProductTemplate(models.Model):
     _inherit = "product.template"
 
-    donation = fields.Boolean(string="Is a Donation", tracking=True)
-    in_kind_donation = fields.Boolean(string="In-Kind Donation", tracking=True)
+    detailed_type = fields.Selection(
+        selection_add=[
+            ("donation", "Donation"),
+            ("donation_in_kind_consu", "In-Kind Donation Consummable"),
+            ("donation_in_kind_service", "In-Kind Donation Service"),
+        ],
+        ondelete={
+            "donation": "set service",
+            "donation_in_kind_consu": "set consu",
+            "donation_in_kind_service": "set service",
+        },
+    )
     tax_receipt_ok = fields.Boolean(
         string="Is Eligible for a Tax Receipt",
         tracking=True,
+        compute="_compute_tax_receipt_ok",
+        readonly=False,
+        store=True,
+        precompute=True,
         help="Specify if the product is eligible for a tax receipt",
     )
 
-    @api.onchange("donation")
+    @api.depends("detailed_type")
+    def _compute_tax_receipt_ok(self):
+        for product in self:
+            if product.detailed_type and not product.detailed_type.startswith(
+                "donation"
+            ):
+                product.tax_receipt_ok = False
+
+    def _detailed_type_mapping(self):
+        res = super()._detailed_type_mapping()
+        res.update(
+            {
+                "donation": "service",
+                "donation_in_kind_consu": "consu",
+                "donation_in_kind_service": "service",
+            }
+        )
+        return res
+
+    @api.onchange("detailed_type")
     def _donation_change(self):
         for product in self:
-            if product.donation and not product.in_kind_donation:
-                product.detailed_type = "service"
+            if product.detailed_type == "donation":
                 product.taxes_id = False
                 product.supplier_taxes_id = False
                 product.purchase_ok = False
-            if not product.donation:
-                product.tax_receipt_ok = False
-                product.in_kind_donation = False
 
-    @api.constrains("donation", "type")
+    @api.constrains("detailed_type", "taxes_id")
     def donation_check(self):
         for product in self:
-            if product.in_kind_donation and not product.donation:
-                raise ValidationError(
-                    _(
-                        "The option 'In-Kind Donation' is active on "
-                        "the product '%s', so you must also activate the "
-                        "option 'Is a Donation'."
-                    )
-                    % product.display_name
-                )
-            if product.tax_receipt_ok and not product.donation:
-                raise ValidationError(
-                    _(
-                        "The option 'Is Eligible for a Tax Receipt' is "
-                        "active on the product '%s', so you must also activate "
-                        "the option 'Is a Donation'."
-                    )
-                    % product.display_name
-                )
             # The check below is to make sure that we don't forget to remove
             # the default sale VAT tax on the donation product, particularly
             # for users of donation_sale. If there are countries that have
             # sale tax on donations (!), please tell us and we can remove this
             # constraint
-            if product.donation and product.taxes_id:
+            if product.detailed_type == "donation" and product.taxes_id:
                 raise ValidationError(
                     _(
                         "There shouldn't have any Customer Taxes on the "
                         "donation product '%s'."
                     )
                     % product.display_name
                 )
 
 
 class ProductProduct(models.Model):
     _inherit = "product.product"
 
-    @api.onchange("donation")
+    @api.onchange("detailed_type")
     def _donation_change(self):
         for product in self:
-            if product.donation and not product.in_kind_donation:
-                product.detailed_type = "service"
+            if product.detailed_type == "donation":
                 product.taxes_id = False
                 product.supplier_taxes_id = False
                 product.purchase_ok = False
-            if not product.donation:
-                product.tax_receipt_ok = False
-                product.in_kind_donation = False
```

## odoo/addons/donation_base/tests/test_donation_tax_receipt.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2018-Today Serpent Consulting Services Pvt. Ltd.
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 import time
 
 from odoo import fields
-from odoo.exceptions import UserError, ValidationError
+from odoo.exceptions import UserError
 from odoo.tests.common import TransactionCase
 
 
 class TestDonationTaxReceipt(TransactionCase):
     def setUp(self):
         super().setUp()
         self.dt_receipt = self.env["donation.tax.receipt"]
@@ -32,31 +32,16 @@
         self.assertTrue(self.partner.tax_receipt_count)
 
         self.dt_receipt_rec.action_send_tax_receipt()
         self.partner.email = False
         with self.assertRaises(UserError):
             self.dt_receipt_rec.action_send_tax_receipt()
 
-    def test_donation_change(self):
-        self.product_id._donation_change()
+    def test_donation_type(self):
         self.assertEqual(self.product_id.type, "service")
-        self.assertTrue(self.product_id.donation)
-
-        self.product_id.product_tmpl_id._donation_change()
-        self.assertEqual(self.product_id.product_tmpl_id.type, "service")
-        self.assertTrue(self.product_id.product_tmpl_id.donation)
-
-    def test_donation_check_donation(self):
-        with self.assertRaises(ValidationError):
-            self.product_id.product_tmpl_id.donation = False
-
-    def test_donation_check_kind_donation(self):
-        with self.assertRaises(ValidationError):
-            self.product_id.product_tmpl_id.in_kind_donation = True
-            self.product_id.product_tmpl_id.donation = False
 
 
 class TestTaxReceiptAnnualCreate(TransactionCase):
     def setUp(self):
         super().setUp()
         self.dt_receipt = self.env["donation.tax.receipt"]
         self.tax_receipt_print = self.env["donation.tax.receipt.print"]
```

## odoo/addons/donation_base/views/product.xml

### odoo/addons/donation_base/views/product.xml

```diff
@@ -7,35 +7,27 @@
 -->
 <odoo>
   <record id="product_template_search_view" model="ir.ui.view">
     <field name="name">donation.product.template.search</field>
     <field name="model">product.template</field>
     <field name="inherit_id" ref="product.product_template_search_view"/>
     <field name="arch" type="xml">
+      <filter name="consumable" position="after">
+        <filter name="filter_donation" string="Donation" domain="[('detailed_type', 'in', ('donation', 'donation_in_kind_consu', 'donation_in_kind_service'))]"/>
+      </filter>
       <filter name="filter_to_purchase" position="after">
-        <filter name="filter_donation" string="Donation" domain="[('donation', '=', True)]"/>
         <filter name="filter_tax_receipt_ok" string="Eligible for a Tax Receipt" domain="[('tax_receipt_ok', '=', True)]"/>
       </filter>
     </field>
   </record>
   <record id="product_template_form_view" model="ir.ui.view">
     <field name="name">donation.product.template.form</field>
     <field name="model">product.template</field>
     <field name="inherit_id" ref="product.product_template_form_view"/>
     <field name="arch" type="xml">
-      <div name="options" position="inside">
-        <div name="donation">
-          <field name="donation"/>
-          <label for="donation"/>
-        </div>
-        <div name="tax_receipt" attrs="{'invisible': [('donation', '=', False)]}">
-          <field name="tax_receipt_ok"/>
-          <label for="tax_receipt_ok"/>
-        </div>
-        <div name="in_kind_donation" attrs="{'invisible': [('donation', '=', False)]}">
-          <field name="in_kind_donation"/>
-          <label for="in_kind_donation"/>
-        </div>
-      </div>
+      <field name="detailed_type" position="after">
+        <!-- unfortunately, Odoo doesn't accept 'not like' in attrs -->
+        <field name="tax_receipt_ok" attrs="{'invisible': [('detailed_type', 'not in', ('donation', 'donation_in_kind_service', 'donation_in_kind_consu'))]}"/>
+      </field>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo_addon_donation_base-16.0.1.0.0.3.dist-info/METADATA` & `odoo_addon_donation_base-16.0.2.0.0.1.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-donation-base
-Version: 16.0.1.0.0.3
+Version: 16.0.2.0.0.1
 Summary: Base module for donations
 Home-page: https://github.com/OCA/donation
 Author: Barroux Abbey, Akretion, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo_addon_donation_base-16.0.1.0.0.3.dist-info/RECORD` & `odoo_addon_donation_base-16.0.2.0.0.1.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,37 +1,38 @@
 odoo/addons/donation_base/README.rst,sha256=oK4XHiBGzLHr8L1hoVWNMG5_1KAKd7x-Q_vUZ2mLq_8,3524
 odoo/addons/donation_base/__init__.py,sha256=DBLrdrxtfeYrPrhUSisvKFMifJ4j_uH6BnJnCcdPvMA,112
-odoo/addons/donation_base/__manifest__.py,sha256=sZ-jGDOvM9N-HP8KzxDvCNVss8nF7Fb7uv92uMX6j5s,1072
+odoo/addons/donation_base/__manifest__.py,sha256=HzMd49vpmpuMCV1IB7NUbZ0Jn0DTUOCX2wdsBJyEZ4U,1072
 odoo/addons/donation_base/data/donation_mail_template.xml,sha256=jwrZ1UFAPZhM_roCmVpiP-1ouXDjVAUmL4rz8UK07I8,2222
 odoo/addons/donation_base/data/donation_tax_seq.xml,sha256=8uP_-yvAMAL9SqQlZ_usFwEHyD2UJ7cGjhQh_HOftK4,660
-odoo/addons/donation_base/demo/donation_demo.xml,sha256=noWVBVpH1aRD38vvUMxs6Dq2gJ2cS2uV0GsBdBL_u7Y,4343
+odoo/addons/donation_base/demo/donation_demo.xml,sha256=Uc7ePZw6mSr_40gXF19A4jGttx0WE4M29xs0SewcOME,4083
 odoo/addons/donation_base/i18n/de.po,sha256=4YksJNukcN6BCBi81Z6OwS1PuBeDpTeFbZyXz9KDQ8I,26115
-odoo/addons/donation_base/i18n/donation_base.pot,sha256=tkulwZ4wnF1ZYHh497YkBnxNH8MNh2WhascGYpUFnnk,22241
+odoo/addons/donation_base/i18n/donation_base.pot,sha256=nkR86bX1zE1eO8B5KYzx1n5seu4RbVuzfSjrPxKc6-A,22475
 odoo/addons/donation_base/i18n/es.po,sha256=N4OafCCaTUZYWeh6Xe14BMrKPw_vyhlhzrCdapqWu1c,22939
 odoo/addons/donation_base/i18n/fr.po,sha256=HFak0j6QRK0G2IAS3vcF2klWkWnK6o2J215aQQbpNFw,24573
+odoo/addons/donation_base/migrations/16.0.2.0.0/pre-migration.py,sha256=WB86jV3U21JuKH5mW622-59I5BdC2Osp8SLIdb0PNQE,792
 odoo/addons/donation_base/models/__init__.py,sha256=d3zEZgrmt1H4wszl1IaMoWEeSWDEDvU93qNf8KNCZO0,83
 odoo/addons/donation_base/models/donation_tax_receipt.py,sha256=T_Zil7zcB4IKKVShBOqPFj5gK4LPd3prrrrH5_DgG8A,3399
-odoo/addons/donation_base/models/product.py,sha256=mZBwIEkpA3q4q1FvNNOjSpvvtacn65PyFbxfDc8KxS8,3341
+odoo/addons/donation_base/models/product.py,sha256=o7HU4gTEVZ4FBcvpKMaxa70gI8TjyleXz4IMFW5nFOM,3138
 odoo/addons/donation_base/models/res_partner.py,sha256=GUQiwfDwLaQBAbFjonRYY5hgFEWo7hI-wp4yDogquO0,1870
 odoo/addons/donation_base/readme/CONFIGURE.rst,sha256=ZqZCzZUe3a2-jIsqKRj6B46EMg8dZpBbeq4Vv80GJs4,112
 odoo/addons/donation_base/readme/CONTRIBUTORS.rst,sha256=JD4dELs-ZDcysxPkiIQcpHK6vZlPCliY6VQOMXXWLQE,257
 odoo/addons/donation_base/readme/DESCRIPTION.rst,sha256=Qh6TRmo8-3DGW044HdvdO_gjDE11fn27Z0kgaHsGWKw,391
 odoo/addons/donation_base/report/report.xml,sha256=4EL0-3Grpl7Iw2hxk1X2Wvxb3pkGQFiHQ-fgVN8P7mQ,1014
 odoo/addons/donation_base/report/report_donationtax.xml,sha256=1EcYACbpMybsixLIU68uQYpvAwpxIDl-pSwSEjMcLbQ,1482
 odoo/addons/donation_base/security/ir.model.access.csv,sha256=D1_M3ExMB4N4JTfidA4WdRxMwlZSkQOEh38GSud8Lq4,993
 odoo/addons/donation_base/security/tax_receipt_security.xml,sha256=gqZJHHyaXsSYOT5omQGqwFf_dqeF4K_dXqE5Ubmyn8s,624
 odoo/addons/donation_base/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/donation_base/static/description/index.html,sha256=z7W2o4lGAx6eLj4QfGoeekV1CbmpuCRYcQ5fVEKdgEQ,13200
 odoo/addons/donation_base/tests/__init__.py,sha256=e6Gv2PcP1J-6gWVa68h4Ui9fWBs_w1swzWUP5Eflfl4,40
-odoo/addons/donation_base/tests/test_donation_tax_receipt.py,sha256=MJcGSbbd4AnVBii95Adl_dcJSxdyyIy8uzX_Q98Zjxw,3638
+odoo/addons/donation_base/tests/test_donation_tax_receipt.py,sha256=zab2_QQJg4X7gftcexbpvn7SdPpa_WG3yDZazjLhdRo,2943
 odoo/addons/donation_base/views/donation_tax_receipt.xml,sha256=cDqB2o-efijjEF2p7iS8lEQ6fa8gTWDD5hOTzLkaCto,6391
-odoo/addons/donation_base/views/product.xml,sha256=Kz3Fj7E2zRLsIfMbJcHJP0V7eAVSS1tMtjYR2hOxP-0,2232
+odoo/addons/donation_base/views/product.xml,sha256=P8Mfl70yt3qMDtJv-JCZV2g32sqHzM_ZQ_iWb84LCWk,1983
 odoo/addons/donation_base/views/res_partner.xml,sha256=sFF7AGqvqp7h3rQEwx8OkEX0j_G-HcV4neu5Z5Q_X3E,3177
 odoo/addons/donation_base/wizard/__init__.py,sha256=kvxD7AlJsHlSg6dKmadqvMIkZDTAoC_aw7UuWQ856pk,72
 odoo/addons/donation_base/wizard/tax_receipt_annual_create.py,sha256=zc2LtPYsOtxu2WU94DBdmgg28xKdqYB03KWUQVxKDns,4044
 odoo/addons/donation_base/wizard/tax_receipt_annual_create_view.xml,sha256=bUOrqQuYppRmtUIT297Twn2c38dEbTFs5NxcC_b10FE,1544
 odoo/addons/donation_base/wizard/tax_receipt_print.py,sha256=7cPZWNS2aCY2PjImKtbx3CvP36i2G8NIOTqyoJ48qog,1220
 odoo/addons/donation_base/wizard/tax_receipt_print_view.xml,sha256=EgU6ErvqOeTPntW8_0TaaOXhDzmV2KeS56m3YeTOb1w,1439
-odoo_addon_donation_base-16.0.1.0.0.3.dist-info/METADATA,sha256=bF_zviyhjHb8_thR9K4k_ZxJ5LpIgtG3WPK6EnSPuVU,4071
-odoo_addon_donation_base-16.0.1.0.0.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_donation_base-16.0.1.0.0.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_donation_base-16.0.1.0.0.3.dist-info/RECORD,,
+odoo_addon_donation_base-16.0.2.0.0.1.dist-info/METADATA,sha256=JzlWTih4z9So8Wk7_-P2JXbK_FkP6PQA8pD4yfWTVBQ,4071
+odoo_addon_donation_base-16.0.2.0.0.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_donation_base-16.0.2.0.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_donation_base-16.0.2.0.0.1.dist-info/RECORD,,
```

