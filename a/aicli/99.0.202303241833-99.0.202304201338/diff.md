# Comparing `tmp/aicli-99.0.202303241833-py3-none-any.whl.zip` & `tmp/aicli-99.0.202304201338-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,28 +1,28 @@
-Zip file size: 41766 bytes, number of entries: 26
--rw-r--r--  2.0 unx    94183 b- defN 23-Mar-24 18:32 ailib/__init__.py
--rw-r--r--  2.0 unx    72323 b- defN 23-Mar-24 18:32 ailib/cli.py
--rw-r--r--  2.0 unx      501 b- defN 23-Mar-24 18:32 ailib/agent/cluster-deployment-sno.yaml
--rw-r--r--  2.0 unx      501 b- defN 23-Mar-24 18:32 ailib/agent/cluster-deployment.yaml
--rw-r--r--  2.0 unx      123 b- defN 23-Mar-24 18:32 ailib/agent/cluster-image-set.yaml
--rw-r--r--  2.0 unx      369 b- defN 23-Mar-24 18:32 ailib/agent/infraenv.yaml
--rw-r--r--  2.0 unx      168 b- defN 23-Mar-24 18:32 ailib/agent/pull-secret.yaml
--rw-r--r--  2.0 unx      125 b- defN 23-Mar-24 18:32 ailib/agent/registries.conf.templ
--rw-r--r--  2.0 unx    11627 b- defN 23-Mar-24 18:32 ailib/common/__init__.py
--rw-r--r--  2.0 unx      748 b- defN 23-Mar-24 18:32 ailib/common/registries.conf.templ
--rw-r--r--  2.0 unx       58 b- defN 23-Mar-24 18:32 ailib/common/relocate/00-relocate-namespace.yaml
--rw-r--r--  2.0 unx      847 b- defN 23-Mar-24 18:32 ailib/common/relocate/10-relocate-ip.yaml
--rw-r--r--  2.0 unx       85 b- defN 23-Mar-24 18:32 ailib/common/relocate/97-relocate-sa.yaml
--rw-r--r--  2.0 unx      254 b- defN 23-Mar-24 18:32 ailib/common/relocate/98-relocate-binding.yaml
--rw-r--r--  2.0 unx      200 b- defN 23-Mar-24 18:32 ailib/common/relocate/99-ovn.yaml
--rw-r--r--  2.0 unx     1083 b- defN 23-Mar-24 18:32 ailib/common/relocate/99-relocate-job.yaml
--rw-r--r--  2.0 unx      752 b- defN 23-Mar-24 18:32 ailib/common/relocate/hack.ign
--rw-r--r--  2.0 unx      196 b- defN 23-Mar-24 18:32 ailib/common/relocate/hack.sh
--rw-r--r--  2.0 unx      169 b- defN 23-Mar-24 18:32 ailib/common/relocate/hack_sno.sh
--rw-r--r--  2.0 unx      728 b- defN 23-Mar-24 18:32 ailib/common/relocate/relocate-ip.sh
--rw-r--r--  2.0 unx     8477 b- defN 23-Mar-24 18:32 ailib/kfish/__init__.py
--rw-r--r--  2.0 unx      352 b- defN 23-Mar-24 18:33 aicli-99.0.202303241833.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-24 18:33 aicli-99.0.202303241833.dist-info/WHEEL
--rw-r--r--  2.0 unx       40 b- defN 23-Mar-24 18:33 aicli-99.0.202303241833.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        6 b- defN 23-Mar-24 18:33 aicli-99.0.202303241833.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2306 b- defN 23-Mar-24 18:33 aicli-99.0.202303241833.dist-info/RECORD
-26 files, 196313 bytes uncompressed, 37966 bytes compressed:  80.7%
+Zip file size: 42510 bytes, number of entries: 26
+-rw-r--r--  2.0 unx    95361 b- defN 23-Apr-20 13:37 ailib/__init__.py
+-rw-r--r--  2.0 unx    74399 b- defN 23-Apr-20 13:37 ailib/cli.py
+-rw-r--r--  2.0 unx      501 b- defN 23-Apr-20 13:37 ailib/agent/cluster-deployment-sno.yaml
+-rw-r--r--  2.0 unx      501 b- defN 23-Apr-20 13:37 ailib/agent/cluster-deployment.yaml
+-rw-r--r--  2.0 unx      123 b- defN 23-Apr-20 13:37 ailib/agent/cluster-image-set.yaml
+-rw-r--r--  2.0 unx      369 b- defN 23-Apr-20 13:37 ailib/agent/infraenv.yaml
+-rw-r--r--  2.0 unx      168 b- defN 23-Apr-20 13:37 ailib/agent/pull-secret.yaml
+-rw-r--r--  2.0 unx      125 b- defN 23-Apr-20 13:37 ailib/agent/registries.conf.templ
+-rw-r--r--  2.0 unx    11627 b- defN 23-Apr-20 13:37 ailib/common/__init__.py
+-rw-r--r--  2.0 unx      748 b- defN 23-Apr-20 13:37 ailib/common/registries.conf.templ
+-rw-r--r--  2.0 unx       58 b- defN 23-Apr-20 13:37 ailib/common/relocate/00-relocate-namespace.yaml
+-rw-r--r--  2.0 unx      847 b- defN 23-Apr-20 13:37 ailib/common/relocate/10-relocate-ip.yaml
+-rw-r--r--  2.0 unx       85 b- defN 23-Apr-20 13:37 ailib/common/relocate/97-relocate-sa.yaml
+-rw-r--r--  2.0 unx      254 b- defN 23-Apr-20 13:37 ailib/common/relocate/98-relocate-binding.yaml
+-rw-r--r--  2.0 unx      200 b- defN 23-Apr-20 13:37 ailib/common/relocate/99-ovn.yaml
+-rw-r--r--  2.0 unx     1083 b- defN 23-Apr-20 13:37 ailib/common/relocate/99-relocate-job.yaml
+-rw-r--r--  2.0 unx      752 b- defN 23-Apr-20 13:37 ailib/common/relocate/hack.ign
+-rw-r--r--  2.0 unx      196 b- defN 23-Apr-20 13:37 ailib/common/relocate/hack.sh
+-rw-r--r--  2.0 unx      169 b- defN 23-Apr-20 13:37 ailib/common/relocate/hack_sno.sh
+-rw-r--r--  2.0 unx      728 b- defN 23-Apr-20 13:37 ailib/common/relocate/relocate-ip.sh
+-rw-r--r--  2.0 unx     8477 b- defN 23-Apr-20 13:37 ailib/kfish/__init__.py
+-rw-r--r--  2.0 unx      352 b- defN 23-Apr-20 13:38 aicli-99.0.202304201338.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-20 13:38 aicli-99.0.202304201338.dist-info/WHEEL
+-rw-r--r--  2.0 unx       40 b- defN 23-Apr-20 13:38 aicli-99.0.202304201338.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        6 b- defN 23-Apr-20 13:38 aicli-99.0.202304201338.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2306 b- defN 23-Apr-20 13:38 aicli-99.0.202304201338.dist-info/RECORD
+26 files, 199567 bytes uncompressed, 38710 bytes compressed:  80.6%
```

## zipnote {}

```diff
@@ -57,23 +57,23 @@
 
 Filename: ailib/common/relocate/relocate-ip.sh
 Comment: 
 
 Filename: ailib/kfish/__init__.py
 Comment: 
 
-Filename: aicli-99.0.202303241833.dist-info/METADATA
+Filename: aicli-99.0.202304201338.dist-info/METADATA
 Comment: 
 
-Filename: aicli-99.0.202303241833.dist-info/WHEEL
+Filename: aicli-99.0.202304201338.dist-info/WHEEL
 Comment: 
 
-Filename: aicli-99.0.202303241833.dist-info/entry_points.txt
+Filename: aicli-99.0.202304201338.dist-info/entry_points.txt
 Comment: 
 
-Filename: aicli-99.0.202303241833.dist-info/top_level.txt
+Filename: aicli-99.0.202304201338.dist-info/top_level.txt
 Comment: 
 
-Filename: aicli-99.0.202303241833.dist-info/RECORD
+Filename: aicli-99.0.202304201338.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ailib/__init__.py

```diff
@@ -1758,7 +1758,25 @@
                     if 'wwn' in entry:
                         new_host['rootDeviceHints'] = {'wwn': entry['wwn']}
                     custom_hosts.append(new_host)
                 with open(f"{path}/agent-config.yaml", 'w') as dest:
                     hosts_data = {'kind': 'AgentConfig'}
                     hosts_data['spec'] = {'hosts': custom_hosts}
                     dest.write(yaml.safe_dump(hosts_data))
+
+    def create_fake_host(self, name, cluster, secret_key, overrides={}):
+        infra_env_id = self.get_infra_env_id(cluster)
+        agent_version = 'registry.redhat.io/rhai-tech-preview/assisted-installer-agent-rhel8:v1.0.0-248'
+        host_id = str(uuid1())
+        info(f"Using uuid {host_id}")
+        new_host_params = {"host_id": host_id, "discovery_agent_version": agent_version}
+        new_host_params = models.HostCreateParams(**new_host_params)
+        self.client.api_client.default_headers['X-Secret-Key'] = secret_key
+        self.client.v2_register_host(infra_env_id=infra_env_id, new_host_params=new_host_params)
+        # instructions = self.client.v2_get_next_steps(infra_env_id, host_id).to_dict()['instructions'][0]
+        # step_id = instructions['step_id']
+        # output = '{"hostname": "%s"}' % name
+        # step_type = models.StepType()
+        # step_type.discriminator = 'inventory'
+        # reply = models.StepReply({'step_id': step_id, 'output': output, 'step_type': step_type})
+        # extra_args = {"discovery_agent_version": agent_version, 'reply': reply}
+        # self.client.v2_post_step_reply(infra_env_id, host_id, **extra_args)
```

## ailib/cli.py

```diff
@@ -1,13 +1,14 @@
 import argparse
 from argparse import RawDescriptionHelpFormatter as rawhelp
 from ailib.common import get_overrides, info, error, warning, confirm, container_mode
 import json
 from prettytable import PrettyTable
 import os
+import re
 import sys
 import yaml
 from time import sleep
 from ailib import AssistedClient
 from ailib import boot_hosts as ai_boot_hosts
 from ailib.common import create_onprem as ai_create_onprem
 from ailib.common import delete_onprem as ai_delete_onprem
@@ -353,14 +354,37 @@
 def stop_hosts(args):
     ai = AssistedClient(args.url, token=args.token, offlinetoken=args.offlinetoken, debug=args.debug,
                         ca=args.ca, cert=args.cert, key=args.key)
     hostnames = args.hostnames
     ai.stop_hosts(hostnames=hostnames)
 
 
+def create_fake_hosts(args):
+    ai = AssistedClient(args.url, token=args.token, offlinetoken=args.offlinetoken, debug=args.debug,
+                        ca=args.ca, cert=args.cert, key=args.key)
+    overrides = handle_parameters(args.param, args.paramfile)
+    if 'pull_secret' not in overrides:
+        warning("Using openshift_pull.json as pull_secret file")
+        overrides['pull_secret'] = "openshift_pull.json"
+    pull_secret = os.path.expanduser(overrides['pull_secret'])
+    if os.path.exists(pull_secret):
+        pull_secret = re.sub(r"\s", "", open(pull_secret).read())
+    elif '{' not in pull_secret:
+        error(f"Couldn't parse pull secret file {pull_secret}")
+        sys.exit(1)
+    pull_secret_data = json.loads(pull_secret)
+    secret_key = pull_secret_data['auths']['cloud.openshift.com']['auth']
+    count = args.count
+    cluster = args.cluster
+    for num in range(0, count):
+        hostname = f"{cluster}-node-{num}"
+        info(f"Creating fake host {hostname}")
+        ai.create_fake_host(hostname, cluster, secret_key)
+
+
 def create_infra_env(args):
     info(f"Creating infraenv {args.infraenv}")
     overrides = handle_parameters(args.param, args.paramfile)
     ai = AssistedClient(args.url, token=args.token, offlinetoken=args.offlinetoken, debug=args.debug,
                         ca=args.ca, cert=args.cert, key=args.key)
     ai.create_infra_env(args.infraenv, overrides)
 
@@ -832,14 +856,27 @@
     deploymentcreate_parser.add_argument('-f', '--force', action='store_true', help='Delete existing cluster if needed')
     deploymentcreate_parser.add_argument('-P', '--param', action='append', help=PARAMHELP, metavar='PARAM')
     deploymentcreate_parser.add_argument('--paramfile', '--pf', help='Parameters file', metavar='PARAMFILE',
                                          action='append')
     deploymentcreate_parser.add_argument('cluster', metavar='CLUSTER')
     deploymentcreate_parser.set_defaults(func=create_deployment)
 
+    fakehostscreate_desc = 'Create Fake Hosts'
+    fakehostscreate_epilog = None
+    fakehostscreate_parser = create_subparsers.add_parser('fakehost', description=fakehostscreate_desc,
+                                                          help=fakehostscreate_desc,
+                                                          epilog=fakehostscreate_epilog, formatter_class=rawhelp,
+                                                          aliases=['fakehosts', 'fake-host', 'fake-hosts'])
+    fakehostscreate_parser.add_argument('-c', '--count', help='How many hosts to create', type=int, default=1)
+    fakehostscreate_parser.add_argument('-P', '--param', action='append', help=PARAMHELP, metavar='PARAM')
+    fakehostscreate_parser.add_argument('--paramfile', '--pf', help='Parameters file', metavar='PARAMFILE',
+                                        action='append')
+    fakehostscreate_parser.add_argument('cluster', metavar='CLUSTER')
+    fakehostscreate_parser.set_defaults(func=create_fake_hosts)
+
     infraenvcreate_desc = 'Create Infraenv'
     infraenvcreate_epilog = None
     infraenvcreate_parser = create_subparsers.add_parser('infraenv', description=infraenvcreate_desc,
                                                          help=infraenvcreate_desc,
                                                          epilog=infraenvcreate_epilog, formatter_class=rawhelp)
     infraenvcreate_parser.add_argument('-P', '--param', action='append', help=PARAMHELP, metavar='PARAM')
     infraenvcreate_parser.add_argument('--paramfile', '--pf', help='Parameters file', metavar='PARAMFILE',
```

## Comparing `aicli-99.0.202303241833.dist-info/RECORD` & `aicli-99.0.202304201338.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,9 +1,9 @@
-ailib/__init__.py,sha256=S1gpWOcy-605dN9JHoAADdCdEfA8grH5WJ3RTsSzlsg,94183
-ailib/cli.py,sha256=PfwH5Ekr2lYxy-uWlW0mMOqE8ec3BilEjEDGPlYWNAU,72323
+ailib/__init__.py,sha256=rlqZp8-vFuWsbTLCy1vR4MuXGwvGEQrZzd_6eVSE49Q,95361
+ailib/cli.py,sha256=B4zp94S7Hl-Y-0Jm2lvegAlUtKSaSvORLNKUTmdyQPc,74399
 ailib/agent/cluster-deployment-sno.yaml,sha256=6NnAqpG7MBXg8uET1l5MW9AqxRfAM-kLPxRmj1TP7Hs,501
 ailib/agent/cluster-deployment.yaml,sha256=6NnAqpG7MBXg8uET1l5MW9AqxRfAM-kLPxRmj1TP7Hs,501
 ailib/agent/cluster-image-set.yaml,sha256=mgdW0mxChZW-T2QXF240ytri9xTZJP9A8YUiv0gQPzs,123
 ailib/agent/infraenv.yaml,sha256=b-K3w1SV-DeYizIq6ukD4OAjJPgNaffcbmpUwcodbbc,369
 ailib/agent/pull-secret.yaml,sha256=FacV1lU-kR7v1e6O2LpD9lvh0Jgtg8uAtiWCTi5vCCE,168
 ailib/agent/registries.conf.templ,sha256=iGX-B_zyNsieHV8fiHQLv7je5piHhLmLVejkaRtQWd8,125
 ailib/common/__init__.py,sha256=vQk4Ghy6D7su0bIWdWpkGxKSa1OiwR21gbF0RWeovyk,11627
@@ -15,12 +15,12 @@
 ailib/common/relocate/99-ovn.yaml,sha256=x5ActE4VnDw0s2YZr2RV9bRijttztaiHktkSm9neQII,200
 ailib/common/relocate/99-relocate-job.yaml,sha256=SsufiIEoeNJzZ8bGZtlYI14_V08_xnuHCt6ufeKRxfE,1083
 ailib/common/relocate/hack.ign,sha256=LvCDvzZyC5Apzik-OmJZMBG4MlkBsCm91OMt7NBwJtI,752
 ailib/common/relocate/hack.sh,sha256=X-FqHruR9IzlaUVtJc_NQnOyyG_zp45iUcb0pTRsgE0,196
 ailib/common/relocate/hack_sno.sh,sha256=gLVNgk0A7gu-MJnO2qV-ZeIKxSUYPm_Wtxix5EDqAkc,169
 ailib/common/relocate/relocate-ip.sh,sha256=hD-z8wDk-ZDIcmxo384pGXqxmEkPXT5icM7A_h1in0Q,728
 ailib/kfish/__init__.py,sha256=KvidkIvHSzTFsJbYOiiFmhemj2ten4p-Oeq5ii0nmLY,8477
-aicli-99.0.202303241833.dist-info/METADATA,sha256=1t1TqsZMUX2WFDCFfagF5ZpxnO1D0M2Ne7rrMfHPqNY,352
-aicli-99.0.202303241833.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-aicli-99.0.202303241833.dist-info/entry_points.txt,sha256=7uqZ_1svrJHY6WVurmsOhlEb_FiRFEgdEnKj_7BuT0Q,40
-aicli-99.0.202303241833.dist-info/top_level.txt,sha256=uCyBeu-We3_G6jzv4SY05Rg3VHcZ2_Dr7dcFduB8Wsw,6
-aicli-99.0.202303241833.dist-info/RECORD,,
+aicli-99.0.202304201338.dist-info/METADATA,sha256=xpyqDo97J-XX9R_MiHVDOUoG8aNuz8Dz-QD4NzS3BUY,352
+aicli-99.0.202304201338.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+aicli-99.0.202304201338.dist-info/entry_points.txt,sha256=7uqZ_1svrJHY6WVurmsOhlEb_FiRFEgdEnKj_7BuT0Q,40
+aicli-99.0.202304201338.dist-info/top_level.txt,sha256=uCyBeu-We3_G6jzv4SY05Rg3VHcZ2_Dr7dcFduB8Wsw,6
+aicli-99.0.202304201338.dist-info/RECORD,,
```

