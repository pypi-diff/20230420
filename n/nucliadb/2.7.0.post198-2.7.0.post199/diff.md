# Comparing `tmp/nucliadb-2.7.0.post198-py3-none-any.whl.zip` & `tmp/nucliadb-2.7.0.post199-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,284 +1,296 @@
-Zip file size: 490600 bytes, number of entries: 282
--rw-r--r--  2.0 unx      891 b- defN 23-Apr-20 11:04 nucliadb/__init__.py
--rw-r--r--  2.0 unx     1027 b- defN 23-Apr-20 11:04 nucliadb/app.py
--rw-r--r--  2.0 unx     4556 b- defN 23-Apr-20 11:04 nucliadb/config.py
--rw-r--r--  2.0 unx     2785 b- defN 23-Apr-20 11:04 nucliadb/logging.py
--rw-r--r--  2.0 unx     1393 b- defN 23-Apr-20 11:04 nucliadb/purge.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-20 11:04 nucliadb/py.typed
--rw-r--r--  2.0 unx     3268 b- defN 23-Apr-20 11:04 nucliadb/run.py
--rw-r--r--  2.0 unx     1945 b- defN 23-Apr-20 11:04 nucliadb/settings.py
--rw-r--r--  2.0 unx     1011 b- defN 23-Apr-20 11:04 nucliadb/ingest/__init__.py
--rw-r--r--  2.0 unx     6354 b- defN 23-Apr-20 11:04 nucliadb/ingest/app.py
--rw-r--r--  2.0 unx      995 b- defN 23-Apr-20 11:04 nucliadb/ingest/cache.py
--rw-r--r--  2.0 unx     6975 b- defN 23-Apr-20 11:04 nucliadb/ingest/chitchat.py
--rw-r--r--  2.0 unx     2425 b- defN 23-Apr-20 11:04 nucliadb/ingest/partitions.py
--rw-r--r--  2.0 unx    14757 b- defN 23-Apr-20 11:04 nucliadb/ingest/processing.py
--rw-r--r--  2.0 unx     5463 b- defN 23-Apr-20 11:04 nucliadb/ingest/purge.py
--rw-r--r--  2.0 unx    17721 b- defN 23-Apr-20 11:04 nucliadb/ingest/serialize.py
--rw-r--r--  2.0 unx     2961 b- defN 23-Apr-20 11:04 nucliadb/ingest/settings.py
--rw-r--r--  2.0 unx     2531 b- defN 23-Apr-20 11:04 nucliadb/ingest/txn_utils.py
--rw-r--r--  2.0 unx     4286 b- defN 23-Apr-20 11:04 nucliadb/ingest/utils.py
--rw-r--r--  2.0 unx     1087 b- defN 23-Apr-20 11:04 nucliadb/ingest/consumer/__init__.py
--rw-r--r--  2.0 unx    17915 b- defN 23-Apr-20 11:04 nucliadb/ingest/consumer/pull.py
--rw-r--r--  2.0 unx     6425 b- defN 23-Apr-20 11:04 nucliadb/ingest/consumer/service.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/__init__.py
--rw-r--r--  2.0 unx    20415 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/base.py
--rw-r--r--  2.0 unx     6823 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/conversation.py
--rw-r--r--  2.0 unx     1223 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/date.py
--rw-r--r--  2.0 unx     1205 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/exceptions.py
--rw-r--r--  2.0 unx     5159 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/file.py
--rw-r--r--  2.0 unx     1523 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/generic.py
--rw-r--r--  2.0 unx     1235 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/keywordset.py
--rw-r--r--  2.0 unx     2250 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/layout.py
--rw-r--r--  2.0 unx     4084 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/link.py
--rw-r--r--  2.0 unx     1319 b- defN 23-Apr-20 11:04 nucliadb/ingest/fields/text.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/ingest/maindb/__init__.py
--rw-r--r--  2.0 unx     3088 b- defN 23-Apr-20 11:04 nucliadb/ingest/maindb/driver.py
--rw-r--r--  2.0 unx      877 b- defN 23-Apr-20 11:04 nucliadb/ingest/maindb/exceptions.py
--rw-r--r--  2.0 unx      980 b- defN 23-Apr-20 11:04 nucliadb/ingest/maindb/keys.py
--rw-r--r--  2.0 unx     7607 b- defN 23-Apr-20 11:04 nucliadb/ingest/maindb/local.py
--rw-r--r--  2.0 unx     6115 b- defN 23-Apr-20 11:04 nucliadb/ingest/maindb/pg.py
--rw-r--r--  2.0 unx     6807 b- defN 23-Apr-20 11:04 nucliadb/ingest/maindb/redis.py
--rw-r--r--  2.0 unx     7020 b- defN 23-Apr-20 11:04 nucliadb/ingest/maindb/tikv.py
--rw-r--r--  2.0 unx     3628 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/__init__.py
--rw-r--r--  2.0 unx     7163 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/abc.py
--rw-r--r--  2.0 unx    20650 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/brain.py
--rw-r--r--  2.0 unx    15408 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/entities.py
--rw-r--r--  2.0 unx     1448 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/exceptions.py
--rw-r--r--  2.0 unx    12586 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/grpc_node_binding.py
--rw-r--r--  2.0 unx     5009 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/grpc_node_dummy.py
--rw-r--r--  2.0 unx    21289 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/knowledgebox.py
--rw-r--r--  2.0 unx     1730 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/labels.py
--rw-r--r--  2.0 unx     4291 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/local_node.py
--rw-r--r--  2.0 unx     2890 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/local_shard.py
--rw-r--r--  2.0 unx    19962 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/node.py
--rw-r--r--  2.0 unx     4312 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/nodes_manager.py
--rw-r--r--  2.0 unx    27745 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/processor.py
--rw-r--r--  2.0 unx    49701 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/resource.py
--rw-r--r--  2.0 unx     5305 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/shard.py
--rw-r--r--  2.0 unx     1739 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/synonyms.py
--rw-r--r--  2.0 unx     3340 b- defN 23-Apr-20 11:04 nucliadb/ingest/orm/utils.py
--rw-r--r--  2.0 unx     2817 b- defN 23-Apr-20 11:04 nucliadb/ingest/service/__init__.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/ingest/service/exceptions.py
--rw-r--r--  2.0 unx    36295 b- defN 23-Apr-20 11:04 nucliadb/ingest/service/writer.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/__init__.py
--rw-r--r--  2.0 unx     1096 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/conftest.py
--rw-r--r--  2.0 unx    25082 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/fixtures.py
--rw-r--r--  2.0 unx     7549 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/tikv.py
--rw-r--r--  2.0 unx    62843 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/vectors.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/integration/__init__.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/integration/ingest/__init__.py
--rw-r--r--  2.0 unx    27277 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/integration/ingest/test_ingest.py
--rw-r--r--  2.0 unx     2339 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/integration/ingest/test_processing_engine.py
--rw-r--r--  2.0 unx     8606 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/integration/ingest/test_relations.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/__init__.py
--rw-r--r--  2.0 unx     1179 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/test_cache.py
--rw-r--r--  2.0 unx     1844 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/test_chitchat.py
--rw-r--r--  2.0 unx     1432 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/test_partitions.py
--rw-r--r--  2.0 unx     2252 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/test_processing.py
--rw-r--r--  2.0 unx     3414 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/test_purge.py
--rw-r--r--  2.0 unx      978 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/test_settings.py
--rw-r--r--  2.0 unx     1403 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/test_txn_utils.py
--rw-r--r--  2.0 unx     2834 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/test_utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/orm/__init__.py
--rw-r--r--  2.0 unx     8991 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/orm/test_brain.py
--rw-r--r--  2.0 unx     2818 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/orm/test_cluster.py
--rw-r--r--  2.0 unx     7334 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/orm/test_node.py
--rw-r--r--  2.0 unx     2812 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/orm/test_processor.py
--rw-r--r--  2.0 unx     1470 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/orm/test_resource.py
--rw-r--r--  2.0 unx     1697 b- defN 23-Apr-20 11:04 nucliadb/ingest/tests/unit/orm/test_shard.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/models/__init__.py
--rw-r--r--  2.0 unx     1587 b- defN 23-Apr-20 11:04 nucliadb/models/responses.py
--rw-r--r--  2.0 unx      914 b- defN 23-Apr-20 11:04 nucliadb/one/__init__.py
--rw-r--r--  2.0 unx     3539 b- defN 23-Apr-20 11:04 nucliadb/one/app.py
--rw-r--r--  2.0 unx     2130 b- defN 23-Apr-20 11:04 nucliadb/one/lifecycle.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/one/tests/__init__.py
--rw-r--r--  2.0 unx     1164 b- defN 23-Apr-20 11:04 nucliadb/one/tests/conftest.py
--rw-r--r--  2.0 unx     3678 b- defN 23-Apr-20 11:04 nucliadb/one/tests/fixtures.py
--rw-r--r--  2.0 unx     2561 b- defN 23-Apr-20 11:04 nucliadb/one/tests/test_basic.py
--rw-r--r--  2.0 unx     2492 b- defN 23-Apr-20 11:04 nucliadb/one/tests/test_delete_field.py
--rw-r--r--  2.0 unx     6087 b- defN 23-Apr-20 11:04 nucliadb/one/tests/test_fieldmetadata.py
--rw-r--r--  2.0 unx     4594 b- defN 23-Apr-20 11:04 nucliadb/one/tests/test_services.py
--rw-r--r--  2.0 unx     4067 b- defN 23-Apr-20 11:04 nucliadb/one/tests/test_upload_download.py
--rw-r--r--  2.0 unx     1328 b- defN 23-Apr-20 11:04 nucliadb/reader/__init__.py
--rw-r--r--  2.0 unx     3356 b- defN 23-Apr-20 11:04 nucliadb/reader/app.py
--rw-r--r--  2.0 unx     1741 b- defN 23-Apr-20 11:04 nucliadb/reader/lifecycle.py
--rw-r--r--  2.0 unx     2186 b- defN 23-Apr-20 11:04 nucliadb/reader/openapi.py
--rw-r--r--  2.0 unx     1295 b- defN 23-Apr-20 11:04 nucliadb/reader/run.py
--rw-r--r--  2.0 unx      872 b- defN 23-Apr-20 11:04 nucliadb/reader/api/__init__.py
--rw-r--r--  2.0 unx     2433 b- defN 23-Apr-20 11:04 nucliadb/reader/api/models.py
--rw-r--r--  2.0 unx      995 b- defN 23-Apr-20 11:04 nucliadb/reader/api/v1/__init__.py
--rw-r--r--  2.0 unx     9790 b- defN 23-Apr-20 11:04 nucliadb/reader/api/v1/download.py
--rw-r--r--  2.0 unx     3570 b- defN 23-Apr-20 11:04 nucliadb/reader/api/v1/knowledgebox.py
--rw-r--r--  2.0 unx    10697 b- defN 23-Apr-20 11:04 nucliadb/reader/api/v1/resource.py
--rw-r--r--  2.0 unx     1011 b- defN 23-Apr-20 11:04 nucliadb/reader/api/v1/router.py
--rw-r--r--  2.0 unx    10766 b- defN 23-Apr-20 11:04 nucliadb/reader/api/v1/services.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/reader/tests/__init__.py
--rw-r--r--  2.0 unx     1101 b- defN 23-Apr-20 11:04 nucliadb/reader/tests/conftest.py
--rw-r--r--  2.0 unx     4567 b- defN 23-Apr-20 11:04 nucliadb/reader/tests/fixtures.py
--rw-r--r--  2.0 unx     2749 b- defN 23-Apr-20 11:04 nucliadb/reader/tests/test_list_resources.py
--rw-r--r--  2.0 unx     9946 b- defN 23-Apr-20 11:04 nucliadb/reader/tests/test_reader_file_download.py
--rw-r--r--  2.0 unx    11359 b- defN 23-Apr-20 11:04 nucliadb/reader/tests/test_reader_resource.py
--rw-r--r--  2.0 unx     6535 b- defN 23-Apr-20 11:04 nucliadb/reader/tests/test_reader_resource_field.py
--rw-r--r--  2.0 unx     1535 b- defN 23-Apr-20 11:04 nucliadb/search/__init__.py
--rw-r--r--  2.0 unx     4562 b- defN 23-Apr-20 11:04 nucliadb/search/app.py
--rw-r--r--  2.0 unx     1848 b- defN 23-Apr-20 11:04 nucliadb/search/chitchat.py
--rw-r--r--  2.0 unx     3087 b- defN 23-Apr-20 11:04 nucliadb/search/lifecycle.py
--rw-r--r--  2.0 unx     2206 b- defN 23-Apr-20 11:04 nucliadb/search/openapi.py
--rw-r--r--  2.0 unx    10222 b- defN 23-Apr-20 11:04 nucliadb/search/predict.py
--rw-r--r--  2.0 unx     1296 b- defN 23-Apr-20 11:04 nucliadb/search/run.py
--rw-r--r--  2.0 unx      978 b- defN 23-Apr-20 11:04 nucliadb/search/settings.py
--rw-r--r--  2.0 unx     1238 b- defN 23-Apr-20 11:04 nucliadb/search/utilities.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/search/api/__init__.py
--rw-r--r--  2.0 unx     1077 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/__init__.py
--rw-r--r--  2.0 unx     6843 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/chat.py
--rw-r--r--  2.0 unx     1831 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/feedback.py
--rw-r--r--  2.0 unx     9579 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/find.py
--rw-r--r--  2.0 unx     6938 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/knowledgebox.py
--rw-r--r--  2.0 unx     4781 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/resource.py
--rw-r--r--  2.0 unx      980 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/router.py
--rw-r--r--  2.0 unx    11487 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/search.py
--rw-r--r--  2.0 unx     4212 b- defN 23-Apr-20 11:04 nucliadb/search/api/v1/suggest.py
--rw-r--r--  2.0 unx      833 b- defN 23-Apr-20 11:04 nucliadb/search/requesters/__init__.py
--rw-r--r--  2.0 unx     5873 b- defN 23-Apr-20 11:04 nucliadb/search/requesters/utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/search/search/__init__.py
--rw-r--r--  2.0 unx    11301 b- defN 23-Apr-20 11:04 nucliadb/search/search/fetch.py
--rw-r--r--  2.0 unx    14808 b- defN 23-Apr-20 11:04 nucliadb/search/search/find_merge.py
--rw-r--r--  2.0 unx    18361 b- defN 23-Apr-20 11:04 nucliadb/search/search/merge.py
--rw-r--r--  2.0 unx      947 b- defN 23-Apr-20 11:04 nucliadb/search/search/metrics.py
--rw-r--r--  2.0 unx     9905 b- defN 23-Apr-20 11:04 nucliadb/search/search/query.py
--rw-r--r--  2.0 unx     2647 b- defN 23-Apr-20 11:04 nucliadb/search/search/shards.py
--rw-r--r--  2.0 unx     2055 b- defN 23-Apr-20 11:04 nucliadb/search/search/synonyms.py
--rw-r--r--  2.0 unx     2410 b- defN 23-Apr-20 11:04 nucliadb/search/search/utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/search/tests/__init__.py
--rw-r--r--  2.0 unx     1172 b- defN 23-Apr-20 11:04 nucliadb/search/tests/conftest.py
--rw-r--r--  2.0 unx     7781 b- defN 23-Apr-20 11:04 nucliadb/search/tests/fixtures.py
--rw-r--r--  2.0 unx    16225 b- defN 23-Apr-20 11:04 nucliadb/search/tests/node.py
--rw-r--r--  2.0 unx     2285 b- defN 23-Apr-20 11:04 nucliadb/static/favicon.ico
--rw-r--r--  2.0 unx     3833 b- defN 23-Apr-20 11:04 nucliadb/static/index.html
--rw-r--r--  2.0 unx     2639 b- defN 23-Apr-20 11:04 nucliadb/static/logo.svg
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/tests/__init__.py
--rw-r--r--  2.0 unx     1000 b- defN 23-Apr-20 11:04 nucliadb/tests/conftest.py
--rw-r--r--  2.0 unx    11528 b- defN 23-Apr-20 11:04 nucliadb/tests/fixtures.py
--rw-r--r--  2.0 unx     7370 b- defN 23-Apr-20 11:04 nucliadb/tests/test_advanced_search.py
--rw-r--r--  2.0 unx    13937 b- defN 23-Apr-20 11:04 nucliadb/tests/test_api.py
--rw-r--r--  2.0 unx     1290 b- defN 23-Apr-20 11:04 nucliadb/tests/test_chat.py
--rw-r--r--  2.0 unx     2052 b- defN 23-Apr-20 11:04 nucliadb/tests/test_counters.py
--rw-r--r--  2.0 unx    12302 b- defN 23-Apr-20 11:04 nucliadb/tests/test_entities.py
--rw-r--r--  2.0 unx    13274 b- defN 23-Apr-20 11:04 nucliadb/tests/test_entities_deprecated.py
--rw-r--r--  2.0 unx     3654 b- defN 23-Apr-20 11:04 nucliadb/tests/test_field_external_file.py
--rw-r--r--  2.0 unx     1487 b- defN 23-Apr-20 11:04 nucliadb/tests/test_field_ids.py
--rw-r--r--  2.0 unx     2950 b- defN 23-Apr-20 11:04 nucliadb/tests/test_find.py
--rw-r--r--  2.0 unx     1524 b- defN 23-Apr-20 11:04 nucliadb/tests/test_kb_slugs.py
--rw-r--r--  2.0 unx    11431 b- defN 23-Apr-20 11:04 nucliadb/tests/test_labels.py
--rw-r--r--  2.0 unx     6071 b- defN 23-Apr-20 11:04 nucliadb/tests/test_reindex.py
--rw-r--r--  2.0 unx     6586 b- defN 23-Apr-20 11:04 nucliadb/tests/test_relations.py
--rw-r--r--  2.0 unx     7072 b- defN 23-Apr-20 11:04 nucliadb/tests/test_resources.py
--rw-r--r--  2.0 unx     1220 b- defN 23-Apr-20 11:04 nucliadb/tests/test_run.py
--rw-r--r--  2.0 unx    41877 b- defN 23-Apr-20 11:04 nucliadb/tests/test_search.py
--rw-r--r--  2.0 unx     9708 b- defN 23-Apr-20 11:04 nucliadb/tests/test_search_sorting.py
--rw-r--r--  2.0 unx     8918 b- defN 23-Apr-20 11:04 nucliadb/tests/test_suggest.py
--rw-r--r--  2.0 unx     6819 b- defN 23-Apr-20 11:04 nucliadb/tests/test_synonyms.py
--rw-r--r--  2.0 unx     2637 b- defN 23-Apr-20 11:04 nucliadb/tests/test_tokens.py
--rw-r--r--  2.0 unx     3159 b- defN 23-Apr-20 11:04 nucliadb/tests/test_upload.py
--rw-r--r--  2.0 unx     2585 b- defN 23-Apr-20 11:04 nucliadb/tests/test_usermetadata.py
--rw-r--r--  2.0 unx     8758 b- defN 23-Apr-20 11:04 nucliadb/tests/test_vectorset.py
--rw-r--r--  2.0 unx      919 b- defN 23-Apr-20 11:04 nucliadb/tests/knowledgeboxes/__init__.py
--rw-r--r--  2.0 unx     7049 b- defN 23-Apr-20 11:04 nucliadb/tests/knowledgeboxes/philosophy_books.py
--rw-r--r--  2.0 unx     3131 b- defN 23-Apr-20 11:04 nucliadb/tests/knowledgeboxes/ten_dummy_resources.py
--rw-r--r--  2.0 unx     2492 b- defN 23-Apr-20 11:04 nucliadb/tests/utils/__init__.py
--rw-r--r--  2.0 unx     2533 b- defN 23-Apr-20 11:04 nucliadb/tests/utils/entities.py
--rw-r--r--  2.0 unx     1325 b- defN 23-Apr-20 11:04 nucliadb/train/__init__.py
--rw-r--r--  2.0 unx     3340 b- defN 23-Apr-20 11:04 nucliadb/train/app.py
--rw-r--r--  2.0 unx     1846 b- defN 23-Apr-20 11:04 nucliadb/train/chitchat.py
--rw-r--r--  2.0 unx     3832 b- defN 23-Apr-20 11:04 nucliadb/train/generator.py
--rw-r--r--  2.0 unx     2012 b- defN 23-Apr-20 11:04 nucliadb/train/lifecycle.py
--rw-r--r--  2.0 unx     1198 b- defN 23-Apr-20 11:04 nucliadb/train/models.py
--rw-r--r--  2.0 unx     8043 b- defN 23-Apr-20 11:04 nucliadb/train/nodes.py
--rw-r--r--  2.0 unx     1293 b- defN 23-Apr-20 11:04 nucliadb/train/run.py
--rw-r--r--  2.0 unx     5755 b- defN 23-Apr-20 11:04 nucliadb/train/servicer.py
--rw-r--r--  2.0 unx     1415 b- defN 23-Apr-20 11:04 nucliadb/train/settings.py
--rw-r--r--  2.0 unx     3600 b- defN 23-Apr-20 11:04 nucliadb/train/upload.py
--rw-r--r--  2.0 unx     6531 b- defN 23-Apr-20 11:04 nucliadb/train/uploader.py
--rw-r--r--  2.0 unx     3077 b- defN 23-Apr-20 11:04 nucliadb/train/utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/train/api/__init__.py
--rw-r--r--  2.0 unx      958 b- defN 23-Apr-20 11:04 nucliadb/train/api/models.py
--rw-r--r--  2.0 unx     1479 b- defN 23-Apr-20 11:04 nucliadb/train/api/utils.py
--rw-r--r--  2.0 unx      928 b- defN 23-Apr-20 11:04 nucliadb/train/api/v1/__init__.py
--rw-r--r--  2.0 unx     2066 b- defN 23-Apr-20 11:04 nucliadb/train/api/v1/check.py
--rw-r--r--  2.0 unx      910 b- defN 23-Apr-20 11:04 nucliadb/train/api/v1/router.py
--rw-r--r--  2.0 unx     1905 b- defN 23-Apr-20 11:04 nucliadb/train/api/v1/shards.py
--rw-r--r--  2.0 unx     1825 b- defN 23-Apr-20 11:04 nucliadb/train/api/v1/trainset.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/train/generators/__init__.py
--rw-r--r--  2.0 unx     3289 b- defN 23-Apr-20 11:04 nucliadb/train/generators/field_classifier.py
--rw-r--r--  2.0 unx     3594 b- defN 23-Apr-20 11:04 nucliadb/train/generators/paragraph_classifier.py
--rw-r--r--  2.0 unx     4767 b- defN 23-Apr-20 11:04 nucliadb/train/generators/sentence_classifier.py
--rw-r--r--  2.0 unx    10256 b- defN 23-Apr-20 11:04 nucliadb/train/generators/token_classifier.py
--rw-r--r--  2.0 unx     2144 b- defN 23-Apr-20 11:04 nucliadb/train/generators/utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/train/tests/__init__.py
--rw-r--r--  2.0 unx     1088 b- defN 23-Apr-20 11:04 nucliadb/train/tests/conftest.py
--rw-r--r--  2.0 unx     8977 b- defN 23-Apr-20 11:04 nucliadb/train/tests/fixtures.py
--rw-r--r--  2.0 unx     8132 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_field_classification.py
--rw-r--r--  2.0 unx     2729 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_get_entities.py
--rw-r--r--  2.0 unx     1660 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_get_info.py
--rw-r--r--  2.0 unx     1382 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_get_ontology.py
--rw-r--r--  2.0 unx     2201 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_get_ontology_count.py
--rw-r--r--  2.0 unx     1416 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_list_fields.py
--rw-r--r--  2.0 unx     2944 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_list_paragraphs.py
--rw-r--r--  2.0 unx     1423 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_list_resources.py
--rw-r--r--  2.0 unx     2863 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_list_sentences.py
--rw-r--r--  2.0 unx     8129 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_paragraph_classification.py
--rw-r--r--  2.0 unx     8349 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_sentence_classification.py
--rw-r--r--  2.0 unx    10122 b- defN 23-Apr-20 11:04 nucliadb/train/tests/test_token_classification.py
--rw-r--r--  2.0 unx     1328 b- defN 23-Apr-20 11:04 nucliadb/writer/__init__.py
--rw-r--r--  2.0 unx     3331 b- defN 23-Apr-20 11:04 nucliadb/writer/app.py
--rw-r--r--  2.0 unx      972 b- defN 23-Apr-20 11:04 nucliadb/writer/exceptions.py
--rw-r--r--  2.0 unx     3881 b- defN 23-Apr-20 11:04 nucliadb/writer/lifecycle.py
--rw-r--r--  2.0 unx     2186 b- defN 23-Apr-20 11:04 nucliadb/writer/openapi.py
--rw-r--r--  2.0 unx     1296 b- defN 23-Apr-20 11:04 nucliadb/writer/run.py
--rw-r--r--  2.0 unx     1062 b- defN 23-Apr-20 11:04 nucliadb/writer/settings.py
--rw-r--r--  2.0 unx     1036 b- defN 23-Apr-20 11:04 nucliadb/writer/utilities.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/writer/api/__init__.py
--rw-r--r--  2.0 unx     1021 b- defN 23-Apr-20 11:04 nucliadb/writer/api/v1/__init__.py
--rw-r--r--  2.0 unx    22313 b- defN 23-Apr-20 11:04 nucliadb/writer/api/v1/field.py
--rw-r--r--  2.0 unx     5395 b- defN 23-Apr-20 11:04 nucliadb/writer/api/v1/knowledgebox.py
--rw-r--r--  2.0 unx    15253 b- defN 23-Apr-20 11:04 nucliadb/writer/api/v1/resource.py
--rw-r--r--  2.0 unx     1034 b- defN 23-Apr-20 11:04 nucliadb/writer/api/v1/router.py
--rw-r--r--  2.0 unx    14210 b- defN 23-Apr-20 11:04 nucliadb/writer/api/v1/services.py
--rw-r--r--  2.0 unx    25744 b- defN 23-Apr-20 11:04 nucliadb/writer/api/v1/upload.py
--rw-r--r--  2.0 unx     1618 b- defN 23-Apr-20 11:04 nucliadb/writer/layouts/__init__.py
--rw-r--r--  2.0 unx     2115 b- defN 23-Apr-20 11:04 nucliadb/writer/layouts/v1.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/writer/resource/__init__.py
--rw-r--r--  2.0 unx     1425 b- defN 23-Apr-20 11:04 nucliadb/writer/resource/audit.py
--rw-r--r--  2.0 unx     8872 b- defN 23-Apr-20 11:04 nucliadb/writer/resource/basic.py
--rw-r--r--  2.0 unx    15695 b- defN 23-Apr-20 11:04 nucliadb/writer/resource/field.py
--rw-r--r--  2.0 unx     1708 b- defN 23-Apr-20 11:04 nucliadb/writer/resource/origin.py
--rw-r--r--  2.0 unx     1151 b- defN 23-Apr-20 11:04 nucliadb/writer/resource/slug.py
--rw-r--r--  2.0 unx     4991 b- defN 23-Apr-20 11:04 nucliadb/writer/resource/vectors.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/__init__.py
--rw-r--r--  2.0 unx     1144 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/conftest.py
--rw-r--r--  2.0 unx     4275 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/fixtures.py
--rw-r--r--  2.0 unx    16585 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/test_fields.py
--rw-r--r--  2.0 unx    21645 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/test_files.py
--rw-r--r--  2.0 unx     1932 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/test_knowledgebox.py
--rw-r--r--  2.0 unx     4747 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/test_reprocess_file_field.py
--rw-r--r--  2.0 unx    19059 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/test_resources.py
--rw-r--r--  2.0 unx     5345 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/test_service.py
--rw-r--r--  2.0 unx     3596 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/test_tus.py
--rw-r--r--  2.0 unx     2028 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/tus.py
--rw-r--r--  2.0 unx     1287 b- defN 23-Apr-20 11:04 nucliadb/writer/tests/utils.py
--rw-r--r--  2.0 unx     4095 b- defN 23-Apr-20 11:04 nucliadb/writer/tus/__init__.py
--rw-r--r--  2.0 unx     4396 b- defN 23-Apr-20 11:04 nucliadb/writer/tus/dm.py
--rw-r--r--  2.0 unx     2186 b- defN 23-Apr-20 11:04 nucliadb/writer/tus/exceptions.py
--rw-r--r--  2.0 unx    13818 b- defN 23-Apr-20 11:04 nucliadb/writer/tus/gcs.py
--rw-r--r--  2.0 unx     5811 b- defN 23-Apr-20 11:04 nucliadb/writer/tus/local.py
--rw-r--r--  2.0 unx     8571 b- defN 23-Apr-20 11:04 nucliadb/writer/tus/s3.py
--rw-r--r--  2.0 unx     4682 b- defN 23-Apr-20 11:04 nucliadb/writer/tus/storage.py
--rw-r--r--  2.0 unx     2580 b- defN 23-Apr-20 11:04 nucliadb/writer/tus/utils.py
--rw-r--r--  2.0 unx     3196 b- defN 23-Apr-20 11:06 nucliadb-2.7.0.post198.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-20 11:06 nucliadb-2.7.0.post198.dist-info/WHEEL
--rw-r--r--  2.0 unx      710 b- defN 23-Apr-20 11:06 nucliadb-2.7.0.post198.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        9 b- defN 23-Apr-20 11:06 nucliadb-2.7.0.post198.dist-info/top_level.txt
--rw-r--r--  2.0 unx        1 b- defN 23-Apr-20 11:06 nucliadb-2.7.0.post198.dist-info/zip-safe
--rw-rw-r--  2.0 unx    25324 b- defN 23-Apr-20 11:06 nucliadb-2.7.0.post198.dist-info/RECORD
-282 files, 1560366 bytes uncompressed, 450520 bytes compressed:  71.1%
+Zip file size: 505095 bytes, number of entries: 294
+-rw-r--r--  2.0 unx      891 b- defN 23-Apr-20 12:07 nucliadb/__init__.py
+-rw-r--r--  2.0 unx     1027 b- defN 23-Apr-20 12:07 nucliadb/app.py
+-rw-r--r--  2.0 unx     4556 b- defN 23-Apr-20 12:07 nucliadb/config.py
+-rw-r--r--  2.0 unx     2785 b- defN 23-Apr-20 12:07 nucliadb/logging.py
+-rw-r--r--  2.0 unx     1393 b- defN 23-Apr-20 12:07 nucliadb/purge.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-20 12:07 nucliadb/py.typed
+-rw-r--r--  2.0 unx     3268 b- defN 23-Apr-20 12:07 nucliadb/run.py
+-rw-r--r--  2.0 unx     1945 b- defN 23-Apr-20 12:07 nucliadb/settings.py
+-rw-r--r--  2.0 unx     1011 b- defN 23-Apr-20 12:07 nucliadb/ingest/__init__.py
+-rw-r--r--  2.0 unx     6354 b- defN 23-Apr-20 12:07 nucliadb/ingest/app.py
+-rw-r--r--  2.0 unx      995 b- defN 23-Apr-20 12:07 nucliadb/ingest/cache.py
+-rw-r--r--  2.0 unx     7028 b- defN 23-Apr-20 12:07 nucliadb/ingest/chitchat.py
+-rw-r--r--  2.0 unx     2425 b- defN 23-Apr-20 12:07 nucliadb/ingest/partitions.py
+-rw-r--r--  2.0 unx    14757 b- defN 23-Apr-20 12:07 nucliadb/ingest/processing.py
+-rw-r--r--  2.0 unx     5463 b- defN 23-Apr-20 12:07 nucliadb/ingest/purge.py
+-rw-r--r--  2.0 unx    17721 b- defN 23-Apr-20 12:07 nucliadb/ingest/serialize.py
+-rw-r--r--  2.0 unx     2961 b- defN 23-Apr-20 12:07 nucliadb/ingest/settings.py
+-rw-r--r--  2.0 unx     2531 b- defN 23-Apr-20 12:07 nucliadb/ingest/txn_utils.py
+-rw-r--r--  2.0 unx     4286 b- defN 23-Apr-20 12:07 nucliadb/ingest/utils.py
+-rw-r--r--  2.0 unx     1087 b- defN 23-Apr-20 12:07 nucliadb/ingest/consumer/__init__.py
+-rw-r--r--  2.0 unx    17915 b- defN 23-Apr-20 12:07 nucliadb/ingest/consumer/pull.py
+-rw-r--r--  2.0 unx     6425 b- defN 23-Apr-20 12:07 nucliadb/ingest/consumer/service.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/__init__.py
+-rw-r--r--  2.0 unx    19273 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/base.py
+-rw-r--r--  2.0 unx     6823 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/conversation.py
+-rw-r--r--  2.0 unx     1223 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/date.py
+-rw-r--r--  2.0 unx     1205 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/exceptions.py
+-rw-r--r--  2.0 unx     5159 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/file.py
+-rw-r--r--  2.0 unx     1523 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/generic.py
+-rw-r--r--  2.0 unx     1235 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/keywordset.py
+-rw-r--r--  2.0 unx     2250 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/layout.py
+-rw-r--r--  2.0 unx     4084 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/link.py
+-rw-r--r--  2.0 unx     1319 b- defN 23-Apr-20 12:07 nucliadb/ingest/fields/text.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/ingest/maindb/__init__.py
+-rw-r--r--  2.0 unx     3088 b- defN 23-Apr-20 12:07 nucliadb/ingest/maindb/driver.py
+-rw-r--r--  2.0 unx      877 b- defN 23-Apr-20 12:07 nucliadb/ingest/maindb/exceptions.py
+-rw-r--r--  2.0 unx      980 b- defN 23-Apr-20 12:07 nucliadb/ingest/maindb/keys.py
+-rw-r--r--  2.0 unx     7607 b- defN 23-Apr-20 12:07 nucliadb/ingest/maindb/local.py
+-rw-r--r--  2.0 unx     6115 b- defN 23-Apr-20 12:07 nucliadb/ingest/maindb/pg.py
+-rw-r--r--  2.0 unx     6807 b- defN 23-Apr-20 12:07 nucliadb/ingest/maindb/redis.py
+-rw-r--r--  2.0 unx     7020 b- defN 23-Apr-20 12:07 nucliadb/ingest/maindb/tikv.py
+-rw-r--r--  2.0 unx     3628 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/__init__.py
+-rw-r--r--  2.0 unx     7163 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/abc.py
+-rw-r--r--  2.0 unx    20650 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/brain.py
+-rw-r--r--  2.0 unx    15408 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/entities.py
+-rw-r--r--  2.0 unx     1448 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/exceptions.py
+-rw-r--r--  2.0 unx    12586 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/grpc_node_binding.py
+-rw-r--r--  2.0 unx     5009 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/grpc_node_dummy.py
+-rw-r--r--  2.0 unx    21289 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/knowledgebox.py
+-rw-r--r--  2.0 unx     1730 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/labels.py
+-rw-r--r--  2.0 unx     4291 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/local_node.py
+-rw-r--r--  2.0 unx     2890 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/local_shard.py
+-rw-r--r--  2.0 unx    19962 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/node.py
+-rw-r--r--  2.0 unx     4312 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/nodes_manager.py
+-rw-r--r--  2.0 unx    27745 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/processor.py
+-rw-r--r--  2.0 unx    49701 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/resource.py
+-rw-r--r--  2.0 unx     5305 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/shard.py
+-rw-r--r--  2.0 unx     1739 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/synonyms.py
+-rw-r--r--  2.0 unx     3340 b- defN 23-Apr-20 12:07 nucliadb/ingest/orm/utils.py
+-rw-r--r--  2.0 unx     2817 b- defN 23-Apr-20 12:07 nucliadb/ingest/service/__init__.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/ingest/service/exceptions.py
+-rw-r--r--  2.0 unx    36295 b- defN 23-Apr-20 12:07 nucliadb/ingest/service/writer.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/__init__.py
+-rw-r--r--  2.0 unx     1096 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/conftest.py
+-rw-r--r--  2.0 unx    25069 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/fixtures.py
+-rw-r--r--  2.0 unx     7549 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/tikv.py
+-rw-r--r--  2.0 unx    62843 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/vectors.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/integration/__init__.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/integration/ingest/__init__.py
+-rw-r--r--  2.0 unx    27277 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/integration/ingest/test_ingest.py
+-rw-r--r--  2.0 unx     2339 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/integration/ingest/test_processing_engine.py
+-rw-r--r--  2.0 unx     8606 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/integration/ingest/test_relations.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/__init__.py
+-rw-r--r--  2.0 unx     1179 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/test_cache.py
+-rw-r--r--  2.0 unx     1844 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/test_chitchat.py
+-rw-r--r--  2.0 unx     1432 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/test_partitions.py
+-rw-r--r--  2.0 unx     2252 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/test_processing.py
+-rw-r--r--  2.0 unx     3414 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/test_purge.py
+-rw-r--r--  2.0 unx      978 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/test_settings.py
+-rw-r--r--  2.0 unx     1403 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/test_txn_utils.py
+-rw-r--r--  2.0 unx     2834 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/test_utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/orm/__init__.py
+-rw-r--r--  2.0 unx     8991 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/orm/test_brain.py
+-rw-r--r--  2.0 unx     2818 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/orm/test_cluster.py
+-rw-r--r--  2.0 unx     7334 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/orm/test_node.py
+-rw-r--r--  2.0 unx     2812 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/orm/test_processor.py
+-rw-r--r--  2.0 unx     1470 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/orm/test_resource.py
+-rw-r--r--  2.0 unx     1697 b- defN 23-Apr-20 12:07 nucliadb/ingest/tests/unit/orm/test_shard.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/models/__init__.py
+-rw-r--r--  2.0 unx     1587 b- defN 23-Apr-20 12:07 nucliadb/models/responses.py
+-rw-r--r--  2.0 unx      914 b- defN 23-Apr-20 12:07 nucliadb/one/__init__.py
+-rw-r--r--  2.0 unx     3539 b- defN 23-Apr-20 12:07 nucliadb/one/app.py
+-rw-r--r--  2.0 unx     2130 b- defN 23-Apr-20 12:07 nucliadb/one/lifecycle.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/one/tests/__init__.py
+-rw-r--r--  2.0 unx     1164 b- defN 23-Apr-20 12:07 nucliadb/one/tests/conftest.py
+-rw-r--r--  2.0 unx     3665 b- defN 23-Apr-20 12:07 nucliadb/one/tests/fixtures.py
+-rw-r--r--  2.0 unx     2561 b- defN 23-Apr-20 12:07 nucliadb/one/tests/test_basic.py
+-rw-r--r--  2.0 unx     2492 b- defN 23-Apr-20 12:07 nucliadb/one/tests/test_delete_field.py
+-rw-r--r--  2.0 unx     6087 b- defN 23-Apr-20 12:07 nucliadb/one/tests/test_fieldmetadata.py
+-rw-r--r--  2.0 unx     4594 b- defN 23-Apr-20 12:07 nucliadb/one/tests/test_services.py
+-rw-r--r--  2.0 unx     4067 b- defN 23-Apr-20 12:07 nucliadb/one/tests/test_upload_download.py
+-rw-r--r--  2.0 unx     1328 b- defN 23-Apr-20 12:07 nucliadb/reader/__init__.py
+-rw-r--r--  2.0 unx     3356 b- defN 23-Apr-20 12:07 nucliadb/reader/app.py
+-rw-r--r--  2.0 unx     1741 b- defN 23-Apr-20 12:07 nucliadb/reader/lifecycle.py
+-rw-r--r--  2.0 unx     2186 b- defN 23-Apr-20 12:07 nucliadb/reader/openapi.py
+-rw-r--r--  2.0 unx     1295 b- defN 23-Apr-20 12:07 nucliadb/reader/run.py
+-rw-r--r--  2.0 unx      872 b- defN 23-Apr-20 12:07 nucliadb/reader/api/__init__.py
+-rw-r--r--  2.0 unx     2433 b- defN 23-Apr-20 12:07 nucliadb/reader/api/models.py
+-rw-r--r--  2.0 unx      995 b- defN 23-Apr-20 12:07 nucliadb/reader/api/v1/__init__.py
+-rw-r--r--  2.0 unx     9790 b- defN 23-Apr-20 12:07 nucliadb/reader/api/v1/download.py
+-rw-r--r--  2.0 unx     3570 b- defN 23-Apr-20 12:07 nucliadb/reader/api/v1/knowledgebox.py
+-rw-r--r--  2.0 unx    10697 b- defN 23-Apr-20 12:07 nucliadb/reader/api/v1/resource.py
+-rw-r--r--  2.0 unx     1011 b- defN 23-Apr-20 12:07 nucliadb/reader/api/v1/router.py
+-rw-r--r--  2.0 unx    10766 b- defN 23-Apr-20 12:07 nucliadb/reader/api/v1/services.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/reader/tests/__init__.py
+-rw-r--r--  2.0 unx     1101 b- defN 23-Apr-20 12:07 nucliadb/reader/tests/conftest.py
+-rw-r--r--  2.0 unx     4567 b- defN 23-Apr-20 12:07 nucliadb/reader/tests/fixtures.py
+-rw-r--r--  2.0 unx     2749 b- defN 23-Apr-20 12:07 nucliadb/reader/tests/test_list_resources.py
+-rw-r--r--  2.0 unx     9946 b- defN 23-Apr-20 12:07 nucliadb/reader/tests/test_reader_file_download.py
+-rw-r--r--  2.0 unx    11359 b- defN 23-Apr-20 12:07 nucliadb/reader/tests/test_reader_resource.py
+-rw-r--r--  2.0 unx     6535 b- defN 23-Apr-20 12:07 nucliadb/reader/tests/test_reader_resource_field.py
+-rw-r--r--  2.0 unx     1535 b- defN 23-Apr-20 12:07 nucliadb/search/__init__.py
+-rw-r--r--  2.0 unx     4562 b- defN 23-Apr-20 12:07 nucliadb/search/app.py
+-rw-r--r--  2.0 unx     1848 b- defN 23-Apr-20 12:07 nucliadb/search/chitchat.py
+-rw-r--r--  2.0 unx     3174 b- defN 23-Apr-20 12:07 nucliadb/search/lifecycle.py
+-rw-r--r--  2.0 unx     2206 b- defN 23-Apr-20 12:07 nucliadb/search/openapi.py
+-rw-r--r--  2.0 unx    10222 b- defN 23-Apr-20 12:07 nucliadb/search/predict.py
+-rw-r--r--  2.0 unx     1296 b- defN 23-Apr-20 12:07 nucliadb/search/run.py
+-rw-r--r--  2.0 unx     1108 b- defN 23-Apr-20 12:07 nucliadb/search/settings.py
+-rw-r--r--  2.0 unx     1238 b- defN 23-Apr-20 12:07 nucliadb/search/utilities.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/search/api/__init__.py
+-rw-r--r--  2.0 unx     1077 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/__init__.py
+-rw-r--r--  2.0 unx     6843 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/chat.py
+-rw-r--r--  2.0 unx     1831 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/feedback.py
+-rw-r--r--  2.0 unx     9579 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/find.py
+-rw-r--r--  2.0 unx     6938 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/knowledgebox.py
+-rw-r--r--  2.0 unx     4781 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/resource.py
+-rw-r--r--  2.0 unx      980 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/router.py
+-rw-r--r--  2.0 unx    11487 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/search.py
+-rw-r--r--  2.0 unx     4212 b- defN 23-Apr-20 12:07 nucliadb/search/api/v1/suggest.py
+-rw-r--r--  2.0 unx      833 b- defN 23-Apr-20 12:07 nucliadb/search/requesters/__init__.py
+-rw-r--r--  2.0 unx     5873 b- defN 23-Apr-20 12:07 nucliadb/search/requesters/utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/search/search/__init__.py
+-rw-r--r--  2.0 unx     2408 b- defN 23-Apr-20 12:07 nucliadb/search/search/cache.py
+-rw-r--r--  2.0 unx     5337 b- defN 23-Apr-20 12:07 nucliadb/search/search/fetch.py
+-rw-r--r--  2.0 unx    13543 b- defN 23-Apr-20 12:07 nucliadb/search/search/find_merge.py
+-rw-r--r--  2.0 unx    18881 b- defN 23-Apr-20 12:07 nucliadb/search/search/merge.py
+-rw-r--r--  2.0 unx      947 b- defN 23-Apr-20 12:07 nucliadb/search/search/metrics.py
+-rw-r--r--  2.0 unx    11002 b- defN 23-Apr-20 12:07 nucliadb/search/search/paragraphs.py
+-rw-r--r--  2.0 unx     9905 b- defN 23-Apr-20 12:07 nucliadb/search/search/query.py
+-rw-r--r--  2.0 unx     2647 b- defN 23-Apr-20 12:07 nucliadb/search/search/shards.py
+-rw-r--r--  2.0 unx     2055 b- defN 23-Apr-20 12:07 nucliadb/search/search/synonyms.py
+-rw-r--r--  2.0 unx     2410 b- defN 23-Apr-20 12:07 nucliadb/search/search/utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/search/tests/__init__.py
+-rw-r--r--  2.0 unx     1172 b- defN 23-Apr-20 12:07 nucliadb/search/tests/conftest.py
+-rw-r--r--  2.0 unx     7767 b- defN 23-Apr-20 12:07 nucliadb/search/tests/fixtures.py
+-rw-r--r--  2.0 unx    16225 b- defN 23-Apr-20 12:07 nucliadb/search/tests/node.py
+-rw-r--r--  2.0 unx      833 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/__init__.py
+-rw-r--r--  2.0 unx     1560 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/test_app.py
+-rw-r--r--  2.0 unx     1498 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/test_find_orderer.py
+-rw-r--r--  2.0 unx     1329 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/test_openapi.py
+-rw-r--r--  2.0 unx     6663 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/test_predict.py
+-rw-r--r--  2.0 unx     1258 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/test_run.py
+-rw-r--r--  2.0 unx      833 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/search/__init__.py
+-rw-r--r--  2.0 unx     3736 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/search/test_fetch.py
+-rw-r--r--  2.0 unx     4596 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/search/test_paragraphs.py
+-rw-r--r--  2.0 unx     2512 b- defN 23-Apr-20 12:07 nucliadb/search/tests/unit/search/test_synonyms.py
+-rw-r--r--  2.0 unx     2285 b- defN 23-Apr-20 12:07 nucliadb/static/favicon.ico
+-rw-r--r--  2.0 unx     3833 b- defN 23-Apr-20 12:07 nucliadb/static/index.html
+-rw-r--r--  2.0 unx     2639 b- defN 23-Apr-20 12:07 nucliadb/static/logo.svg
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/tests/__init__.py
+-rw-r--r--  2.0 unx     1000 b- defN 23-Apr-20 12:07 nucliadb/tests/conftest.py
+-rw-r--r--  2.0 unx    11528 b- defN 23-Apr-20 12:07 nucliadb/tests/fixtures.py
+-rw-r--r--  2.0 unx     7370 b- defN 23-Apr-20 12:07 nucliadb/tests/test_advanced_search.py
+-rw-r--r--  2.0 unx    13937 b- defN 23-Apr-20 12:07 nucliadb/tests/test_api.py
+-rw-r--r--  2.0 unx     1290 b- defN 23-Apr-20 12:07 nucliadb/tests/test_chat.py
+-rw-r--r--  2.0 unx     2052 b- defN 23-Apr-20 12:07 nucliadb/tests/test_counters.py
+-rw-r--r--  2.0 unx    12302 b- defN 23-Apr-20 12:07 nucliadb/tests/test_entities.py
+-rw-r--r--  2.0 unx    13274 b- defN 23-Apr-20 12:07 nucliadb/tests/test_entities_deprecated.py
+-rw-r--r--  2.0 unx     3654 b- defN 23-Apr-20 12:07 nucliadb/tests/test_field_external_file.py
+-rw-r--r--  2.0 unx     1487 b- defN 23-Apr-20 12:07 nucliadb/tests/test_field_ids.py
+-rw-r--r--  2.0 unx     2950 b- defN 23-Apr-20 12:07 nucliadb/tests/test_find.py
+-rw-r--r--  2.0 unx     1524 b- defN 23-Apr-20 12:07 nucliadb/tests/test_kb_slugs.py
+-rw-r--r--  2.0 unx    11431 b- defN 23-Apr-20 12:07 nucliadb/tests/test_labels.py
+-rw-r--r--  2.0 unx     6071 b- defN 23-Apr-20 12:07 nucliadb/tests/test_reindex.py
+-rw-r--r--  2.0 unx     6586 b- defN 23-Apr-20 12:07 nucliadb/tests/test_relations.py
+-rw-r--r--  2.0 unx     7072 b- defN 23-Apr-20 12:07 nucliadb/tests/test_resources.py
+-rw-r--r--  2.0 unx     1220 b- defN 23-Apr-20 12:07 nucliadb/tests/test_run.py
+-rw-r--r--  2.0 unx    41877 b- defN 23-Apr-20 12:07 nucliadb/tests/test_search.py
+-rw-r--r--  2.0 unx     9708 b- defN 23-Apr-20 12:07 nucliadb/tests/test_search_sorting.py
+-rw-r--r--  2.0 unx     8918 b- defN 23-Apr-20 12:07 nucliadb/tests/test_suggest.py
+-rw-r--r--  2.0 unx     6819 b- defN 23-Apr-20 12:07 nucliadb/tests/test_synonyms.py
+-rw-r--r--  2.0 unx     2637 b- defN 23-Apr-20 12:07 nucliadb/tests/test_tokens.py
+-rw-r--r--  2.0 unx     3159 b- defN 23-Apr-20 12:07 nucliadb/tests/test_upload.py
+-rw-r--r--  2.0 unx     2585 b- defN 23-Apr-20 12:07 nucliadb/tests/test_usermetadata.py
+-rw-r--r--  2.0 unx     8758 b- defN 23-Apr-20 12:07 nucliadb/tests/test_vectorset.py
+-rw-r--r--  2.0 unx      919 b- defN 23-Apr-20 12:07 nucliadb/tests/knowledgeboxes/__init__.py
+-rw-r--r--  2.0 unx     7049 b- defN 23-Apr-20 12:07 nucliadb/tests/knowledgeboxes/philosophy_books.py
+-rw-r--r--  2.0 unx     3131 b- defN 23-Apr-20 12:07 nucliadb/tests/knowledgeboxes/ten_dummy_resources.py
+-rw-r--r--  2.0 unx     2492 b- defN 23-Apr-20 12:07 nucliadb/tests/utils/__init__.py
+-rw-r--r--  2.0 unx     2533 b- defN 23-Apr-20 12:07 nucliadb/tests/utils/entities.py
+-rw-r--r--  2.0 unx     1325 b- defN 23-Apr-20 12:07 nucliadb/train/__init__.py
+-rw-r--r--  2.0 unx     3340 b- defN 23-Apr-20 12:07 nucliadb/train/app.py
+-rw-r--r--  2.0 unx     1846 b- defN 23-Apr-20 12:07 nucliadb/train/chitchat.py
+-rw-r--r--  2.0 unx     3832 b- defN 23-Apr-20 12:07 nucliadb/train/generator.py
+-rw-r--r--  2.0 unx     2012 b- defN 23-Apr-20 12:07 nucliadb/train/lifecycle.py
+-rw-r--r--  2.0 unx     1198 b- defN 23-Apr-20 12:07 nucliadb/train/models.py
+-rw-r--r--  2.0 unx     8043 b- defN 23-Apr-20 12:07 nucliadb/train/nodes.py
+-rw-r--r--  2.0 unx     1293 b- defN 23-Apr-20 12:07 nucliadb/train/run.py
+-rw-r--r--  2.0 unx     5755 b- defN 23-Apr-20 12:07 nucliadb/train/servicer.py
+-rw-r--r--  2.0 unx     1415 b- defN 23-Apr-20 12:07 nucliadb/train/settings.py
+-rw-r--r--  2.0 unx     3600 b- defN 23-Apr-20 12:07 nucliadb/train/upload.py
+-rw-r--r--  2.0 unx     6531 b- defN 23-Apr-20 12:07 nucliadb/train/uploader.py
+-rw-r--r--  2.0 unx     3077 b- defN 23-Apr-20 12:07 nucliadb/train/utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/train/api/__init__.py
+-rw-r--r--  2.0 unx      958 b- defN 23-Apr-20 12:07 nucliadb/train/api/models.py
+-rw-r--r--  2.0 unx     1479 b- defN 23-Apr-20 12:07 nucliadb/train/api/utils.py
+-rw-r--r--  2.0 unx      928 b- defN 23-Apr-20 12:07 nucliadb/train/api/v1/__init__.py
+-rw-r--r--  2.0 unx     2066 b- defN 23-Apr-20 12:07 nucliadb/train/api/v1/check.py
+-rw-r--r--  2.0 unx      910 b- defN 23-Apr-20 12:07 nucliadb/train/api/v1/router.py
+-rw-r--r--  2.0 unx     1905 b- defN 23-Apr-20 12:07 nucliadb/train/api/v1/shards.py
+-rw-r--r--  2.0 unx     1825 b- defN 23-Apr-20 12:07 nucliadb/train/api/v1/trainset.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/train/generators/__init__.py
+-rw-r--r--  2.0 unx     3289 b- defN 23-Apr-20 12:07 nucliadb/train/generators/field_classifier.py
+-rw-r--r--  2.0 unx     3594 b- defN 23-Apr-20 12:07 nucliadb/train/generators/paragraph_classifier.py
+-rw-r--r--  2.0 unx     4767 b- defN 23-Apr-20 12:07 nucliadb/train/generators/sentence_classifier.py
+-rw-r--r--  2.0 unx    10256 b- defN 23-Apr-20 12:07 nucliadb/train/generators/token_classifier.py
+-rw-r--r--  2.0 unx     2144 b- defN 23-Apr-20 12:07 nucliadb/train/generators/utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/train/tests/__init__.py
+-rw-r--r--  2.0 unx     1088 b- defN 23-Apr-20 12:07 nucliadb/train/tests/conftest.py
+-rw-r--r--  2.0 unx     8977 b- defN 23-Apr-20 12:07 nucliadb/train/tests/fixtures.py
+-rw-r--r--  2.0 unx     8132 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_field_classification.py
+-rw-r--r--  2.0 unx     2729 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_get_entities.py
+-rw-r--r--  2.0 unx     1660 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_get_info.py
+-rw-r--r--  2.0 unx     1382 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_get_ontology.py
+-rw-r--r--  2.0 unx     2201 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_get_ontology_count.py
+-rw-r--r--  2.0 unx     1416 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_list_fields.py
+-rw-r--r--  2.0 unx     2944 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_list_paragraphs.py
+-rw-r--r--  2.0 unx     1423 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_list_resources.py
+-rw-r--r--  2.0 unx     2863 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_list_sentences.py
+-rw-r--r--  2.0 unx     8129 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_paragraph_classification.py
+-rw-r--r--  2.0 unx     8349 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_sentence_classification.py
+-rw-r--r--  2.0 unx    10122 b- defN 23-Apr-20 12:07 nucliadb/train/tests/test_token_classification.py
+-rw-r--r--  2.0 unx     1328 b- defN 23-Apr-20 12:07 nucliadb/writer/__init__.py
+-rw-r--r--  2.0 unx     3331 b- defN 23-Apr-20 12:07 nucliadb/writer/app.py
+-rw-r--r--  2.0 unx      972 b- defN 23-Apr-20 12:07 nucliadb/writer/exceptions.py
+-rw-r--r--  2.0 unx     3881 b- defN 23-Apr-20 12:07 nucliadb/writer/lifecycle.py
+-rw-r--r--  2.0 unx     2186 b- defN 23-Apr-20 12:07 nucliadb/writer/openapi.py
+-rw-r--r--  2.0 unx     1296 b- defN 23-Apr-20 12:07 nucliadb/writer/run.py
+-rw-r--r--  2.0 unx     1062 b- defN 23-Apr-20 12:07 nucliadb/writer/settings.py
+-rw-r--r--  2.0 unx     1036 b- defN 23-Apr-20 12:07 nucliadb/writer/utilities.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/writer/api/__init__.py
+-rw-r--r--  2.0 unx     1021 b- defN 23-Apr-20 12:07 nucliadb/writer/api/v1/__init__.py
+-rw-r--r--  2.0 unx    22313 b- defN 23-Apr-20 12:07 nucliadb/writer/api/v1/field.py
+-rw-r--r--  2.0 unx     5395 b- defN 23-Apr-20 12:07 nucliadb/writer/api/v1/knowledgebox.py
+-rw-r--r--  2.0 unx    15253 b- defN 23-Apr-20 12:07 nucliadb/writer/api/v1/resource.py
+-rw-r--r--  2.0 unx     1034 b- defN 23-Apr-20 12:07 nucliadb/writer/api/v1/router.py
+-rw-r--r--  2.0 unx    14210 b- defN 23-Apr-20 12:07 nucliadb/writer/api/v1/services.py
+-rw-r--r--  2.0 unx    25744 b- defN 23-Apr-20 12:07 nucliadb/writer/api/v1/upload.py
+-rw-r--r--  2.0 unx     1618 b- defN 23-Apr-20 12:07 nucliadb/writer/layouts/__init__.py
+-rw-r--r--  2.0 unx     2115 b- defN 23-Apr-20 12:07 nucliadb/writer/layouts/v1.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/writer/resource/__init__.py
+-rw-r--r--  2.0 unx     1425 b- defN 23-Apr-20 12:07 nucliadb/writer/resource/audit.py
+-rw-r--r--  2.0 unx     8872 b- defN 23-Apr-20 12:07 nucliadb/writer/resource/basic.py
+-rw-r--r--  2.0 unx    15695 b- defN 23-Apr-20 12:07 nucliadb/writer/resource/field.py
+-rw-r--r--  2.0 unx     1708 b- defN 23-Apr-20 12:07 nucliadb/writer/resource/origin.py
+-rw-r--r--  2.0 unx     1151 b- defN 23-Apr-20 12:07 nucliadb/writer/resource/slug.py
+-rw-r--r--  2.0 unx     4991 b- defN 23-Apr-20 12:07 nucliadb/writer/resource/vectors.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/__init__.py
+-rw-r--r--  2.0 unx     1144 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/conftest.py
+-rw-r--r--  2.0 unx     4261 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/fixtures.py
+-rw-r--r--  2.0 unx    16585 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/test_fields.py
+-rw-r--r--  2.0 unx    21645 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/test_files.py
+-rw-r--r--  2.0 unx     1932 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/test_knowledgebox.py
+-rw-r--r--  2.0 unx     4747 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/test_reprocess_file_field.py
+-rw-r--r--  2.0 unx    19059 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/test_resources.py
+-rw-r--r--  2.0 unx     5345 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/test_service.py
+-rw-r--r--  2.0 unx     3596 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/test_tus.py
+-rw-r--r--  2.0 unx     2028 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/tus.py
+-rw-r--r--  2.0 unx     1287 b- defN 23-Apr-20 12:07 nucliadb/writer/tests/utils.py
+-rw-r--r--  2.0 unx     4095 b- defN 23-Apr-20 12:07 nucliadb/writer/tus/__init__.py
+-rw-r--r--  2.0 unx     4396 b- defN 23-Apr-20 12:07 nucliadb/writer/tus/dm.py
+-rw-r--r--  2.0 unx     2186 b- defN 23-Apr-20 12:07 nucliadb/writer/tus/exceptions.py
+-rw-r--r--  2.0 unx    13818 b- defN 23-Apr-20 12:07 nucliadb/writer/tus/gcs.py
+-rw-r--r--  2.0 unx     5811 b- defN 23-Apr-20 12:07 nucliadb/writer/tus/local.py
+-rw-r--r--  2.0 unx     8571 b- defN 23-Apr-20 12:07 nucliadb/writer/tus/s3.py
+-rw-r--r--  2.0 unx     4682 b- defN 23-Apr-20 12:07 nucliadb/writer/tus/storage.py
+-rw-r--r--  2.0 unx     2580 b- defN 23-Apr-20 12:07 nucliadb/writer/tus/utils.py
+-rw-r--r--  2.0 unx     3196 b- defN 23-Apr-20 12:09 nucliadb-2.7.0.post199.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-20 12:09 nucliadb-2.7.0.post199.dist-info/WHEEL
+-rw-r--r--  2.0 unx      710 b- defN 23-Apr-20 12:09 nucliadb-2.7.0.post199.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        9 b- defN 23-Apr-20 12:09 nucliadb-2.7.0.post199.dist-info/top_level.txt
+-rw-r--r--  2.0 unx        1 b- defN 23-Apr-20 12:09 nucliadb-2.7.0.post199.dist-info/zip-safe
+-rw-rw-r--  2.0 unx    26513 b- defN 23-Apr-20 12:09 nucliadb-2.7.0.post199.dist-info/RECORD
+294 files, 1592148 bytes uncompressed, 463091 bytes compressed:  70.9%
```

## zipnote {}

```diff
@@ -423,26 +423,32 @@
 
 Filename: nucliadb/search/requesters/utils.py
 Comment: 
 
 Filename: nucliadb/search/search/__init__.py
 Comment: 
 
+Filename: nucliadb/search/search/cache.py
+Comment: 
+
 Filename: nucliadb/search/search/fetch.py
 Comment: 
 
 Filename: nucliadb/search/search/find_merge.py
 Comment: 
 
 Filename: nucliadb/search/search/merge.py
 Comment: 
 
 Filename: nucliadb/search/search/metrics.py
 Comment: 
 
+Filename: nucliadb/search/search/paragraphs.py
+Comment: 
+
 Filename: nucliadb/search/search/query.py
 Comment: 
 
 Filename: nucliadb/search/search/shards.py
 Comment: 
 
 Filename: nucliadb/search/search/synonyms.py
@@ -459,14 +465,44 @@
 
 Filename: nucliadb/search/tests/fixtures.py
 Comment: 
 
 Filename: nucliadb/search/tests/node.py
 Comment: 
 
+Filename: nucliadb/search/tests/unit/__init__.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/test_app.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/test_find_orderer.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/test_openapi.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/test_predict.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/test_run.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/search/__init__.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/search/test_fetch.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/search/test_paragraphs.py
+Comment: 
+
+Filename: nucliadb/search/tests/unit/search/test_synonyms.py
+Comment: 
+
 Filename: nucliadb/static/favicon.ico
 Comment: 
 
 Filename: nucliadb/static/index.html
 Comment: 
 
 Filename: nucliadb/static/logo.svg
@@ -822,26 +858,26 @@
 
 Filename: nucliadb/writer/tus/storage.py
 Comment: 
 
 Filename: nucliadb/writer/tus/utils.py
 Comment: 
 
-Filename: nucliadb-2.7.0.post198.dist-info/METADATA
+Filename: nucliadb-2.7.0.post199.dist-info/METADATA
 Comment: 
 
-Filename: nucliadb-2.7.0.post198.dist-info/WHEEL
+Filename: nucliadb-2.7.0.post199.dist-info/WHEEL
 Comment: 
 
-Filename: nucliadb-2.7.0.post198.dist-info/entry_points.txt
+Filename: nucliadb-2.7.0.post199.dist-info/entry_points.txt
 Comment: 
 
-Filename: nucliadb-2.7.0.post198.dist-info/top_level.txt
+Filename: nucliadb-2.7.0.post199.dist-info/top_level.txt
 Comment: 
 
-Filename: nucliadb-2.7.0.post198.dist-info/zip-safe
+Filename: nucliadb-2.7.0.post199.dist-info/zip-safe
 Comment: 
 
-Filename: nucliadb-2.7.0.post198.dist-info/RECORD
+Filename: nucliadb-2.7.0.post199.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## nucliadb/ingest/chitchat.py

```diff
@@ -61,14 +61,15 @@
     async def inner_start(self):
         async with self.chitchat_update_srv:
             logger.info("awaiting connections from rust part of cluster")
             await self.chitchat_update_srv.serve_forever()
 
     async def finalize(self):
         self.chitchat_update_srv.close()
+        await self.chitchat_update_srv.wait_closed()
         self.task.cancel()
 
     async def start(self):
         logger.info(f"enter chitchat.start() at {self.host}:{self.port}")
         self.chitchat_update_srv = await asyncio.start_server(
             self.socket_reader, host=self.host, port=self.port
         )
```

## nucliadb/ingest/fields/base.py

```diff
@@ -15,14 +15,15 @@
 # GNU Affero General Public License for more details.
 #
 # You should have received a copy of the GNU Affero General Public License
 # along with this program. If not, see <http://www.gnu.org/licenses/>.
 #
 from __future__ import annotations
 
+import enum
 from datetime import datetime
 from typing import Any, Dict, List, Optional, Tuple, Type
 
 from nucliadb_protos.resources_pb2 import (
     CloudFile,
     ExtractedTextWrapper,
     ExtractedVectorsWrapper,
@@ -41,22 +42,27 @@
 from nucliadb_protos.writer_pb2 import Error
 
 from nucliadb.ingest.fields.exceptions import InvalidFieldClass, InvalidPBClass
 from nucliadb_utils.storages.storage import Storage, StorageField
 
 KB_RESOURCE_FIELD = "/kbs/{kbid}/r/{uuid}/f/{type}/{field}"
 KB_RESOURCE_ERROR = "/kbs/{kbid}/r/{uuid}/f/{type}/{field}/error"
-FIELD_TEXT = "extracted_text"
-FIELD_VECTORS = "extracted_vectors"
-USER_FIELD_VECTORS = "user_vectors"
-FIELD_METADATA = "metadata"
-FIELD_LARGE_METADATA = "large_metadata"
+
 SUBFIELDFIELDS = ["l", "c"]
 
 
+class FieldTypes(str, enum.Enum):
+    FIELD_TEXT = "extracted_text"
+    FIELD_VECTORS = "extracted_vectors"
+    USER_FIELD_VECTORS = "user_vectors"
+    FIELD_METADATA = "metadata"
+    FIELD_LARGE_METADATA = "large_metadata"
+    THUMBNAIL = "thumbnail"
+
+
 class Field:
     pbklass: Optional[Type] = None
     type: str = "x"
     value: Optional[Any]
     extracted_text: Optional[ExtractedText]
     extracted_vectors: Optional[VectorObject]
     computed_metadata: Optional[FieldComputedMetadata]
@@ -101,14 +107,19 @@
     def uuid(self) -> str:
         return self.resource.uuid
 
     @property
     def storage(self) -> Storage:
         return self.resource.storage
 
+    def get_storage_field(self, field_type: FieldTypes) -> StorageField:
+        return self.storage.file_extracted(
+            self.kbid, self.uuid, self.type, self.id, field_type.value
+        )
+
     async def db_get_value(self):
         if self.value is None:
             payload = await self.resource.txn.get(
                 KB_RESOURCE_FIELD.format(
                     kbid=self.kbid, uuid=self.uuid, type=self.type, field=self.id
                 )
             )
@@ -140,36 +151,30 @@
         for key in keys_to_delete:
             await self.resource.txn.delete(key)
         await self.delete_extracted_text()
         await self.delete_vectors()
         await self.delete_metadata()
 
     async def delete_extracted_text(self) -> None:
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_TEXT
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_TEXT)
         try:
             await self.storage.delete_upload(sf.key, sf.bucket)
         except KeyError:
             pass
 
     async def delete_vectors(self) -> None:
         # Try delete vectors
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_VECTORS
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_VECTORS)
         try:
             await self.storage.delete_upload(sf.key, sf.bucket)
         except KeyError:
             pass
 
     async def delete_metadata(self) -> None:
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_METADATA
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_METADATA)
         try:
             await self.storage.delete_upload(sf.key, sf.bucket)
         except KeyError:
             pass
 
     async def get_error(self) -> Optional[Error]:
         payload = await self.resource.txn.get(
@@ -197,17 +202,15 @@
                 actual_payload: Optional[ExtractedText] = await self.get_extracted_text(
                     force=True
                 )
             except KeyError:
                 actual_payload = None
         else:
             actual_payload = None
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_TEXT
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_TEXT)
 
         if actual_payload is None:
             # Its first extracted text
             if payload.HasField("file"):
                 await self.storage.normalize_binary(payload.file, sf)
             else:
                 await self.storage.upload_pb(sf, payload.body)
@@ -228,26 +231,22 @@
             if payload.body.text != "":
                 actual_payload.text = payload.body.text
             await self.storage.upload_pb(sf, actual_payload)
             self.extracted_text = actual_payload
 
     async def get_extracted_text(self, force=False) -> Optional[ExtractedText]:
         if self.extracted_text is None or force:
-            sf: StorageField = self.storage.file_extracted(
-                self.kbid, self.uuid, self.type, self.id, FIELD_TEXT
-            )
+            sf = self.get_storage_field(FieldTypes.FIELD_TEXT)
             payload = await self.storage.download_pb(sf, ExtractedText)
             if payload is not None:
                 self.extracted_text = payload
         return self.extracted_text
 
     async def get_extracted_text_cf(self) -> Optional[CloudFile]:
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_TEXT
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_TEXT)
         if await sf.exists() is not None:
             return sf.build_cf()
         else:
             return None
 
     async def set_vectors(
         self, payload: ExtractedVectorsWrapper
@@ -258,17 +257,15 @@
                     force=True
                 )
             except KeyError:
                 actual_payload = None
         else:
             actual_payload = None
 
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_VECTORS
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_VECTORS)
         vo: Optional[VectorObject] = None
         replace_field: bool = True
         replace_splits = []
         if actual_payload is None:
             # Its first extracted text
             if payload.HasField("file"):
                 await self.storage.normalize_binary(payload.file, sf)
@@ -297,17 +294,15 @@
                 actual_payload.vectors.CopyFrom(payload.vectors.vectors)
             await self.storage.upload_pb(sf, actual_payload)
             self.extracted_vectors = actual_payload
         return vo, replace_field, replace_splits
 
     async def get_vectors(self, force=False) -> Optional[VectorObject]:
         if self.extracted_vectors is None or force:
-            sf: StorageField = self.storage.file_extracted(
-                self.kbid, self.uuid, self.type, self.id, FIELD_VECTORS
-            )
+            sf = self.get_storage_field(FieldTypes.FIELD_VECTORS)
             payload = await self.storage.download_pb(sf, VectorObject)
             if payload is not None:
                 self.extracted_vectors = payload
         return self.extracted_vectors
 
     async def set_user_vectors(
         self, user_vectors: UserVectorsWrapper
@@ -315,17 +310,15 @@
         try:
             actual_payload: Optional[UserVectorSet] = await self.get_user_vectors(
                 force=True
             )
         except KeyError:
             actual_payload = None
 
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, USER_FIELD_VECTORS
-        )
+        sf = self.get_storage_field(FieldTypes.USER_FIELD_VECTORS)
 
         vectors_to_delete: Dict[str, UserVectorsList] = {}
         if actual_payload is not None:
             for vectorset, user_vector in user_vectors.vectors.vectors.items():
                 for key, vector in user_vector.vectors.items():
                     if key in actual_payload.vectors[vectorset].vectors.keys():
                         if vectorset not in vectors_to_delete:
@@ -345,26 +338,22 @@
             actual_payload = user_vectors.vectors
         await self.storage.upload_pb(sf, actual_payload)
         self.extracted_user_vectors = actual_payload
         return actual_payload, vectors_to_delete
 
     async def get_user_vectors(self, force=False) -> Optional[UserVectorSet]:
         if self.extracted_user_vectors is None or force:
-            sf: StorageField = self.storage.file_extracted(
-                self.kbid, self.uuid, self.type, self.id, USER_FIELD_VECTORS
-            )
+            sf = self.get_storage_field(FieldTypes.USER_FIELD_VECTORS)
             payload = await self.storage.download_pb(sf, UserVectorSet)
             if payload is not None:
                 self.extracted_user_vectors = payload
         return self.extracted_user_vectors
 
     async def get_vectors_cf(self) -> Optional[CloudFile]:
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_VECTORS
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_VECTORS)
         if await sf.exists() is not None:
             return sf.build_cf()
         else:
             return None
 
     async def set_field_metadata(
         self, payload: FieldComputedMetadataWrapper
@@ -375,33 +364,27 @@
                     FieldComputedMetadata
                 ] = await self.get_field_metadata(force=True)
             except KeyError:
                 actual_payload = None
         else:
             actual_payload = None
 
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_METADATA
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_METADATA)
 
         if self.storage.needs_move(payload.metadata.metadata.thumbnail, self.kbid):
-            sf_thumbnail: StorageField = self.storage.file_extracted(
-                self.kbid, self.uuid, self.type, self.id, f"thumbnail"
-            )
+            sf_thumbnail = self.get_storage_field(FieldTypes.THUMBNAIL)
             cf: CloudFile = await self.storage.normalize_binary(
                 payload.metadata.metadata.thumbnail, sf_thumbnail
             )
             payload.metadata.metadata.thumbnail.CopyFrom(cf)
         payload.metadata.metadata.last_index.FromDatetime(datetime.now())
 
         for key, metadata in payload.metadata.split_metadata.items():
             if self.storage.needs_move(metadata.thumbnail, self.kbid):
-                sf_thumbnail_split: StorageField = self.storage.file_extracted(
-                    self.kbid, self.uuid, self.type, self.id, f"thumbnail"
-                )
+                sf_thumbnail_split = self.get_storage_field(FieldTypes.THUMBNAIL)
                 cf_split: CloudFile = await self.storage.normalize_binary(
                     metadata.thumbnail, sf_thumbnail_split
                 )
                 metadata.thumbnail.CopyFrom(cf_split)
             metadata.last_index.FromDatetime(datetime.now())
 
         replace_field = []
@@ -429,26 +412,22 @@
 
         return self.computed_metadata, replace_field, replace_splits
 
     async def get_field_metadata(
         self, force: bool = False
     ) -> Optional[FieldComputedMetadata]:
         if self.computed_metadata is None or force:
-            sf: StorageField = self.storage.file_extracted(
-                self.kbid, self.uuid, self.type, self.id, FIELD_METADATA
-            )
+            sf = self.get_storage_field(FieldTypes.FIELD_METADATA)
             payload = await self.storage.download_pb(sf, FieldComputedMetadata)
             if payload is not None:
                 self.computed_metadata = payload
         return self.computed_metadata
 
     async def get_field_metadata_cf(self) -> Optional[CloudFile]:
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_METADATA
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_METADATA)
         if await sf.exists() is not None:
             return sf.build_cf()
         else:
             return None
 
     async def set_large_field_metadata(self, payload: LargeComputedMetadataWrapper):
         if self.type in SUBFIELDFIELDS:
@@ -457,17 +436,15 @@
                     LargeComputedMetadata
                 ] = await self.get_large_field_metadata(force=True)
             except KeyError:
                 actual_payload = None
         else:
             actual_payload = None
 
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_LARGE_METADATA
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_LARGE_METADATA)
 
         new_payload: Optional[LargeComputedMetadata] = None
         if payload.HasField("file"):
             new_payload = LargeComputedMetadata()
             data = await self.storage.downloadbytescf(payload.file)
             new_payload.ParseFromString(data.read())
             data.flush()
@@ -492,29 +469,25 @@
 
         return self.large_computed_metadata
 
     async def get_large_field_metadata(
         self, force: bool = False
     ) -> Optional[LargeComputedMetadata]:
         if self.large_computed_metadata is None or force:
-            sf: StorageField = self.storage.file_extracted(
-                self.kbid, self.uuid, self.type, self.id, FIELD_LARGE_METADATA
-            )
+            sf = self.get_storage_field(FieldTypes.FIELD_LARGE_METADATA)
             payload = await self.storage.download_pb(
                 sf,
                 LargeComputedMetadata,
             )
             if payload is not None:
                 self.large_computed_metadata = payload
         return self.large_computed_metadata
 
     async def get_large_field_metadata_cf(self) -> Optional[CloudFile]:
-        sf: StorageField = self.storage.file_extracted(
-            self.kbid, self.uuid, self.type, self.id, FIELD_LARGE_METADATA
-        )
+        sf = self.get_storage_field(FieldTypes.FIELD_LARGE_METADATA)
         if await sf.exists() is not None:
             return sf.build_cf()
         else:
             return None
 
     def serialize(self):
         return self.value.SerializeToString()
```

## nucliadb/ingest/tests/fixtures.py

```diff
@@ -135,16 +135,17 @@
     await server.stop(None)
     await consumer.stop()
 
     settings.driver_redis_url = None
     cache_settings.cache_pubsub_redis_url = None
     settings.driver = default_driver
     cache_settings.cache_pubsub_driver = default_driver_pubsub
-    driver = aioredis.from_url(f"redis://{redis[0]}:{redis[1]}")
     await driver.flushall()
+    await driver.close(close_connection_pool=True)
+
     pubsub = get_utility(Utility.PUBSUB)
     if pubsub is not None:
         await pubsub.finalize()
     clear_global_cache()
 
 
 @pytest.fixture(scope="function")
```

## nucliadb/one/tests/fixtures.py

```diff
@@ -81,16 +81,17 @@
         client.headers["X-NUCLIADB-USER"] = user
 
         return client
 
     yield make_client_fixture
 
     await application.router.shutdown()
-    driver = aioredis.from_url(f"redis://{redis[0]}:{redis[1]}")
     await driver.flushall()
+    await driver.close(close_connection_pool=True)
+
     clear_ingest_cache()
     clear_global_cache()
     for node in NODES.values():
         node._reader = None
         node._writer = None
         node._sidecar = None
```

## nucliadb/search/lifecycle.py

```diff
@@ -23,14 +23,15 @@
 from nucliadb.ingest import logger as ingest_logger
 from nucliadb.ingest.orm.nodes_manager import NodesManager
 from nucliadb.ingest.utils import get_driver  # type: ignore
 from nucliadb.ingest.utils import start_ingest, stop_ingest
 from nucliadb.search import SERVICE_NAME, logger
 from nucliadb.search.chitchat import start_chitchat, stop_chitchat
 from nucliadb.search.predict import PredictEngine
+from nucliadb.search.search import paragraphs
 from nucliadb_telemetry.utils import clean_telemetry, setup_telemetry
 from nucliadb_utils.settings import nuclia_settings, running_settings
 from nucliadb_utils.utilities import (
     Utility,
     clean_utility,
     finalize_utilities,
     get_cache,
@@ -58,14 +59,16 @@
     await predict_util.initialize()
     set_utility(Utility.PREDICT, predict_util)
     driver = await get_driver()
     cache = await get_cache()
     set_utility(Utility.NODES, NodesManager(driver=driver, cache=cache))
     await start_chitchat(SERVICE_NAME)
 
+    await paragraphs.initialize_cache()
+
     logging.basicConfig(
         level=logging.INFO,
         format="[%(asctime)s.%(msecs)02d] [%(levelname)s] - %(name)s - %(message)s",
         datefmt="%Y-%m-%d %H:%M:%S",
         stream=sys.stderr,
     )
```

## nucliadb/search/settings.py

```diff
@@ -13,15 +13,20 @@
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 # GNU Affero General Public License for more details.
 #
 # You should have received a copy of the GNU Affero General Public License
 # along with this program. If not, see <http://www.gnu.org/licenses/>.
 #
+from typing import Optional
+
 from nucliadb.ingest.settings import DriverSettings
 
 
 class Settings(DriverSettings):
     search_timeout: float = 10.0
 
+    search_cache_redis_host: Optional[str] = None
+    search_cache_redis_port: Optional[int] = None
+
 
 settings = Settings()
```

## nucliadb/search/search/fetch.py

```diff
@@ -13,51 +13,34 @@
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 # GNU Affero General Public License for more details.
 #
 # You should have received a copy of the GNU Affero General Public License
 # along with this program. If not, see <http://www.gnu.org/licenses/>.
 #
-import asyncio
-import re
-import string
 from contextvars import ContextVar
 from typing import Dict, List, Optional, Tuple
 
-from lru import LRU  # type: ignore
 from nucliadb_protos.nodereader_pb2 import DocumentResult, ParagraphResult
 from nucliadb_protos.resources_pb2 import Paragraph
 
-from nucliadb.ingest.orm.knowledgebox import KnowledgeBox as KnowledgeBoxORM
 from nucliadb.ingest.orm.resource import KB_REVERSE
 from nucliadb.ingest.orm.resource import Resource as ResourceORM
 from nucliadb.ingest.serialize import serialize
-from nucliadb.ingest.txn_utils import get_transaction
 from nucliadb.search import SERVICE_NAME, logger
 from nucliadb_models.common import FieldTypeName
 from nucliadb_models.resource import ExtractedDataTypeName, Resource
 from nucliadb_models.search import ResourceProperties
-from nucliadb_utils.utilities import get_cache, get_storage
+
+from .cache import get_resource_from_cache
 
 rcache: ContextVar[Optional[Dict[str, ResourceORM]]] = ContextVar(
     "rcache", default=None
 )
 
-RESOURCE_LOCKS: Dict[str, asyncio.Lock] = LRU(1000)
-
-PRE_WORD = string.punctuation + " "
-
-
-def get_resource_cache(clear: bool = False) -> Dict[str, ResourceORM]:
-    value: Optional[Dict[str, ResourceORM]] = rcache.get()
-    if value is None or clear:
-        value = {}
-        rcache.set(value)
-    return value
-
 
 async def fetch_resources(
     resources: List[str],
     kbid: str,
     show: List[ResourceProperties],
     field_type_filter: List[FieldTypeName],
     extracted: List[ExtractedDataTypeName],
@@ -73,43 +56,14 @@
             service_name=SERVICE_NAME,
         )
         if serialization is not None:
             result[resource] = serialization
     return result
 
 
-async def get_resource_from_cache(kbid: str, uuid: str) -> Optional[ResourceORM]:
-    orm_resource: Optional[ResourceORM] = None
-
-    resource_cache = get_resource_cache()
-
-    if uuid not in RESOURCE_LOCKS:
-        lock = asyncio.Lock()
-        RESOURCE_LOCKS[uuid] = lock
-        await lock.acquire()
-    else:
-        await RESOURCE_LOCKS[uuid].acquire()
-
-    try:
-        if uuid not in resource_cache:
-            transaction = await get_transaction()
-            storage = await get_storage(service_name=SERVICE_NAME)
-            cache = await get_cache()
-            kb = KnowledgeBoxORM(transaction, storage, cache, kbid)
-            orm_resource = await kb.get(uuid)
-
-        if orm_resource is not None:
-            resource_cache[uuid] = orm_resource
-        else:
-            orm_resource = resource_cache.get(uuid)
-    finally:
-        RESOURCE_LOCKS[uuid].release()
-    return orm_resource
-
-
 async def get_paragraph_from_resource(
     orm_resource: ResourceORM, result: ParagraphResult
 ) -> Optional[Paragraph]:
     _, field_type, field = result.field.split("/")
     field_type_int = KB_REVERSE[field_type]
     field_obj = await orm_resource.get_field(field, field_type_int, load=False)
     field_metadata = await field_obj.get_field_metadata()
@@ -119,164 +73,14 @@
             metadata = field_metadata.split_metadata[result.split]
             paragraph = metadata.paragraphs[result.index]
         elif len(field_metadata.metadata.paragraphs) > result.index:
             paragraph = field_metadata.metadata.paragraphs[result.index]
     return paragraph
 
 
-async def get_text_sentence(
-    rid: str,
-    field_type: str,
-    field: str,
-    kbid: str,
-    index: int,
-    start: int,
-    end: int,
-    split: Optional[str] = None,
-) -> str:
-    orm_resource = await get_resource_from_cache(kbid, rid)
-
-    if orm_resource is None:
-        logger.warning(f"{rid} does not exist on DB")
-        return ""
-
-    field_type_int = KB_REVERSE[field_type]
-    field_obj = await orm_resource.get_field(field, field_type_int, load=False)
-    extracted_text = await field_obj.get_extracted_text()
-    if extracted_text is None:
-        logger.info(
-            f"{rid} {field} {field_type_int} extracted_text does not exist on DB"
-        )
-        return ""
-    start = start - 1
-    if start < 0:
-        start = 0
-    if split not in (None, ""):
-        text = extracted_text.split_text[split]
-        splitted_text = text[start:end]
-    else:
-        splitted_text = extracted_text.text[start:end]
-    return splitted_text
-
-
-async def get_text_paragraph(
-    result: ParagraphResult,
-    kbid: str,
-    highlight: bool = False,
-    ematches: Optional[List[str]] = None,
-) -> str:
-    orm_resource = await get_resource_from_cache(kbid, result.uuid)
-
-    if orm_resource is None:
-        logger.error(f"{result.uuid} does not exist on DB")
-        return ""
-
-    _, field_type, field = result.field.split("/")
-    field_type_int = KB_REVERSE[field_type]
-    field_obj = await orm_resource.get_field(field, field_type_int, load=False)
-    extracted_text = await field_obj.get_extracted_text()
-    if extracted_text is None:
-        logger.warning(
-            f"{result.uuid} {field} {field_type_int} extracted_text does not exist on DB"
-        )
-        return ""
-
-    if result.split not in (None, ""):
-        text = extracted_text.split_text[result.split]
-        splitted_text = text[result.start : result.end]
-    else:
-        splitted_text = extracted_text.text[result.start : result.end]
-
-    if highlight:
-        splitted_text = highlight_paragraph(
-            splitted_text, words=result.matches, ematches=ematches  # type: ignore
-        )
-
-    return splitted_text
-
-
-def get_regex(some_string: str) -> str:
-    return r"\b" + some_string.lower() + r"\b"
-
-
-def highlight_paragraph(
-    text: str, words: Optional[List[str]] = None, ematches: Optional[List[str]] = None
-) -> str:
-    text_lower = text.lower()
-
-    marks = [0] * (len(text_lower) + 1)
-    if ematches is not None:
-        for quote in ematches:
-            quote_regex = get_regex(quote.lower())
-            try:
-                for match in re.finditer(quote_regex, text_lower):
-                    start, end = match.span()
-                    marks[start] = 1
-                    marks[end] = 2
-            except re.error:
-                logger.warning(
-                    f"Regex errors while highlighting text. Regex: {quote_regex}"
-                )
-                continue
-
-    words = words or []
-    for word in words:
-        word_regex = get_regex(word.lower())
-        try:
-            for match in re.finditer(word_regex, text_lower):
-                start, end = match.span()
-                if marks[start] == 0 and marks[end] == 0:
-                    marks[start] = 1
-                    marks[end] = 2
-        except re.error:
-            logger.warning(f"Regex errors while highlighting text. Regex: {word_regex}")
-            continue
-
-    new_text = ""
-    actual = 0
-    mod = 0
-    skip = False
-
-    length = len(text)
-
-    for index, pos in enumerate(marks):
-        if skip:
-            skip = False
-            continue
-        if (index - mod) >= length:
-            char_pos = ""
-        else:
-            begining = True
-            if index > 0 and text[index - mod - 1] not in PRE_WORD:
-                begining = False
-            char_pos = text[index - mod]
-            if text[index - mod].lower() != text_lower[index]:
-                # May be incorrect positioning due to unicode lower
-                mod += 1
-                skip = True
-        if pos == 1 and actual == 0 and begining:
-            new_text += "<mark>"
-            new_text += char_pos
-            actual = 1
-        elif pos == 2 and actual == 1:
-            new_text += "</mark>"
-            new_text += char_pos
-            actual = 0
-        elif pos == 1 and actual > 0:
-            new_text += char_pos
-            actual += 1
-        elif pos == 2 and actual > 1:
-            new_text += char_pos
-            actual -= 1
-        else:
-            new_text += char_pos
-
-    return new_text
-
-
 async def get_labels_resource(result: DocumentResult, kbid: str) -> List[str]:
     orm_resource = await get_resource_from_cache(kbid, result.uuid)
 
     if orm_resource is None:
         logger.error(f"{result.uuid} does not exist on DB")
         return []
```

## nucliadb/search/search/find_merge.py

```diff
@@ -23,23 +23,18 @@
 from nucliadb_protos.nodereader_pb2 import (
     DocumentScored,
     EntitiesSubgraphRequest,
     ParagraphResult,
     SearchResponse,
 )
 
-from nucliadb.ingest.orm.resource import KB_REVERSE
 from nucliadb.ingest.serialize import serialize
 from nucliadb.ingest.txn_utils import abort_transaction, get_transaction
-from nucliadb.search import SERVICE_NAME, logger
-from nucliadb.search.search.fetch import (
-    get_resource_cache,
-    get_resource_from_cache,
-    highlight_paragraph,
-)
+from nucliadb.search import SERVICE_NAME
+from nucliadb.search.search.cache import get_resource_cache
 from nucliadb.search.search.merge import merge_relations_results
 from nucliadb_models.common import FieldTypeName
 from nucliadb_models.resource import ExtractedDataTypeName
 from nucliadb_models.search import (
     SCORE_TYPE,
     FindField,
     FindParagraph,
@@ -49,76 +44,37 @@
     SortOptions,
     TempFindParagraph,
     TextPosition,
 )
 from nucliadb_telemetry import metrics
 
 from .metrics import merge_observer
+from .paragraphs import get_paragraph_text
 
 FIND_FETCH_OPS_DISTRIBUTION = metrics.Histogram(
     "nucliadb_find_fetch_operations",
     buckets=[1, 5, 10, 20, 30, 40, 50, 60, 80, 100, 200],
 )
 
 
-async def get_text_find_paragraph(
-    rid: str,
-    kbid: str,
-    field: str,
-    start: int,
-    end: int,
-    split: Optional[str] = None,
-    highlight: bool = False,
-    ematches: Optional[List[str]] = None,
-    matches: Optional[List[str]] = None,
-) -> str:
-    orm_resource = await get_resource_from_cache(kbid, rid)
-
-    if orm_resource is None:
-        logger.error(f"{rid} does not exist on DB")
-        return ""
-
-    _, field_type, field = field.split("/")
-    field_type_int = KB_REVERSE[field_type]
-    field_obj = await orm_resource.get_field(field, field_type_int, load=False)
-    extracted_text = await field_obj.get_extracted_text()
-    if extracted_text is None:
-        logger.warning(
-            f"{rid} {field} {field_type_int} extracted_text does not exist on DB"
-        )
-        return ""
-
-    if split not in (None, ""):
-        text = extracted_text.split_text[split]
-        splitted_text = text[start:end]
-    else:
-        splitted_text = extracted_text.text[start:end]
-
-    if highlight:
-        splitted_text = highlight_paragraph(
-            splitted_text, words=matches, ematches=ematches  # type: ignore
-        )
-    return splitted_text
-
-
 async def set_text_value(
     kbid: str,
     result_paragraph: TempFindParagraph,
     max_operations: asyncio.Semaphore,
     highlight: bool = False,
     ematches: Optional[List[str]] = None,
 ):
     # TODO: Improve
     await max_operations.acquire()
     try:
         assert result_paragraph.paragraph
         assert result_paragraph.paragraph.position
-        result_paragraph.paragraph.text = await get_text_find_paragraph(
-            rid=result_paragraph.rid,
+        result_paragraph.paragraph.text = await get_paragraph_text(
             kbid=kbid,
+            rid=result_paragraph.rid,
             field=result_paragraph.field,
             start=result_paragraph.paragraph.position.start,
             end=result_paragraph.paragraph.position.end,
             split=None,  # TODO
             highlight=highlight,
             ematches=ematches,
             matches=[],  # TODO
```

## nucliadb/search/search/merge.py

```diff
@@ -35,19 +35,15 @@
 )
 
 from nucliadb.search import logger
 from nucliadb.search.search.fetch import (
     fetch_resources,
     get_labels_paragraph,
     get_labels_resource,
-    get_resource_cache,
-    get_resource_from_cache,
     get_seconds_paragraph,
-    get_text_paragraph,
-    get_text_sentence,
 )
 from nucliadb_models.common import FieldTypeName
 from nucliadb_models.metadata import RelationTypePbMap
 from nucliadb_models.resource import ExtractedDataTypeName
 from nucliadb_models.search import (
     DirectionalRelation,
     EntitySubgraph,
@@ -68,15 +64,17 @@
     SortField,
     SortOptions,
     SortOrder,
     TextPosition,
 )
 from nucliadb_telemetry import errors
 
+from .cache import get_resource_cache, get_resource_from_cache
 from .metrics import merge_observer
+from .paragraphs import get_paragraph_text, get_text_sentence
 
 Bm25Score = Tuple[int, int]
 TimestampScore = datetime.datetime
 TitleScore = str
 Score = Union[Bm25Score, TimestampScore, TitleScore]
 
 
@@ -203,16 +201,24 @@
 
     if len(suggest_responses) > 1:
         sort_results_by_score(raw_paragraph_list)
 
     result_paragraph_list: List[Paragraph] = []
     for result in raw_paragraph_list[:10]:
         _, field_type, field = result.field.split("/")
-        text = await get_text_paragraph(
-            result, kbid, highlight=highlight, ematches=ematches  # type: ignore
+        text = await get_paragraph_text(
+            kbid=kbid,
+            rid=result.uuid,
+            field=result.field,
+            start=result.start,
+            end=result.end,
+            split=result.split,
+            highlight=highlight,
+            ematches=ematches,  # type: ignore
+            matches=result.matches,  # type: ignore
         )
         labels = await get_labels_paragraph(result, kbid)
         new_paragraph = Paragraph(
             score=result.score.bm25,
             rid=result.uuid,
             field_type=field_type,
             field=field,
@@ -351,15 +357,25 @@
 
     if length > end:
         next_page = True
 
     result_paragraph_list: List[Paragraph] = []
     for result, _ in raw_paragraph_list[min(skip, length) : min(end, length)]:
         _, field_type, field = result.field.split("/")
-        text = await get_text_paragraph(result, kbid, highlight, ematches)
+        text = await get_paragraph_text(
+            kbid=kbid,
+            rid=result.uuid,
+            field=result.field,
+            start=result.start,
+            end=result.end,
+            split=result.split,
+            highlight=highlight,
+            ematches=ematches,
+            matches=result.matches,  # type: ignore
+        )
         labels = await get_labels_paragraph(result, kbid)
         new_paragraph = Paragraph(
             score=result.score.bm25,
             rid=result.uuid,
             field_type=field_type,
             field=field,
             text=text,
```

## nucliadb/search/tests/fixtures.py

```diff
@@ -110,16 +110,16 @@
     await application.router.startup()
 
     # Make sure is clean
     await asyncio.sleep(1)
     count = 0
     while len(NODES) < 2:
         print("awaiting cluster nodes - search fixtures.py")
-        await asyncio.sleep(4)
-        if count == 10:
+        await asyncio.sleep(1)
+        if count == 40:
             raise Exception("No cluster")
         count += 1
 
     def make_client_fixture(
         roles: Optional[List[Enum]] = None,
         user: str = "",
         version: str = "1",
@@ -145,16 +145,16 @@
 
         return client
 
     yield make_client_fixture
     await application.router.shutdown()
     # Make sure nodes can sync
     await asyncio.sleep(1)
-    driver = aioredis.from_url(f"redis://{redis[0]}:{redis[1]}")
     await driver.flushall()
+    await driver.close(close_connection_pool=True)
     clear_ingest_cache()
     clear_global_cache()
     for node in NODES.values():
         node._reader = None
         node._writer = None
         node._sidecar = None
```

## nucliadb/writer/tests/fixtures.py

```diff
@@ -70,16 +70,16 @@
     await application.router.startup()
     yield make_client_fixture
     await application.router.shutdown()
     clear_storage()
     processing = get_processing()
     processing.calls = []
 
-    driver = aioredis.from_url(f"redis://{redis[0]}:{redis[1]}")
     await driver.flushall()
+    await driver.close(close_connection_pool=True)
 
 
 @pytest.fixture(scope="function")
 async def gcs_storage_writer(gcs):
     storage_settings.gcs_endpoint_url = gcs
     storage_settings.file_backend = "gcs"
     storage_settings.gcs_bucket = "test_{kbid}"
```

## Comparing `nucliadb-2.7.0.post198.dist-info/METADATA` & `nucliadb-2.7.0.post199.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: nucliadb
-Version: 2.7.0.post198
+Version: 2.7.0.post199
 Summary: UNKNOWN
 Home-page: https://nucliadb.com
 Author: NucliaDB Community
 Author-email: nucliadb@nuclia.com
 License: BSD
 Project-URL: Nuclia, https://nuclia.com
 Project-URL: Github, https://github.com/nuclia/nucliadb
@@ -54,17 +54,17 @@
 Requires-Dist: mmh3 (>=3.0.0)
 Requires-Dist: httpx (>=0.23.0)
 Requires-Dist: types-pkg-resources (>=0.1.3)
 Requires-Dist: grpc-stubs (>=1.24.7)
 Requires-Dist: aiodns (>=3.0.0)
 Requires-Dist: types-orjson
 Requires-Dist: nucliadb-telemetry (>=1.8.0)
-Requires-Dist: nucliadb-utils[cache,fastapi,storages] (==2.7.0-post198)
-Requires-Dist: nucliadb-protos (==2.7.0-post198)
-Requires-Dist: nucliadb-models (==2.7.0-post198)
+Requires-Dist: nucliadb-utils[cache,fastapi,storages] (==2.7.0-post199)
+Requires-Dist: nucliadb-protos (==2.7.0-post199)
+Requires-Dist: nucliadb-models (==2.7.0-post199)
 Requires-Dist: nucliadb-contributor-assets (~=1.0.0)
 Requires-Dist: tikv-client (>=0.0.3)
 Requires-Dist: prometheus-client (>=0.12.0)
 Requires-Dist: opentelemetry-instrumentation-aiohttp-client (>=0.30b1)
 Requires-Dist: opentelemetry-semantic-conventions (>=0.30b1)
 Requires-Dist: opentelemetry-instrumentation-fastapi (>=0.30b1)
 Requires-Dist: opentelemetry-propagator-b3
```

## Comparing `nucliadb-2.7.0.post198.dist-info/entry_points.txt` & `nucliadb-2.7.0.post199.dist-info/entry_points.txt`

 * *Files identical despite different names*

## Comparing `nucliadb-2.7.0.post198.dist-info/RECORD` & `nucliadb-2.7.0.post199.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -5,27 +5,27 @@
 nucliadb/purge.py,sha256=y5uFOK3YQU9XgehSSjYiEZCiB0F8qukgI18Hgw2Dy-o,1393
 nucliadb/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 nucliadb/run.py,sha256=6mD0gMbBgl5VgVc8Ic3LxUHgzT9lkZRhql-xNC41J9w,3268
 nucliadb/settings.py,sha256=GP2hJAYSLXO3mUopKrH4rgwOgX4M1n-_gHLd6UvI-60,1945
 nucliadb/ingest/__init__.py,sha256=fsw3C38VP50km3R-nHL775LNGPpJ4JxqXJ2Ib1f5SqE,1011
 nucliadb/ingest/app.py,sha256=zewc8tjuhKZjVov127VXZ6f1E76fbMZmSbvRXvSHBG0,6354
 nucliadb/ingest/cache.py,sha256=XPmNNa6KP7P5Mp0Iivl3vIFFMz9rOs9POpHkzj9wpwU,995
-nucliadb/ingest/chitchat.py,sha256=04rU7KXUvMbYVpdXL5TY7i9M2Bo0lYCVjVYC9d0rqHA,6975
+nucliadb/ingest/chitchat.py,sha256=UilZcGl9LqHEiyongdGbQR5_FD13VzbUq_XfnAHt2_E,7028
 nucliadb/ingest/partitions.py,sha256=a3fXq3DwRiDjcQNBcUtDTra8prIf-r5_z0B69ll_pag,2425
 nucliadb/ingest/processing.py,sha256=FicanxeoCPeXyD4ohb7HqaR0r6jRQdy7w5e_GGRcD3k,14757
 nucliadb/ingest/purge.py,sha256=vCtIr2LZph6AcMpXaRxYhk2Dvmw_Sf7sXvUKDG46c40,5463
 nucliadb/ingest/serialize.py,sha256=IEWub60ECe9jBJxq561xxN3DlTYXfWGR9btTiwLRPL4,17721
 nucliadb/ingest/settings.py,sha256=t5DZgAztHJypjiMmE7xUEpNqnMjdTxPLb62sxpvkDpE,2961
 nucliadb/ingest/txn_utils.py,sha256=qM5-531Yjjp_MRGlXNmTDkJVx2vmiFKMK6bho-rPSD8,2531
 nucliadb/ingest/utils.py,sha256=yo6Ap1yw5M3BOx6YA00xkmrTlduRHUuFmU0dA8tYMkM,4286
 nucliadb/ingest/consumer/__init__.py,sha256=7Bi0uZMbpYNrqPpWGATaWYd5wn_k5cfVSS_FGYmJspc,1087
 nucliadb/ingest/consumer/pull.py,sha256=G7aiQJn_CRq9Z9xKm3Urf-Bk3rfGauhq4GXRrHUFOFQ,17915
 nucliadb/ingest/consumer/service.py,sha256=fEG7rwIuikUdZ3UkGnE3k35nqpzzud1r9J2LhCBHbmM,6425
 nucliadb/ingest/fields/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
-nucliadb/ingest/fields/base.py,sha256=fEh3CSXkgWXkhsGBcUYx18a7iBD6xBXJq-4GSGWEnUU,20415
+nucliadb/ingest/fields/base.py,sha256=B_YDbCMyULfQVqZAK5LAwPea1V5hpV8VTW_sw9Vca28,19273
 nucliadb/ingest/fields/conversation.py,sha256=v5h5GrdvKW_hB2DYloyV0qlzIK1QF3CX4nI0GCp9M90,6823
 nucliadb/ingest/fields/date.py,sha256=jXMWfdCv87oVySDQORXhMZ1Zvpw_aOpcrYAfUSnL3uA,1223
 nucliadb/ingest/fields/exceptions.py,sha256=J0nqFK89OhckJ0GMPrT2vVAdIHpYwDK3UoYQXOHuA_M,1205
 nucliadb/ingest/fields/file.py,sha256=RtLlnDuT3bueO7V0gnm_i_P1lUCG9l6CZFky0fFCCgg,5159
 nucliadb/ingest/fields/generic.py,sha256=3bW323aCVapc_iFL4epcuYtY6L4tOsEQM5phCFYLnqU,1523
 nucliadb/ingest/fields/keywordset.py,sha256=mLpitqGiSH3IilHCEo2ZGg3laTOMoZ5qc_DVbV3UECA,1235
 nucliadb/ingest/fields/layout.py,sha256=clgBVGWArtkAEawDqCAu_hB9gVu5c6UT1Cf_5yrw47s,2250
@@ -58,15 +58,15 @@
 nucliadb/ingest/orm/synonyms.py,sha256=BuqS8XxLLVP124zPLGISgrmQg94LdalaTHeOVp_6dIY,1739
 nucliadb/ingest/orm/utils.py,sha256=9vTugcLweai69WWinatWm1RTyukJEDDte3qXNLqS7pI,3340
 nucliadb/ingest/service/__init__.py,sha256=79pKu4eNXDmflkf2qLhY5uxUUHl5UiyA3RBVBHmLDRI,2817
 nucliadb/ingest/service/exceptions.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/ingest/service/writer.py,sha256=vnBEjTjUm9zDAkv7iXEliEv-rF_PNq_irNy86-vOxfs,36295
 nucliadb/ingest/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/ingest/tests/conftest.py,sha256=vu6f6UsfajjAZwBcbecc7xvRZpr7Yqj7qxalHYtgRtE,1096
-nucliadb/ingest/tests/fixtures.py,sha256=8MackxlUl36NE-TJqT8WKHFG0lGfvtVEF2DMUGBa2Ws,25082
+nucliadb/ingest/tests/fixtures.py,sha256=lJYa6RpkDvEKJ40tzcC0PpbnKiY2PXvzcWTWfNEfMJ8,25069
 nucliadb/ingest/tests/tikv.py,sha256=MGwBL9ezcOOR8JwttouQ8Qj6534d742i2A3TAumdrM4,7549
 nucliadb/ingest/tests/vectors.py,sha256=CcNKx-E8LPpyvRyljbmb-Tn_wST9Juw2CBoogWrKiTk,62843
 nucliadb/ingest/tests/integration/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/ingest/tests/integration/ingest/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/ingest/tests/integration/ingest/test_ingest.py,sha256=dTzOf9ZnnLgywLl4PKOlD3dKFyb_5EeKchvaPZt_bkA,27277
 nucliadb/ingest/tests/integration/ingest/test_processing_engine.py,sha256=EPXe105v5vHPHUuqHXnj74_AsSm_mAn52n1MjvR9P8w,2339
 nucliadb/ingest/tests/integration/ingest/test_relations.py,sha256=rIB4-LoWxrez66bIXGrIUwt-Lc4dzeJyIlgwkf1Jyn8,8606
@@ -89,15 +89,15 @@
 nucliadb/models/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/models/responses.py,sha256=ySnO1-NLZoeK-ud3d1YcmmBeznsG7m2pyX2KdKzSTRQ,1587
 nucliadb/one/__init__.py,sha256=M4YAQYYehaKJpZUa__l6DGhK2VGRejMAn33tXZuVwA0,914
 nucliadb/one/app.py,sha256=KzBdw2Yvxcq1DtmzEe0PRpeNcpKhM4lE8TTZqlrYfKI,3539
 nucliadb/one/lifecycle.py,sha256=W8_2rR6R_Vi8PzXQaWyQPzD4Qfr6_J2odLxdUKMwtKU,2130
 nucliadb/one/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/one/tests/conftest.py,sha256=qmJ2toIbFRAEyoHbv68-xl2XQjBuT0e3CuZ5ert21xs,1164
-nucliadb/one/tests/fixtures.py,sha256=qCW0yRGFMR80iD1P_0e0iz7QGOVNQSTSDvqEM3QrM_s,3678
+nucliadb/one/tests/fixtures.py,sha256=4wblE8GPXzmfv9j05OAoBDbAMyxTr2zhjPlRotmrjLQ,3665
 nucliadb/one/tests/test_basic.py,sha256=tLBcofx01zABlnetZHD9QxZ7ysGmiT6QRJtYEOOjKBg,2561
 nucliadb/one/tests/test_delete_field.py,sha256=qXa2fgG-RYNBPneqQtX9HdroDSn2qR0ZULXQPQ9fClU,2492
 nucliadb/one/tests/test_fieldmetadata.py,sha256=-V5K3mJfBLcEAx4jLjskYIZlKChOL90eEM8WLFzPTeE,6087
 nucliadb/one/tests/test_services.py,sha256=XVXqcP62323FLNyJinemnmG5cGBWPNHX0FRJmX1G4mw,4594
 nucliadb/one/tests/test_upload_download.py,sha256=h8hRtbdGuUZuTB7dHTZsakzu7Y1C0dkTIAJpwEtQjHs,4067
 nucliadb/reader/__init__.py,sha256=TxsAOWhRnz9l8DuFy-Qfv0I5HrzrysaxtAzogg6FQB8,1328
 nucliadb/reader/app.py,sha256=O1EjL9LRuNhrMQSf6gJZ68L1jl-77bo3ZIhzPRL4ceA,3356
@@ -118,45 +118,57 @@
 nucliadb/reader/tests/test_list_resources.py,sha256=zHJLCn3Pi8unt-NGBTftND-2ByVpLd2nDgpfG_qp1JU,2749
 nucliadb/reader/tests/test_reader_file_download.py,sha256=TS1yD-xfVJuVbPesoErNRpTOvOkWCzuAl83pq_U3ZU8,9946
 nucliadb/reader/tests/test_reader_resource.py,sha256=hFP7WZYBqisGKY4iqNGJx1QlTR3HLHUhCAxRXF95DzA,11359
 nucliadb/reader/tests/test_reader_resource_field.py,sha256=YQ-U2mEGhs_rPGxcWPZmWLSEoCxBo3AVDtLZCtZrGb8,6535
 nucliadb/search/__init__.py,sha256=fwzdF6p7p9uDCtE38gTUxrRVIdbEDVQTAXWUMVKgSBM,1535
 nucliadb/search/app.py,sha256=CSuIzLlHhMVqs83mL3kyravl6lgoLva9sS_yYhAstvg,4562
 nucliadb/search/chitchat.py,sha256=K2emuucKhI5MP5tGlBJfT-F2ChiEXTEz85deUrjgZJM,1848
-nucliadb/search/lifecycle.py,sha256=QLpDCs6IE1O1H57cwKjaRw27mIlyQpdQpvlQWWXuxfE,3087
+nucliadb/search/lifecycle.py,sha256=Bued6AGMKgoxlkA3Yo5at44ZXsiEMzrriU0BiltPMms,3174
 nucliadb/search/openapi.py,sha256=VI3-DrfuX38IwRTC62QMs5mYe5v7v5KQ1BsiNT2sPH8,2206
 nucliadb/search/predict.py,sha256=f7RqhAhmaf4A9yif-AJSfuBspaFF7OJb402xQf9hWgk,10222
 nucliadb/search/run.py,sha256=7_cQGTSBc-J6LO4qALCCO5N8RUxPg3BWU0ErZfufLcg,1296
-nucliadb/search/settings.py,sha256=5cdoCp9og2qcXTDQXuvE-ilGDDsddXiPlmjHq2zgcMg,978
+nucliadb/search/settings.py,sha256=AQUXreB6YjT48x-g09-om1TpA5dX9OLWhzTy6026LZ4,1108
 nucliadb/search/utilities.py,sha256=tlh048ZoFv-pUSjePiE-f_9J4nEqsJstQmhwS6Ke7Yw,1238
 nucliadb/search/api/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/search/api/v1/__init__.py,sha256=yljyGyrWNKsGuVewTnxB6CmDKGgdsu7dfkS67mZcUUA,1077
 nucliadb/search/api/v1/chat.py,sha256=zSgZziBejDqM88aQHZP333X4WpytoFsD9cP9PXPbu_M,6843
 nucliadb/search/api/v1/feedback.py,sha256=xzUdWLM921vwNZYOuPvPog2A4VdEjWsN8b_5YdL5qxw,1831
 nucliadb/search/api/v1/find.py,sha256=TEdnLMnSfuyjJbXxz-MjU0o7_-mCl5nwfv-y3_de0MQ,9579
 nucliadb/search/api/v1/knowledgebox.py,sha256=Hv-_x4f7QbRZcWoSoreUHSxzIytWe390-3QdtL7ATa8,6938
 nucliadb/search/api/v1/resource.py,sha256=i2LEtLeMyJyvS8HayIM0P8T2On0cQmLUAHqlYA8_pqs,4781
 nucliadb/search/api/v1/router.py,sha256=QCO76-kVgkIlX9sG9ygoruo_0amRYdqfqR53aQsWpCA,980
 nucliadb/search/api/v1/search.py,sha256=r0idrJrGfdFyqlwuxmj66chAJ2TyzsuLFEmiBIpdSEs,11487
 nucliadb/search/api/v1/suggest.py,sha256=fp0ef1BMhkjX8kyTmR3aEmKrXHg2Q6J6FdcTVoGSO2I,4212
 nucliadb/search/requesters/__init__.py,sha256=itSI7dtTwFP55YMX4iK7JzdMHS5CQVUiB1XzQu4UBh8,833
 nucliadb/search/requesters/utils.py,sha256=JVuQVUdtBL5RZC3zhbZHoEnJS3vbw49E9Zm9wI0IegE,5873
 nucliadb/search/search/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
-nucliadb/search/search/fetch.py,sha256=k1ciJG2Xqx4MvprJM1kh8enoNbH0N9etM2bR6VMT8CA,11301
-nucliadb/search/search/find_merge.py,sha256=KnZy2BlPvw9ezZQhhvk_EsdKfhWruFb3X7X31YcZqUs,14808
-nucliadb/search/search/merge.py,sha256=Jt5EwMy5dcYnQps0dK67Zut9J-u7O0I8lk4LOOK57so,18361
+nucliadb/search/search/cache.py,sha256=UbphtFPAkWX4Ml6kE63KbtDBoRgK-QCaklw841biTmg,2408
+nucliadb/search/search/fetch.py,sha256=UEDIkM9l_A87QPG_RCSPNd69cPo3noo40T8JFPP5VJA,5337
+nucliadb/search/search/find_merge.py,sha256=Jze3HbN8WvR3oiPdwAF_nGCu14LdJ7ZniRG5Xm1oBKw,13543
+nucliadb/search/search/merge.py,sha256=SM3utfBvdPpoQA49q-KrAMmDMYmC4bbFFP1mue9HpNY,18881
 nucliadb/search/search/metrics.py,sha256=CerbY5THtN6JbyTIRFBLAYGObdbHNO_WPv4YJBwnf5s,947
+nucliadb/search/search/paragraphs.py,sha256=sgUXa0IkO7pc1inDlOmbj1lxVaqsf5L-ALXunQpuf9U,11002
 nucliadb/search/search/query.py,sha256=RHHoBnT4Zp7A0mCFUkmel8lMfdTOcQyV6Vtg7O5xxVs,9905
 nucliadb/search/search/shards.py,sha256=sgyhpE8mCqlXaUB9PNb7Zt_MFKgvEso9CNWJXQKzFcE,2647
 nucliadb/search/search/synonyms.py,sha256=PTViRCiSA7o4JWXSHuGMb_khwWlKAMxNjwv7tbeQ9-I,2055
 nucliadb/search/search/utils.py,sha256=jPPags_EiZ6c5k6jysOQnpzFlwz0jJYeXYuBt2Vn9NU,2410
 nucliadb/search/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/search/tests/conftest.py,sha256=h15XytM2zllGvGBjsMfIWmI63pXaQk8tAEzq-1Fy5ts,1172
-nucliadb/search/tests/fixtures.py,sha256=AVjksGQ9-JmewPPubUMCxXZo2nVtNgcBQie9n2tGxQ8,7781
+nucliadb/search/tests/fixtures.py,sha256=AVxPUPCbkyJ66G2AH-YLCOvPzgoXUhpQLaeV207wtmU,7767
 nucliadb/search/tests/node.py,sha256=jpYHQRZ8GoE2nSb6_r2clc5vaS48sRbHjBhuo3lAiLs,16225
+nucliadb/search/tests/unit/__init__.py,sha256=itSI7dtTwFP55YMX4iK7JzdMHS5CQVUiB1XzQu4UBh8,833
+nucliadb/search/tests/unit/test_app.py,sha256=I44MFQVbiUBLNVxni3pudxiLXF6za_GU8r2B7R7XWcI,1560
+nucliadb/search/tests/unit/test_find_orderer.py,sha256=asqLNKsoAB2HezN6uv_tcNQyIfgTCXWOVahhkz3l_7s,1498
+nucliadb/search/tests/unit/test_openapi.py,sha256=Jx8RDeeDBq_DlJQ9dcyTF9xwSTNImHqlP96rbP1DoxY,1329
+nucliadb/search/tests/unit/test_predict.py,sha256=XkatSURIV_srCfiVUrOuqDP8O1_4WahFj1H0NKxQy1M,6663
+nucliadb/search/tests/unit/test_run.py,sha256=h9wnfLOTn3qzX7cn7nyfNcJj69wqX3IE6loBLUnW_o4,1258
+nucliadb/search/tests/unit/search/__init__.py,sha256=itSI7dtTwFP55YMX4iK7JzdMHS5CQVUiB1XzQu4UBh8,833
+nucliadb/search/tests/unit/search/test_fetch.py,sha256=YKEhS3yUcirzZXAwauhKeOo5v7pvAh6dzuiSMIRx9xg,3736
+nucliadb/search/tests/unit/search/test_paragraphs.py,sha256=HNLk2zQFdcq2y4EdgpWqs4DauXuEu15-pywVb2oGQAk,4596
+nucliadb/search/tests/unit/search/test_synonyms.py,sha256=YH5tHHN3O-finPVRzN7v7Ng_zoHT2dRUUXn3QcHRqTM,2512
 nucliadb/static/favicon.ico,sha256=96pKGp6Sx457JkTfjy1dtApMhkitixfU6invCUGAYOU,2285
 nucliadb/static/index.html,sha256=PEZfuEQFYnYACAL1ceN8xC0im8lBrUx838RkE8tbvgA,3833
 nucliadb/static/logo.svg,sha256=-wQqSvPGTdlKjUP6pHE6kiq005pgYjDzp9nPl0X71Mk,2639
 nucliadb/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/tests/conftest.py,sha256=LZPZqJ0rflIyeiNeHGIZYLMTBCZr83r77BZsnRaSTtQ,1000
 nucliadb/tests/fixtures.py,sha256=wNNKbXyrFqnCD5NDaNONw9cXqmsjgXyeNmgwf9s_5aY,11528
 nucliadb/tests/test_advanced_search.py,sha256=OHPlTHOqmQCRrALruQ5vs13t6Yo4Cc5-mhVf0E8lphI,7370
@@ -252,15 +264,15 @@
 nucliadb/writer/resource/basic.py,sha256=ctoCcloYDB4_J9PBucMJoBiYxUDKeuKjPYuIq_mR96U,8872
 nucliadb/writer/resource/field.py,sha256=Dhn9gVoRn_RtQNXXhm7TEWsP-0-cqwVSfQcN_tfhVN4,15695
 nucliadb/writer/resource/origin.py,sha256=tnM8VW7vkrc_Sfql6QtDlxzuEsF_kJn4F56xjZvetfU,1708
 nucliadb/writer/resource/slug.py,sha256=xaYHmlooQTdaE8meuMTpbz11hVuOcMrAwculNf-uao4,1151
 nucliadb/writer/resource/vectors.py,sha256=-Z4vSwC632Prx6CBBE9X7Qx8QNkYUEXvn7j1KbZftz4,4991
 nucliadb/writer/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/writer/tests/conftest.py,sha256=NytcRRhwL17WbxXlyDP3N0-Z_yIH9qshNGf4xvzg4j0,1144
-nucliadb/writer/tests/fixtures.py,sha256=moOoCP1V1aBTYX_RDGkYv87dW27LbMsWLwGy_a7OAVs,4275
+nucliadb/writer/tests/fixtures.py,sha256=-VcCHs_1-sXETJUWDsSewNFrI0WCthl94eDm9r57CM0,4261
 nucliadb/writer/tests/test_fields.py,sha256=5uPe9VSVkdAHdva8snKzj3DtUuhwqN1wQxduGtEVtic,16585
 nucliadb/writer/tests/test_files.py,sha256=OmWDSXIXteQozSkXH9q498rhSmAk5eHCZa7T2evP-Ak,21645
 nucliadb/writer/tests/test_knowledgebox.py,sha256=W8wJ5Ik1NIIDwCeoDKqA6Wo5Vhvbe-VKTXT6q7f5Txs,1932
 nucliadb/writer/tests/test_reprocess_file_field.py,sha256=_nQOauQhnQz-ZsD_jaHqa3UPX8rB2ejU1ZZu4g03roA,4747
 nucliadb/writer/tests/test_resources.py,sha256=acHO29yYln4WguBjTbyqRbau4VQBiD1dzs0F02v4dUI,19059
 nucliadb/writer/tests/test_service.py,sha256=kau-mAhj6r3nPO1-zT0r_OJeU6uuZcn0l0ZB8Qcpbys,5345
 nucliadb/writer/tests/test_tus.py,sha256=-ggQckT2Te11wH58Q_SlUk23350OrxDkXzzlaeS8vDY,3596
@@ -270,13 +282,13 @@
 nucliadb/writer/tus/dm.py,sha256=SnRSZhN35XgGRWUdcxXQ-Iu7Ae182MfRQEKj467hrJc,4396
 nucliadb/writer/tus/exceptions.py,sha256=CmxYKnHXpXug25DYV4SpVAU47SGD-NVBd7pNTRbWHyk,2186
 nucliadb/writer/tus/gcs.py,sha256=DdnCTwtd3N87yaPUl-n3LJfUDdHVGav-w1LBOUnUNWg,13818
 nucliadb/writer/tus/local.py,sha256=BM2_uZwh3qd4CsGaIzNL4EBzv9lNjgtSP0cnLPdMJek,5811
 nucliadb/writer/tus/s3.py,sha256=5gpiYTGAJsLN2j55FBSq-E9kLbMn5tvNDZeNRzo3yj0,8571
 nucliadb/writer/tus/storage.py,sha256=Ba085-LkOjbHsYKh6u3NA40b1PSPzS20YHJqIa6kvG0,4682
 nucliadb/writer/tus/utils.py,sha256=40VRRKjKJgt-pYbWH9eX-jnQFze1_NkqI8ehe-wSZ8U,2580
-nucliadb-2.7.0.post198.dist-info/METADATA,sha256=vQa4olkQAXd6LtlX16wNdMakdFyj8iGp0yT8xzEgMVc,3196
-nucliadb-2.7.0.post198.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-nucliadb-2.7.0.post198.dist-info/entry_points.txt,sha256=iaPREOmF1t002PpqUQgCy10P5s9WbbZYONq7ierSuig,710
-nucliadb-2.7.0.post198.dist-info/top_level.txt,sha256=K5XbWCHfZ7wve-wIrOSTuE0y-jVJSKVS9ZTDJ4TKhKQ,9
-nucliadb-2.7.0.post198.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
-nucliadb-2.7.0.post198.dist-info/RECORD,,
+nucliadb-2.7.0.post199.dist-info/METADATA,sha256=J73ZbOW89tvwytYffOqL5D8s-0A_4tvVkjrGUWj0lrQ,3196
+nucliadb-2.7.0.post199.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+nucliadb-2.7.0.post199.dist-info/entry_points.txt,sha256=iaPREOmF1t002PpqUQgCy10P5s9WbbZYONq7ierSuig,710
+nucliadb-2.7.0.post199.dist-info/top_level.txt,sha256=K5XbWCHfZ7wve-wIrOSTuE0y-jVJSKVS9ZTDJ4TKhKQ,9
+nucliadb-2.7.0.post199.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
+nucliadb-2.7.0.post199.dist-info/RECORD,,
```

