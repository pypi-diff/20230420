# Comparing `tmp/fauna-0.6.0-py2.py3-none-any.whl.zip` & `tmp/fauna-0.6.1-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,26 +1,26 @@
-Zip file size: 24892 bytes, number of entries: 24
--rw-r--r--  2.0 unx      287 b- defN 23-Apr-13 19:31 fauna/__init__.py
--rw-r--r--  2.0 unx      102 b- defN 23-Apr-13 19:31 fauna/client/__init__.py
--rw-r--r--  2.0 unx    18707 b- defN 23-Apr-13 19:31 fauna/client/client.py
--rw-r--r--  2.0 unx       90 b- defN 23-Apr-13 19:31 fauna/client/endpoints.py
--rw-r--r--  2.0 unx     3190 b- defN 23-Apr-13 19:31 fauna/client/headers.py
--rw-r--r--  2.0 unx     2213 b- defN 23-Apr-13 19:31 fauna/client/utils.py
--rw-r--r--  2.0 unx      161 b- defN 23-Apr-13 19:31 fauna/encoding/__init__.py
--rw-r--r--  2.0 unx     5974 b- defN 23-Apr-13 19:31 fauna/encoding/decoder.py
--rw-r--r--  2.0 unx     7995 b- defN 23-Apr-13 19:31 fauna/encoding/encoder.py
--rw-r--r--  2.0 unx     5991 b- defN 23-Apr-13 19:31 fauna/encoding/wire_protocol.py
--rw-r--r--  2.0 unx      361 b- defN 23-Apr-13 19:31 fauna/errors/__init__.py
--rw-r--r--  2.0 unx     4853 b- defN 23-Apr-13 19:31 fauna/errors/errors.py
--rw-r--r--  2.0 unx       88 b- defN 23-Apr-13 19:31 fauna/http/__init__.py
--rw-r--r--  2.0 unx     1201 b- defN 23-Apr-13 19:31 fauna/http/http_client.py
--rw-r--r--  2.0 unx     2323 b- defN 23-Apr-13 19:31 fauna/http/httpx_client.py
--rw-r--r--  2.0 unx      139 b- defN 23-Apr-13 19:31 fauna/query/__init__.py
--rw-r--r--  2.0 unx     8599 b- defN 23-Apr-13 19:31 fauna/query/models.py
--rw-r--r--  2.0 unx     4005 b- defN 23-Apr-13 19:31 fauna/query/query_builder.py
--rw-r--r--  2.0 unx     2851 b- defN 23-Apr-13 19:31 fauna/query/template.py
--rw-r--r--  2.0 unx      545 b- defN 23-Apr-13 19:35 fauna-0.6.0.dist-info/LICENSE
--rw-r--r--  2.0 unx     7073 b- defN 23-Apr-13 19:35 fauna-0.6.0.dist-info/METADATA
--rw-r--r--  2.0 unx      110 b- defN 23-Apr-13 19:35 fauna-0.6.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        6 b- defN 23-Apr-13 19:35 fauna-0.6.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1903 b- defN 23-Apr-13 19:35 fauna-0.6.0.dist-info/RECORD
-24 files, 78767 bytes uncompressed, 21842 bytes compressed:  72.3%
+Zip file size: 25145 bytes, number of entries: 24
+-rw-r--r--  2.0 unx      301 b- defN 23-Apr-20 18:13 fauna/__init__.py
+-rw-r--r--  2.0 unx      102 b- defN 23-Apr-20 18:13 fauna/client/__init__.py
+-rw-r--r--  2.0 unx    18705 b- defN 23-Apr-20 18:13 fauna/client/client.py
+-rw-r--r--  2.0 unx       90 b- defN 23-Apr-20 18:13 fauna/client/endpoints.py
+-rw-r--r--  2.0 unx     3190 b- defN 23-Apr-20 18:13 fauna/client/headers.py
+-rw-r--r--  2.0 unx     2213 b- defN 23-Apr-20 18:13 fauna/client/utils.py
+-rw-r--r--  2.0 unx      161 b- defN 23-Apr-20 18:13 fauna/encoding/__init__.py
+-rw-r--r--  2.0 unx     6450 b- defN 23-Apr-20 18:13 fauna/encoding/decoder.py
+-rw-r--r--  2.0 unx     8122 b- defN 23-Apr-20 18:13 fauna/encoding/encoder.py
+-rw-r--r--  2.0 unx     5991 b- defN 23-Apr-20 18:13 fauna/encoding/wire_protocol.py
+-rw-r--r--  2.0 unx      361 b- defN 23-Apr-20 18:13 fauna/errors/__init__.py
+-rw-r--r--  2.0 unx     4853 b- defN 23-Apr-20 18:13 fauna/errors/errors.py
+-rw-r--r--  2.0 unx       88 b- defN 23-Apr-20 18:13 fauna/http/__init__.py
+-rw-r--r--  2.0 unx     1201 b- defN 23-Apr-20 18:13 fauna/http/http_client.py
+-rw-r--r--  2.0 unx     2323 b- defN 23-Apr-20 18:13 fauna/http/httpx_client.py
+-rw-r--r--  2.0 unx      153 b- defN 23-Apr-20 18:13 fauna/query/__init__.py
+-rw-r--r--  2.0 unx     9411 b- defN 23-Apr-20 18:13 fauna/query/models.py
+-rw-r--r--  2.0 unx     4005 b- defN 23-Apr-20 18:13 fauna/query/query_builder.py
+-rw-r--r--  2.0 unx     2851 b- defN 23-Apr-20 18:13 fauna/query/template.py
+-rw-r--r--  2.0 unx      545 b- defN 23-Apr-20 19:47 fauna-0.6.1.dist-info/LICENSE
+-rw-r--r--  2.0 unx     7073 b- defN 23-Apr-20 19:47 fauna-0.6.1.dist-info/METADATA
+-rw-r--r--  2.0 unx      110 b- defN 23-Apr-20 19:47 fauna-0.6.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        6 b- defN 23-Apr-20 19:47 fauna-0.6.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1903 b- defN 23-Apr-20 19:47 fauna-0.6.1.dist-info/RECORD
+24 files, 80208 bytes uncompressed, 22095 bytes compressed:  72.5%
```

## zipnote {}

```diff
@@ -51,23 +51,23 @@
 
 Filename: fauna/query/query_builder.py
 Comment: 
 
 Filename: fauna/query/template.py
 Comment: 
 
-Filename: fauna-0.6.0.dist-info/LICENSE
+Filename: fauna-0.6.1.dist-info/LICENSE
 Comment: 
 
-Filename: fauna-0.6.0.dist-info/METADATA
+Filename: fauna-0.6.1.dist-info/METADATA
 Comment: 
 
-Filename: fauna-0.6.0.dist-info/WHEEL
+Filename: fauna-0.6.1.dist-info/WHEEL
 Comment: 
 
-Filename: fauna-0.6.0.dist-info/top_level.txt
+Filename: fauna-0.6.1.dist-info/top_level.txt
 Comment: 
 
-Filename: fauna-0.6.0.dist-info/RECORD
+Filename: fauna-0.6.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## fauna/__init__.py

```diff
@@ -1,10 +1,10 @@
 __title__ = "Fauna"
-__version__ = "0.6.0"
+__version__ = "0.6.1"
 __api_version__ = "10"
 __author__ = "Fauna, Inc"
 __license__ = "MPL 2.0"
 __copyright__ = "2023 Fauna, Inc"
 
-from fauna.query import fql, Document, DocumentReference, NamedDocument, NamedDocumentReference, Module, Page
+from fauna.query import fql, Document, DocumentReference, NamedDocument, NamedDocumentReference, NullDocument, Module, Page
 
 global_http_client = None
```

## fauna/client/client.py

```diff
@@ -203,15 +203,15 @@
             err_msg = f"'fql' must be a Query but was a {type(fql)}. You can build a " \
                        f"Query by calling fauna.fql()"
             raise TypeError(err_msg)
 
         try:
             encoded_query: Mapping[str, Any] = FaunaEncoder.encode(fql)
         except Exception as e:
-            raise ClientError("Failed to evaluate Query") from e
+            raise ClientError("Failed to encode Query") from e
 
         return self._query(
             "/query/1",
             fql=encoded_query,
             opts=opts,
         )
```

## fauna/encoding/decoder.py

```diff
@@ -1,48 +1,51 @@
-from typing import Any, List
+from typing import Any, List, Union
 
 from iso8601 import parse_date
 
-from fauna.query.models import Module, DocumentReference, Document, NamedDocument, NamedDocumentReference, Page
+from fauna.query.models import Module, DocumentReference, Document, NamedDocument, NamedDocumentReference, Page, \
+    NullDocument
 
 
 class FaunaDecoder:
     """Supports the following types:
 
-     +-------------------+---------------+
-     | Python            | Fauna         |
-     +===================+===============+
-     | dict              | object        |
-     +-------------------+---------------+
-     | list, tuple       | array         |
-     +-------------------+---------------+
-     | str               | string        |
-     +-------------------+---------------+
-     | int               | @int          |
-     +-------------------+---------------+
-     | int               | @long         |
-     +-------------------+---------------+
-     | float             | @double       |
-     +-------------------+---------------+
-     | datetime.datetime | @time         |
-     +-------------------+---------------+
-     | datetime.date     | @date         |
-     +-------------------+---------------+
-     | True              | true          |
-     +-------------------+---------------+
-     | False             | false         |
-     +-------------------+---------------+
-     | None              | null          |
-     +-------------------+---------------+
-     | DocumentReference | @doc          |
-     +-------------------+---------------+
-     | Module            | @mod          |
-     +-------------------+---------------+
-     | Page              | @set          |
-     +-------------------+---------------+
+     +--------------------+---------------+
+     | Python             | Fauna         |
+     +====================+===============+
+     | dict               | object        |
+     +--------------------+---------------+
+     | list, tuple        | array         |
+     +--------------------+---------------+
+     | str                | string        |
+     +--------------------+---------------+
+     | int                | @int          |
+     +--------------------+---------------+
+     | int                | @long         |
+     +--------------------+---------------+
+     | float              | @double       |
+     +--------------------+---------------+
+     | datetime.datetime  | @time         |
+     +--------------------+---------------+
+     | datetime.date      | @date         |
+     +--------------------+---------------+
+     | True               | true          |
+     +--------------------+---------------+
+     | False              | false         |
+     +--------------------+---------------+
+     | None               | null          |
+     +--------------------+---------------+
+     | *DocumentReference | @ref          |
+     +--------------------+---------------+
+     | *Document          | @doc          |
+     +--------------------+---------------+
+     | Module             | @mod          |
+     +--------------------+---------------+
+     | Page               | @set          |
+     +--------------------+---------------+
 
      """
 
     @staticmethod
     def decode(obj: Any):
         """Decodes supported objects from the tagged typed into untagged.
 
@@ -130,23 +133,32 @@
                     )
                 else:
                     # Unsupported document reference. Return the unwrapped value to futureproof.
                     return contents
 
             if "@ref" in dct:
                 value = dct["@ref"]
+                if "id" not in value and "name" not in value:
+                    # Unsupported document reference. Return the unwrapped value to futureproof.
+                    return value
+
                 col = FaunaDecoder._decode(value["coll"])
+                doc_ref: Union[DocumentReference, NamedDocumentReference]
 
                 if "id" in value:
-                    return DocumentReference(col, value["id"])
-                elif "name" in value:
-                    return NamedDocumentReference(col, value["name"])
+                    doc_ref = DocumentReference(col, value["id"])
                 else:
-                    # Unsupported document reference. Return the unwrapped value to futureproof.
-                    return value
+                    doc_ref = NamedDocumentReference(col, value["name"])
+
+                if "exists" in value and not value["exists"]:
+                    cause = value["cause"] if "cause" in value else None
+                    return NullDocument(doc_ref, cause)
+
+                return doc_ref
+
             if "@set" in dct:
                 value = dct["@set"]
                 if isinstance(value, str):
                     return Page(after=value)
 
                 after = value["after"] if "after" in value else None
                 data = FaunaDecoder._decode(
```

## fauna/encoding/encoder.py

```diff
@@ -1,11 +1,11 @@
 from datetime import datetime, date
 from typing import Any, Optional, Set
 
-from fauna.query.models import DocumentReference, Module, Document, NamedDocument, NamedDocumentReference
+from fauna.query.models import DocumentReference, Module, Document, NamedDocument, NamedDocumentReference, NullDocument
 from fauna.query.query_builder import Query, Fragment, LiteralFragment, ValueFragment
 
 _RESERVED_TAGS = [
     "@date",
     "@doc",
     "@double",
     "@int",
@@ -190,14 +190,16 @@
         elif isinstance(o, date):
             return FaunaEncoder.from_date(o)
         elif isinstance(o, Document):
             return FaunaEncoder.from_doc_ref(DocumentReference(o.coll, o.id))
         elif isinstance(o, NamedDocument):
             return FaunaEncoder.from_named_doc_ref(
                 NamedDocumentReference(o.coll, o.name))
+        elif isinstance(o, NullDocument):
+            return FaunaEncoder.encode(o.ref)
         elif isinstance(o, (list, tuple)):
             return FaunaEncoder._encode_list(o, _markers)
         elif isinstance(o, dict):
             return FaunaEncoder._encode_dict(o, _markers)
         elif isinstance(o, Query):
             return FaunaEncoder.from_query_interpolation_builder(o)
         else:
@@ -217,16 +219,17 @@
         _id = id(dct)
         if _id in markers:
             raise ValueError("Circular reference detected")
 
         markers.add(id(dct))
         if any(i in _RESERVED_TAGS for i in dct.keys()):
             return {
-                "@object":
-                {k: FaunaEncoder._encode(v, markers)
-                 for k, v in dct.items()}
+                "@object": {
+                    k: FaunaEncoder._encode(v, markers)
+                    for k, v in dct.items()
+                }
             }
         else:
             return {
                 k: FaunaEncoder._encode(v, markers)
                 for k, v in dct.items()
             }
```

## fauna/query/__init__.py

```diff
@@ -1,2 +1,2 @@
 from .query_builder import fql, Query
-from .models import Document, DocumentReference, NamedDocument, NamedDocumentReference, Module, Page
+from .models import Document, DocumentReference, NamedDocument, NamedDocumentReference, NullDocument, Module, Page
```

## fauna/query/models.py

```diff
@@ -18,14 +18,17 @@
             args.append(f"data={repr(self.data)}")
 
         if self.after is not None:
             args.append(f"after={repr(self.after)}")
 
         return f"{self.__class__.__name__}({','.join(args)})"
 
+    def __iter__(self) -> Iterator[Any]:
+        return iter(self.data or [])
+
     def __eq__(self, other):
         return isinstance(
             other,
             Page) and self.data == other.data and self.after == other.after
 
     def __hash__(self):
         hash((type(self), self.data, self.after))
@@ -93,16 +96,15 @@
         """
         return self._id
 
     def __init__(self, coll: Union[str, Module], id: str):
         super().__init__(coll)
 
         if not isinstance(id, str):
-            raise TypeError(
-                f"'ref_id' should be of type str, but was {type(id)}")
+            raise TypeError(f"'id' should be of type str, but was {type(id)}")
         self._id = id
 
     def __hash__(self):
         hash((type(self), self._collection, self._id))
 
     def __repr__(self):
         return f"{self.__class__.__name__}(id={repr(self._id)},coll={repr(self._collection)})"
@@ -139,14 +141,45 @@
     def __hash__(self):
         hash((type(self), self._collection, self._name))
 
     def __repr__(self):
         return f"{self.__class__.__name__}(name={repr(self._name)},coll={repr(self._collection)})"
 
 
+class NullDocument:
+
+    @property
+    def cause(self) -> Optional[str]:
+        return self._cause
+
+    @property
+    def ref(self) -> Union[DocumentReference, NamedDocumentReference]:
+        return self._ref
+
+    def __init__(
+        self,
+        ref: Union[DocumentReference, NamedDocumentReference],
+        cause: Optional[str] = None,
+    ):
+        self._cause = cause
+        self._ref = ref
+
+    def __repr__(self):
+        return f"{self.__class__.__name__}(ref={repr(self.ref)},cause={repr(self._cause)})"
+
+    def __eq__(self, other):
+        if not isinstance(other, type(self)):
+            return False
+
+        return self.ref == other.ref and self.cause == other.cause
+
+    def __ne__(self, other):
+        return not self == other
+
+
 class BaseDocument(Mapping):
     """A base document class implementing an immutable mapping.
     """
 
     def __init__(self, *args, **kwargs):
         self._store = dict(*args, **kwargs)
```

## Comparing `fauna-0.6.0.dist-info/LICENSE` & `fauna-0.6.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `fauna-0.6.0.dist-info/METADATA` & `fauna-0.6.1.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: fauna
-Version: 0.6.0
+Version: 0.6.1
 Summary: Fauna Python driver for FQL 10+
 Home-page: https://github.com/fauna/fauna-python
 Author: Fauna, Inc
 Author-email: priority@fauna.com
 License: MPL 2.0
 Keywords: faunadb fauna
 Platform: UNKNOWN
```

## Comparing `fauna-0.6.0.dist-info/RECORD` & `fauna-0.6.1.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,24 +1,24 @@
-fauna/__init__.py,sha256=HLeTuSnYslYYJZtnUU542FT9MEBKo-Wlp_ehrgJ_x2w,287
+fauna/__init__.py,sha256=TUHbkVvykiUA7YBhOSRhwWd4xUxe7mME56PdOuZTM6s,301
 fauna/client/__init__.py,sha256=SH5k-XCHlGKbsSwvRPUzlyXpsN-Bk_uHNNj78D5zpis,102
-fauna/client/client.py,sha256=6MPbPN1SVsWUalLLL6DEvexLfuaV3ZN3MkJFXUzIM54,18707
+fauna/client/client.py,sha256=VrZ7kqo7VStQm1oVsu_4TCOu3anvKSTU4bqpkIqySwg,18705
 fauna/client/endpoints.py,sha256=nXe1EX-OaVuWc8GRreLcyMDUvfvsJWkec9JlyMAGGzY,90
 fauna/client/headers.py,sha256=IumkqZFRZ9u2ukslT_nybc54caKOutwVF-l5dtN2cdw,3190
 fauna/client/utils.py,sha256=N6zaexuSCdsCyyLnsXI7naqp3Qxwdn_yzwCtEIEkwFA,2213
 fauna/encoding/__init__.py,sha256=_IWx06Wiqa2jrpIEjbGAPcCFyFj0y39KuGhXc3YMPyg,161
-fauna/encoding/decoder.py,sha256=Yn7qQYo6yoknBvJf4UL-ZiWi6x0hRfwmqlgeJ0AtIEQ,5974
-fauna/encoding/encoder.py,sha256=FBf7ngbhqh5wwdHG__UrPVyoRPXOAywG-aIjCUUvHgg,7995
+fauna/encoding/decoder.py,sha256=cxx845g5uDQdFPG9j1Wgr3T8AOTbyRFlJbPSKxlmwsw,6450
+fauna/encoding/encoder.py,sha256=7tlXTkxr9BusVtkicQWoL384b8cZZiigu8HeT5exTh4,8122
 fauna/encoding/wire_protocol.py,sha256=gEvtRjsOZfC7fm1xDlEXNP8h_MtJgxYr5LJZ5hylzyY,5991
 fauna/errors/__init__.py,sha256=w0rUF3kSFPDxjQB8YyZ1oHvU8lo8TOyNrB_G7_fNlJM,361
 fauna/errors/errors.py,sha256=HRXZ24Sju-9vz0qnnPGbuTjj3qot90l4k3hx4UImAD0,4853
 fauna/http/__init__.py,sha256=bPdaa7lvksdkCrazHEnqHPTHi0kWD-13bxryDwSguM8,88
 fauna/http/http_client.py,sha256=AS6-dCZ5MmfZ14o5FdxWP5waeYIKMJEqrxEn-fXAE-A,1201
 fauna/http/httpx_client.py,sha256=QG4lkmzYdwiTiXM93EhKPeToGqDf8tLOViFX4fR3Gw8,2323
-fauna/query/__init__.py,sha256=GbYEdfJfCnIXqYEJdE5HJVA_or11YNeO9-7PmFi3fg8,139
-fauna/query/models.py,sha256=mf8ktkGqAnbw2hFuS5vYumoHkeuokOJwZHj6I4xlHik,8599
+fauna/query/__init__.py,sha256=Ip51imOskDJpQhDahuq-VcX3o3cb4Y62HUG26rzXCh0,153
+fauna/query/models.py,sha256=T5B1o9YUGGqhQh2QreBwqqiDtQqa43WyZ6RQO5EVUAw,9411
 fauna/query/query_builder.py,sha256=0WqByty8V5NmAYb0rYZw5BP8SUwFtXQYkhaVKFblb0Q,4005
 fauna/query/template.py,sha256=JVAz5cLS_xvTTn0yoUO8bToh7PWgz_BH09a5_XKKHYI,2851
-fauna-0.6.0.dist-info/LICENSE,sha256=0uf36d4oXjlrnYCeCbzUq9413zcktAbg1y5V_dKmNlQ,545
-fauna-0.6.0.dist-info/METADATA,sha256=aeEOhyyelWytoFMcB45KAD9a7ucCN0fdjgq5-6IS80s,7073
-fauna-0.6.0.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
-fauna-0.6.0.dist-info/top_level.txt,sha256=Ftl5tOivmmW8rHU9QbV0qMG8M9WQp3JhmYM-s3HU10s,6
-fauna-0.6.0.dist-info/RECORD,,
+fauna-0.6.1.dist-info/LICENSE,sha256=0uf36d4oXjlrnYCeCbzUq9413zcktAbg1y5V_dKmNlQ,545
+fauna-0.6.1.dist-info/METADATA,sha256=gHrkpghVecNJN8wiyc0-1r6aF7YMTK0BGA2dIf5v_gg,7073
+fauna-0.6.1.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
+fauna-0.6.1.dist-info/top_level.txt,sha256=Ftl5tOivmmW8rHU9QbV0qMG8M9WQp3JhmYM-s3HU10s,6
+fauna-0.6.1.dist-info/RECORD,,
```

